;================================================================================================
;                                       SHADOW AGENT BY MGMURROW
;================================================================================================

[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 20
airjuggle = 16
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 250
IntPersistIndex = 50
FloatPersistIndex = 40

[Size]
xscale = 1.1              ;Horizontal scaling factor.
yscale = 1.1              ;Vertical scaling factor.
ground.back=24            ;Player width (back, ground)
ground.front = 24         ;Player width (front, ground)
air.back = 24             ;Player width (back, air)
air.front = 24            ;Player width (front, air)
height = 60               ;Height of player (for opponent to jump over)
attack.dist = 160         ;Default attack distance
proj.attack.dist = 90     ;Default attack distance for projectiles
proj.doscale = 0          ;Set to 1 to scale projectiles too
head.pos = 6,-86          ;Approximate position of head
mid.pos = -2,-57          ;Approximate position of midsection
shadowoffset = 0          ;Number of pixels to vertically offset the shadow
draw.offset = 0,0         ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 4.1           ;Walk forward
walk.back = -3            ;Walk backward
run.fwd  = 10, 0          ;Run forward (x, y)
run.back = -6.1,-4.1      ;Hop backward (x, y)
jump.neu = 0,-9.15        ;Neutral jumping velocity (x, y)
jump.back = -4            ;Jump back Speed (x, y)
jump.fwd = 4              ;Jump forward Speed (x, y)
runjump.back = -6,-10.1   ;Running jump speeds (opt)
runjump.fwd = 6.78,-10.5  ;.

[Movement]
airjump.num = 0           ;Number of air jumps allowed (opt)
airjump.height = 0        ;Minimum distance from ground before you can air jump (opt)
yaccel = .50              ;Vertical acceleration
stand.friction = .85      ;Friction coefficient when standing
crouch.friction = .85     ;Friction coefficient when crouching

;===============================================================================================
;                                        Jumps and Dashes
;===============================================================================================
; RUN_FWD
[Statedef 100]
type    = S
physics = N
ctrl = 1
anim = 100
sprpriority = 1

[state 100]
type = assertspecial
trigger1 = 1
flag = nowalk

[State 100, Dash Sound]
type=PlaySnd
trigger1=Animelem=1
value=2,9

[State 100]
type=PosSet
trigger1=!Time
y=0

[State 100]
type=VelSet
trigger1=Time=[0,11]
x=9

[State 100]
type=VelSet
trigger1=Time=[12,15]
x=4

[State 100]
type=VelSet
trigger1=Time=[16,19]
x=.83

[State 100]
type=VelSet
trigger1=Time=20
x=0

[State 100]
type = ChangeState
trigger1=animtime=0
value = 0

;------------------------
;Jump neutral
[Statedef 101]
type  = A
physics = A
anim = 41
ctrl = 1

[State 101]
type = turn
trigger1 = p2dist X <= -1
trigger1 = time >= 0

[State 101]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 0
ctrl = 1

;------------------------
; RUN_Back
[Statedef 105]
type    = S
physics = S
ctrl = 1
anim = 105
sprpriority = 1

[state 105]
type = assertspecial
trigger1 = 1
flag = nowalk

[State 105, Landing Sound]
type=PlaySnd
trigger1=Animelem=3
value=0,15

[State 105, 1]
type = VelSet
trigger1 = Time = [1,12]
x = -8.5

[State 105, 1]
type=VelSet
trigger1=Time=[13,18]
x=-2

[State 105, 1]
type=VelSet
trigger1=Time=19
x=0

[State 105, 3]
type = ChangeState
trigger1=animtime=0
value = 0
ctrl=1

;-------------------------
; Super jump start
[StateDef 110]
type = S
physics = S
anim = 40
ctrl = 0

[State 110]
type = turn
triggerall = p2dist X <= -3
trigger1 = time >= 0

[State 110, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 110]
type = VarSet
trigger1 = Time = 0
v = 4
value = 0

[State 110]
type = VarSet
trigger1 = command = "holdfwd"
v = 4
value = 1

[State 110]
type = VarSet
trigger1 = command = "holdback"
v = 4
value = -1

[State 110]
type = ChangeState
trigger1 = AnimTime = 0
value = 111
ctrl = 1

;---------------------------
;Super jump
[StateDef 111]
type = A
physics = A
anim = 41
ctrl = 1
velset = 0, -13.5

[State 111]
type=PlaySnd
trigger1=Time=0
value=1,11

[State 111, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 111]
type=Explod
Anim=7008
trigger1=time=0
postype=P1
pos=0,15
removetime=19
bindtime=1
removeongethit=1
sprpriority=1
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 111]
type = VelAdd
triggerall = Vel X >= -2
trigger1 = command = "holdback"
trigger1 = Anim != 43
x = -0.25

[State 111]
type = VelAdd
triggerall = Vel X <= 2.5
trigger1 = command = "holdfwd"
trigger1 = Anim != 42
x = 0.25

[State 111]
type = VelSet
trigger1 = Anim = 42
trigger1 = Time = [0,5]
x = 4

[State 111]
type = VelSet
trigger1 = Anim = 43
trigger1 = Time = [0,5]
x = -3.5

[State 111]
type = turn
triggerall = p2dist X <= -3
trigger1 = time >= 0

[State 111]
type = ChangeAnim
trigger1 = Var(4) = 0
trigger1 = Time = [0,5]
value = 41

[State 111]
type = ChangeAnim
trigger1 = Var(4) = 1
trigger1 = Time = [0,5]
trigger1 = Command = "holdfwd"
value = 42

[State 111]
type = ChangeAnim
trigger1 = Var(4) = -1
trigger1 = Time = [0,5]
trigger1 = Command = "holdback"
value = 43

;---------------------------
; Super jump start 2
[StateDef 112]
type = S
physics = S
anim = 40
ctrl = 0

[State 112]
type = ChangeState
triggerall = Time = 0
trigger1 = P2life=0
trigger2 = winko
value = 0
ctrl = 1

[State 112]
type = turn
triggerall = p2dist X <= -3
trigger1 = time >= 0

[State 112, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 112]
type = ChangeState
trigger1 = AnimTime = 0
value = 113
ctrl = 1

;-----------------------------
;Super jump 2
[StateDef 113]
type = A
physics = A
anim = 41
ctrl = 1
velset = 2.5, -12.9

[State 113]
type = VelSet
trigger1 = Anim = 42
trigger1 = Time = [0,5]
x = 4

[State 113]
type = VelSet
trigger1 = Anim = 43
trigger1 = Time = [0,5]
x = -3.5

[State 113]
type = turn
trigger1 = p2dist X <= -3
trigger1 = time >= 0

[State 113, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 113]
type=PlaySnd
trigger1=Time=0
value=1,11

[State 113]
type=Explod
Anim=7008
trigger1=time=0
postype=P1
pos=0,15
removetime=19
bindtime=1
removeongethit=1
sprpriority=1
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 113]
type = ChangeAnim
trigger1 = Var(4) = 0
trigger1 = Time = [0,5]
value = 41

[State 113]
type = ChangeAnim
trigger1 = Var(4) = 1
trigger1 = Command = "holdfwd"
value = 42

[State 113]
type = ChangeAnim
trigger1 = Var(4) = -1
trigger1 = Command = "holdback"
value = 43

[State 113]
type = Changestate
triggerall = time >= 8
triggerall= p2life != 0
trigger1 = Var(4) = 0
trigger1 = anim = 41
value = 600

;==============================================================================================
;                                            TAUNT
;==============================================================================================
;Taunt
[Statedef 115]
type = S
movetype= A
physics = S
Velset = 0,0
poweradd=250
ctrl = 0

[State 115]
type=VarRandom
triggerall=Time=0
trigger1=ctrl=0
v=6
range=0,1

[State 115]
type = ChangeState
triggerall=var(6)=0
trigger1=Time=0
value=116

[State 115]
type = ChangeState
triggerall=var(6)=1
trigger1=Time=0
value=117

;----------------------------
Taunt Blow
[Statedef 116]
type = S
movetype= A
physics = S
Velset = 0,0
anim = 116
ctrl = 0

[State 116]
type=null;PlaySnd
trigger1=Animelem=1
value=2,11

[State 116]
type =null; PlaySnd
trigger1 = Animelem=4
trigger2 = Animelem=6
value = 0,1

[State 116]
type=PosAdd
trigger1=Animelem=2
x=-3

[State 116]
type=PosAdd
trigger1=Animelem=23
x=2

[State 116]
type=PosAdd
trigger1=Animelem=24
x=1

[State 116]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
Taunt Pump Fist
[Statedef 117]
type = S
movetype= A
physics = S
Velset = 0,0
anim = 117
ctrl = 0

[State 117]
type=PlaySnd
trigger1=Animelem=1
value=2,7

[State 117]
type=PosAdd
trigger1=Animelem=1
x=-1

[State 117]
type=PosAdd
trigger1=Animelem=2
x=-2

[State 117]
type=PosAdd
trigger1=Animelem=20
x=2

[State 117]
type=PosAdd
trigger1=AnimTime=0
x=1

[State 117]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;==============================================================================================
;                                           Lose By Time
;==============================================================================================
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;================================================================================================
;                                            Win Poses
;================================================================================================
[Statedef 180]
type = S
ctrl = 0
anim = 9741

[State 180]
type=changestate
trigger1=prevstateno=185
value=prevstateno

[State 180]
type = VarRandom
trigger1 = time = 0
v = 1
range = 0,3

[State 180, 1]
type = ChangeState
trigger1 = var(1) = 0
value = 181

[State 180, 1]
type = ChangeState
trigger1 = var(1) = 1
value = 182

[State 180, 1]
type = ChangeState
trigger1 = var(1) = 2
value = 183

[State 180, 1]
type = ChangeState
trigger1 = var(1) = 3
value = 184

;--------------------------------
;win Puts on Glasses
[Statedef 181]
type = S
ctrl = 0
anim = 181

[State 181]
type = AssertSpecial
trigger1 = time <= 200
flag = RoundNotOver

;--------------------------------
;win Blow Hair
[Statedef 182]
type = S
ctrl = 0
anim = 182

[State 182]
type = AssertSpecial
trigger1 = time <= 200
flag = RoundNotOver

;--------------------------------
;win Turns Back
[Statedef 183]
type = S
ctrl = 0
anim = 183

[State 183, Snd]
type=playsnd
trigger1= animelem=2
value=2,18
channel=2

[State 183]
type = AssertSpecial
trigger1 = time <= 200
flag = RoundNotOver

;--------------------------------
;win Pulls Jacket
[Statedef 184]
type = S
ctrl = 0
anim = 184

[State 184, Snd]
type=playsnd
trigger1= animelem=12
value=2,ifelse(random>=500,8,10)
channel=2

[State 184]
type = AssertSpecial
trigger1 = time <= 200
flag = RoundNotOver

;--------------------------------
;Win by Final Mission
[Statedef 185]
type=S
sprpriority=4
anim=185

[State 185]
type=Playsnd
triggerall=prevstateno=3404
trigger1=time=0
value=3,1

[State 185]
type=Playsnd
triggerall=prevstateno=3404
trigger1=time=20
value=3,2

[State 185]
type=changestate
trigger1=prevstateno=3404&&time>=200
value=180
ctrl=1

[State 185]
type=changeanim
trigger1=prevstateno=180&&time=0
value=185
elem=11

[State 185,wink]
type=PlaySnd
trigger1=time=70
value=1,8
channel=1
persistent=0

[State 185,wink]
type=Explod
Anim=6008
trigger1=time=70
postype=P1
pos=6,-101
;removetime=9
bindtime=1
removeongethit=1
sprpriority=5
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 185]
type=AssertSpecial
triggerall=prevstateno=180
trigger1=time <=150
flag=RoundNotOver

;================================================================================================
;                                           Introduction
;================================================================================================
; INTRODUCTION
[Statedef 190]
type = S
ctrl = 0
anim = 0

[State 190]
type = VarRandom
trigger1 = time = 0
v = 3
range = 0

[State 190, 1]
type = ChangeState
trigger1 = var(3) = 0
value = 191

;--------------------------------
; Intro Remove Glasses
[Statedef 191]
type=S
ctrl=0
anim=191
velset=0,0

[State 191] 
type=AssertSpecial
trigger1=1
flag=Intro

[State 191]
type=PlaySnd
trigger1=time=50
value=2,14

[State 191]
type=ChangeState
trigger1=Animtime=0
value=0

;==============================================================================================
;                                          Standing Attacks
;==============================================================================================
;Light Punch
[Statedef 200]
type    = S                  
movetype= A                  
physics = S                
juggle  = 1                
ctrl = 0                        
anim = 200                       
poweradd = 50                    
sprpriority = 2                  

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 200]
type = PlaySnd
trigger1 = Animelem = 1
value = 0,0

[State 200]
type=HitDef
trigger1=Animelem=1
priority=3,Hit
attr=S,NA
guardflag=M
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,10
sparkno=S7000
guard.sparkno=S7004
sparkxy=-20,-88
hitsound=S0,4               
guardsound=S0,12
ground.slidetime=12
ground.hittime =16
ground.velocity=-4
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-3,-5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=ifelse(p2bodydist x <=10,-3,-5)
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12      

[State 200]
type=VarSet
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 200]
type = StateTypeSet
trigger1 = animelem = 2
statetype = S      
movetype = I        
physics = S

[State 200]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,2

[State 200]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
trigger1 = ctrl = 0
value = ifelse(var(31)!=0,440,ifelse(p2dist X<=25,410,1000))

[State 200]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 1
trigger1 = ctrl = 0
value = 430

[State 200]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 2
trigger1 = ctrl = 0
value = ifelse(p2dist X<=25,420,400)

[State 200]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Moveguarded = 1
trigger1 = ctrl = 0
value = ifelse(power>=2000,430,430)

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Medium Punch
[Statedef 210]
type    = S                  
movetype= A                  
physics = S                
juggle  = 1                
ctrl = 0                        
anim = 210                       
poweradd = 50                    
sprpriority = 2                  

[State 210, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 210]
type = PlaySnd
trigger1 = Animelem = 1
trigger1 = random>=600
value = 2,14
channel=2

[State 210]
type = PlaySnd
trigger1 = Animelem = 1
value = 0,1

[State 210]
type=HitDef
trigger1=Animelem=2
priority=3,Hit
attr=S,NA
guardflag=M
hitflag=MAF
damage=40
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,10
sparkno=S7001
guard.sparkno=S7004
sparkxy=-20,-78
hitsound=S0,9              
guardsound=S0,12
ground.slidetime=14
ground.hittime =16
ground.velocity=-7.5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-4,-5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=ifelse(p2bodydist x <=10,-3,-5)
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12      

[State 210]
type=VarSet
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 210]
type=VarSet
trigger1=movehit&&var(26)=1
trigger2=numtarget&&var(26)=1
var(26)=2

[State 210]
type = StateTypeSet
trigger1 = animelem = 3
statetype = S      
movetype = I        
physics = S

[State 210]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,2

[State 210]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Moveguarded = 1
trigger1 = ctrl = 0
value = ifelse(var(31)!=0,440,ifelse(p2dist X<=35,450,1000))

[State 210]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Hard Punch
[Statedef 220]
type    = S                  
movetype= A                  
physics = S                
juggle  = 1                
ctrl = 0                        
anim = 220                       
poweradd = 50                    
sprpriority = 2                  

[State 220, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 220]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random>=600
value = 2,15
channel=2

[State 220]
type = PlaySnd
trigger1 = Animelem = 2
value = 0,2

[State 220]
type=HitDef
trigger1=Animelem=3
priority=3,Hit
attr=S,NA
guardflag=M
hitflag=MAF
damage=50
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=12,11
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-83
hitsound=S0,6               
guardsound=S0,12
ground.slidetime=18
ground.hittime =18
ground.velocity=-9.5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=ifelse(p2bodydist x <=10,-3,-5)
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12      

[State 220]
type = StateTypeSet
trigger1 = animelem =4
statetype = S      
movetype = I        
physics = S

[State 220]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,2

[State 220]
type =null; ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Moveguarded = 1
trigger1 = ctrl = 0
value = ifelse(var(23)=23&&p2statetype=C,246,430)

[State 220]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Light Kick
[Statedef 230]
type    = S                  
movetype= A                  
physics = S                
juggle  = 1                
ctrl = 0                        
anim = 230                       
poweradd = 50                    
sprpriority = 2                  

[State 230, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 230]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random>=700
value = 2,13
channel=2

[State 230]
type = PlaySnd
trigger1 = Animelem = 2
value = 0,0

[State 230]
type=HitDef
trigger1=Animelem=3
priority=3,Hit
attr=S,NA
guardflag=M
hitflag=MAF
damage=30
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,10
sparkno=S7000
guard.sparkno=S7004
sparkxy=-20,-20
hitsound=S0,8               
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-4
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-4,-5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=ifelse(p2bodydist x <=10,-3,-5)
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12      

[State 230]
type=VarSet
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 230]
type = StateTypeSet
trigger1 = animelem =4
statetype = S      
movetype = I        
physics = S

[State 230]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,1

[State 230]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
trigger1 = ctrl = 0
value=ifelse(random>=500,240,1100)

[State 230]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 1
trigger1 = ctrl = 0
value = ifelse(p2dist X<=25,420,410)

[State 230]
type =null; ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Moveguarded = 1
trigger1 = ctrl = 0
value = ifelse(var(23)=23&&p2statetype=C,246,430)

[State 230]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Light Kick Forward(Knee Bazooka)
[Statedef 235]
type=S
physics=S
movetype=A
anim=235
ctrl=0
velset=0,0
sprpriority=1
poweradd=0
facep2=1

[State 235]
type=playsnd
trigger1= animelem=1 && random<200
value=2,ifelse(random<500,11,15)
channel=2

[State 235]
type=playsnd
trigger1= animelem=3
value=0,3
channel=1

[State 235, Pos]
type=posadd
trigger1= animelem=1||animelem=2||animelem=3
x=ceil(10*const(size.xscale))

[State 235, Vel]
type=velset
trigger1= animelem=3
x=3
y=-7

[State 235, statetype]
type=statetypeset
trigger1= animelemtime(3)>=0
statetype=A
physics=N

[State 235, grav]
type=veladd
trigger1= animelemtime(3)>=0
y=.95

[State 235]
type=HitDef
trigger1=Animelem=3
priority=3,Hit
attr=S,NA
guardflag=MA
hitflag=MAF
damage=35
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=15,5
givepower=15,8 
pausetime=10,10
sparkno=S7000
guard.sparkno=S7004
sparkxy=-20,-75
hitsound=S0,8               
guardsound=S0,13
ground.slidetime=12
ground.hittime =12
ground.velocity=-3.5,-5.5
guard.slidetime=11
guard.hittime=11
airguard.ctrltime=16
airguard.velocity=-6
air.velocity=-4,-5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12 

[State 235, Type]
type=statetypeset
trigger1= animelemtime(5)>=0
movetype=I

[State 235, End]
type=changestate
trigger1= vel y>0 && pos y>=0
value=236

;------------------------------------
;Light Kick Forward Land(Knee Bazooka)
[Statedef 236]
type=S
physics=S
ctrl=0
anim=236
velset=0,0
movehitpersist=1

[State 236]
type=posset
trigger1= 1
y=0

[State 236]
type=playsnd
trigger1= !time
value=0,15

[State 236]
type=Explod
anim=7011
trigger1=Time=0
postype=P1
pos=0,0
persistent=0
sprpriority=-2
pausemovetime=999
supermovetime=999

[State 236]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;------------------------------------
;Medium Kick
[Statedef 240]
type    = S                  
movetype= A                  
physics = S                
juggle  = 1                
ctrl = 0                        
anim = 240                       
poweradd = 50                    
sprpriority = 2                  

[State 240, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 240]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random>=700
value = 2,14
channel=2

[State 240]
type = PlaySnd
trigger1 = Animelem = 2
value = 0,2

[State 240]
type=HitDef
trigger1=Animelem=3
priority=3,Hit
attr=S,NA
guardflag=M
hitflag=MAF
damage=40
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,10
sparkno=S7001
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-7.5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12      

[State 240]
type=VarSet
trigger1=movehit&&var(26)=1
trigger2=numtarget&&var(26)=1
var(26)=2

[State 240]
type=VarSet
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 240]
type = StateTypeSet
trigger1 = animelem =4
statetype = S      
movetype = I        
physics = S

[State 240]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,2

[State 240]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
trigger1 = ctrl = 0
value = ifelse(var(31)!=0,1100,ifelse(P2statetype=A,1100,1000))

[State 240]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 1
trigger1 = ctrl = 0
value = ifelse(P2statetype=A,1100,250)

[State 240]
type =null; ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Moveguarded = 1
trigger1 = ctrl = 0
value = ifelse(var(23)=23&&p2statetype=C,246,430)

[State 240]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Medium Kick(Anti Turtle)
[Statedef 245]
type=S                  
movetype=A                  
physics=N                
velset=0,0                
ctrl=0                        
anim=245                       
poweradd =50                    
sprpriority =2  
facep2=1                

[State 245]
type=Varset
trigger1=Time=0
var(40)=ifelse(command="holdfwd",2,-2)

[State 245]
type=velset
trigger1= animelem=2
x=var(40)

[State 245]
type=velset
trigger1= animelem=7
x=0

[State 245]
type = PlaySnd
trigger1 = Animelem = 2
value = 2,ifelse(random>=500,14,15)
channel=2

[State 245]
type = PlaySnd
trigger1 = Animelem = 2
value = 0,3

[State 245]
type = Posadd
trigger1=animelem=2
x=10

[State 245]
type=HitDef
trigger1=Animelem=3
priority=5,Hit
attr=S,NA
guardflag=M
hitflag=MAF
damage=50
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,10
sparkno=S7001
guard.sparkno=S7004
sparkxy=-20,-73
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-6.5,ifelse(enemy,statetype=S,-4.5,0)
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-4.5,-5.5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12      

[State 245]
type=StateTypeSet
trigger1=animelem =4     
movetype=I  
      
[State 245]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Hard Kick
[Statedef 250]
type    = S                  
movetype= A                  
physics = S                
juggle  = 1                
ctrl = 0                        
anim = 250                       
poweradd = 50                    
sprpriority = 2                  

[State 250]
type =Changestate
trigger1=time=0&&var(20)=20
trigger1=(enemynear,statetype=C)
value=235

[State 250, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 250]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random>=400
value = 2,15
channel=2

[State 250]
type = PlaySnd
trigger1 = Animelem =2
value = 0,3

[State 250]
type=HitDef
trigger1=Animelem=3
priority=3,Hit
attr=S,NA
guardflag=M
hitflag=MAF
damage=55
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=12,12
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-105
hitsound=S0,10               
guardsound=S0,13
ground.slidetime=18
ground.hittime =18
ground.velocity=-9.8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0;;;ifelse(p2bodydist x <=10,-3,-5)
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12      

[State 250]
type = StateTypeSet
trigger1 = animelem =4
statetype = S      
movetype = I        
physics = S

[State 250]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0

[State 240]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
triggerall = ifelse(var(23)=23,power>=1000,power>=ifelse(life>=500,2000,1000))
trigger1 = ctrl = 0
value = 3100

[State 250]
type =null; ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Moveguarded = 1
trigger1 = ctrl = 0
value = ifelse(var(23)=23&&p2statetype=C,246,430)

[State 250]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Hard Kick Forward
[Statedef 255]
type    =S                  
movetype=A                  
physics=N                
velset=0,0                
ctrl = 0                        
anim = 255                       
poweradd = 50                    
sprpriority = 2                  

[State 255]
type =Velset
trigger1 =Time=0
x=4
y=0

[State 255]
type=velset
trigger1= animelem=3
x=0

[State 255]
type =PlaySnd
trigger1 =Animelem=2
trigger1 =random>=400
value =2,15
channel=2

[State 255]
type =PlaySnd
trigger1 =Animelem =2
value =0,3

[State 255]
type=HitDef
trigger1=Animelem=3
priority=5,Miss
attr=S,NA
guardflag=M
hitflag=MAF
damage=65
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=12,12
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-55
hitsound=S0,10               
guardsound=S0,13
ground.slidetime=18
ground.hittime =18
ground.velocity=-10.8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-5
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12      

[State 255]
type =StateTypeSet
trigger1 =animelem =4     
movetype =I        

[State 255]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;==============================================================================================
;                                          Crouching Attacks
;==============================================================================================
;Crouching light punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 2
poweradd= 20
ctrl = 0
velset= vel x*(prevstateno=[100,106]),0
anim = 400
sprpriority = 2

[State 400, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 400]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random>=800
value = 2,13
channel=2

[State 400]
type=PlaySnd
trigger1=Animelem=1
value=0,0

[State 400]
type=HitDef
trigger1=Animelem=2
priority=3,Hit
attr = C, NA
damage =20
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower = 10,5
givepower = 11,8 
guardflag=M
hitflag = MAF
pausetime=8,8
sparkno=S7000
guard.sparkno=S7004
sparkxy = -5,-55
hitsound = S0,4                  
guardsound=S0,12
ground.slidetime = 10
ground.hittime  = 12
ground.velocity =ifelse(p2bodydist x <=10,-4,-7)
guard.slidetime = 12
guard.hittime = 12
airguard.velocity = -6
air.velocity = -2,-3.5
ground.cornerpush.veloff =0
air.cornerpush.veloff=ifelse(p2bodydist x <=10,-6,-9)
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12               

[State 400]
type=StateTypeSet
trigger1=animelem=3
statetype=C      
movetype=I        
physics=C

[State 400,normal dampener 4]
type=VarSet
trigger1=movehit&&var(25)=0
trigger2=numtarget&&var(25)=0
var(25)=4

[State 400]
type=VarSet
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 400]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,2

[State 400]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = ifelse(var(23)=23,power>=1000,power>=ifelse(life>=500,2000,1000))
trigger1 = ctrl = 0
value = ifelse(p2statetype=A,3100,ifelse(random>=500,3200,3000))

;[State 400]
;type = ChangeState
;triggerall = var(20) = 20
;triggerall = Power >= 1000
;triggerall = p2life != 0
;triggerall = Movehit = 1
;trigger1 = ctrl = 0
;value = ifelse(p2dist X<=40,3100,ifelse(random>=500,3100,3100))

[State 400]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 0
triggerall = p2life != 0
triggerall = Movehit = 1
trigger1 = ctrl = 0
value = ifelse(var(31)!=0,1100,ifelse(p2dist X<=20,410,ifelse(random>=500,1000,1100)))

[State 400]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 1
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = P2bodydist X <= 25
trigger1 = ctrl = 0
value = ifelse(random>=500,450,420)

[State 400]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 1
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = P2bodydist X > 25
trigger1 = ctrl = 0
value = ifelse(p2statetype=A,1100,ifelse(random>=500,410,430))

[State 400]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 2
triggerall = p2life != 0
triggerall = Movehit = 1
trigger1 = ctrl = 0
value = ifelse(var(31)!=0,410,ifelse(p2dist X<=20,420,ifelse(random>=500,410,1000)))

[State 400]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;------------------------------------
;Crouching Medium punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 35
ctrl = 0
velset= vel x*(prevstateno=[100,106]),0
anim = 410
sprpriority = 2

[State 410, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 410]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random>=600
value = 2,14
channel=2

[State 410]
type=PlaySnd
trigger1=Animelem=2
value=0,2

[State 410]
type=HitDef
trigger1=Time=0
priority=3,Hit
attr = C, NA   
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
damage =30
getpower = 20,10                  
givepower = 15,8
guardflag=M
hitflag = MAF
pausetime=7,7
sparkno=S7001
guard.sparkno=S7004
sparkxy = -5,-50
hitsound   = S0,9
guardsound=S0,12
ground.slidetime = 13
ground.hittime  = 13
ground.velocity = -7
air.velocity = -5.5,-3
guard.velocity = -8
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -6
ground.cornerpush.veloff =0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12

[State 410]
type=StateTypeSet
trigger1=animelem=5
statetype=C      
movetype=I        
physics=C

[State 410,normal dampener 4]
type=VarSet
trigger1=movehit&&var(25)=0
trigger2=numtarget&&var(25)=0
var(25)=4

[State 410]
type=VarSet
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 410]
type=VarSet
trigger1=movehit&&var(26)=1
trigger2=numtarget&&var(26)=1
var(26)=2

[State 410]
type = ChangeState
triggerall = var(20) = 20
triggerall = Power >= 1000
triggerall = p2life != 0
triggerall = Movehit = 1
trigger1 = ctrl = 0
value = ifelse(p2statetype=A,3100,ifelse(random>=500,3000,3200))

[State 410]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
trigger1 = ctrl = 0
value = ifelse(random>=500,450,1100)

[State 410]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-----------------------------------------
;Crouching Strong punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 40
ctrl = 0
velset= vel x*(prevstateno=[100,106]),0
anim = 420
sprpriority = 2

[State 420, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 420]
type=PlaySnd
trigger1=Animelem=1
trigger1=random>=500
value=2,15
channel=2

[State 420]
type=PlaySnd
trigger1=Animelem=1
value=0,3

[State 420]
type=width
trigger1=Animelemtime(1)>=0
trigger1=Animelemtime(3)<0
value=30,0

[State 420, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 420]
type=HitDef
trigger1=var(20)!=20
trigger1=Animelem=2
priority=5,Hit
attr = C, NA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
damage =50
getpower = 30,15
givepower = 15,8
guardflag=M
hitflag = MAFD
pausetime = 9,7
sparkno=S7003
guard.sparkno=S7004
sparkxy = -10,-95
hitsound   = S0,7
guardsound=S0,12
ground.slidetime = 21
ground.hittime  = 24
ground.velocity = -10.5
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -10
guard.velocity = -10
air.velocity = -8,-4
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=25
P2Stateno=429

[State 420]
type=HitDef
trigger1=var(20)=20
trigger1=Animelem=2
priority=5,Hit
attr = C, NA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
damage =50
getpower = 30,15
givepower = 15,8
guardflag = M
hitflag = MAFD
pausetime = 9,7
sparkno=S7003
guard.sparkno=S7004
sparkxy = -10,-95
hitsound   = S0,7
guardsound=S0,12
ground.slidetime = 21
ground.hittime  = 24
ground.velocity = -10.5
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -10
guard.velocity = -10
air.velocity = -8,-4
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=25
P1stateno=112
P2Stateno=429

[State 420]
type=VarSet
trigger1=movehit&&var(26)=1
trigger2=numtarget&&var(26)=1
var(26)=1

[State 420]
type=VarSet
triggerall=var(25)=[1,2]
trigger1=movehit
trigger2=numtarget
var(30)=2

[State 420]
type=StateTypeSet
trigger1=animelem=3
statetype=C      
movetype=I        
physics=C

[State 420]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------
;Crouching Heavy Punch p2 Launched State
[Statedef 429]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 429]
type = ChangeAnim2
trigger1 = Time = 0
value = 429

[State 429]
type = VelSet
trigger1 = AnimElem = 2
y = ifelse(pos Y<=-75,-10.5,ifelse(pos Y>=-50,-13.8,-12))

[State 429]
type = VelAdd
trigger1 = AnimElem = 2,>= 0
y = .5

[State 429]
type = VelSet
trigger1 = !Alive
x = -.5
y = -8

[State 429]
type = SelfState 
trigger1 = Time > 20
trigger1 = Vel Y >= 0
value = 5040
ctrl = 1

[State 429]
type = SelfState
trigger1 = !Alive
value = 5050

;------------------------------------------
;Crouching light kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle=ifelse((p2movetype=H&&p2statetype=A),10,5)
poweradd= 20
ctrl = 0
velset= vel x*(prevstateno=[100,106]),0
anim = 430
sprpriority = 2

[State 430]
type=PlaySnd
trigger1=Animelem=1
trigger1=random>=800
value=2,13
channel=2

[State 430]
type=PlaySnd
trigger1=Animelem=1
value=0,0

[State 430]
type = HitDef
trigger1 = Animelem =2
priority=3,Hit
attr = C, NA
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
damage =25
getpower = 10,5
givepower = 11,8
hitflag = MAFD
guardflag = L
pausetime = 8,8
hitsound   = S0,8
guardsound=S0,13
sparkno=S7000
guard.sparkno=S7004
sparkxy = 0,-10
ground.slidetime = 12
ground.hittime  = 12
guard.slidetime = 12
guard.hittime = 12
airguard.velocity = -6
ground.velocity =ifelse(p2bodydist x <=10,-3,-7)
air.cornerpush.veloff=ifelse(p2bodydist x <=10,-4.5,-5)
air.velocity = -3,-5
ground.cornerpush.veloff =0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12
ID=430

[State 430]
type=StateTypeSet
trigger1=animelem=3
statetype=C      
movetype=I        
physics=C

[State 430,normal dampener 4]
type=VarSet
trigger1=movehit&&var(25)=0
trigger2=numtarget&&var(25)=0
var(25)=4

[State 430]
type=VarSet
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 430]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,2

[State 430]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = p2bodydist x<=40
triggerall = Movehit = 1
triggerall = ifelse(var(23)=23,power>=1000,power>=ifelse(life>=500,2000,1000))
trigger1 = ctrl = 0
value = ifelse(random>=500,3100,3000)

[State 430]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = p2bodydist x>40
triggerall = Movehit = 1
triggerall = ifelse(var(23)=23,power>=1000,power>=ifelse(life>=500,2000,1000))
trigger1 = ctrl = 0
value = ifelse(random>=500,3100,3000)

[State 430]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 0
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = P2bodydist X <= 25
trigger1 = ctrl = 0
value = ifelse(random>=500,420,440)

[State 430]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 0
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = P2bodydist X > 25
trigger1 = ctrl = 0
value = ifelse(p2statetype=A,1100,ifelse(random>=500,440,450))

[State 430]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 1
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = P2bodydist X <= 25
trigger1 = ctrl = 0
value = ifelse(random>=500,420,ifelse(p2statetype=C,440,240))

[State 430]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 1
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = P2bodydist X > 25
trigger1 = ctrl = 0
value = ifelse(var(31)!=0,440,ifelse(random>=500,440,1000))

[State 430]
type = ChangeState
triggerall = var(20) = 20
triggerall = var(21) = 2
triggerall = p2life != 0
triggerall = Movehit = 1
trigger1 = ctrl = 0
value = ifelse(p2bodydist x<=20,420,450)

[State 430]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
trigger1 = ctrl = 0
value = ifelse(var(31)!=0,420,ifelse(p2bodydist x<=20,420,ifelse(random>=500,1100,1000)))

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------
;Crouch Strong Kick p2 State
[Statedef 431]
type = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 431]
type = SelfState
trigger1 = Time = 0
value = 5090

[State 431]
type = Gravity
trigger1 = 1

;--------------------------------------------
;Crouch Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 35
ctrl = 0
anim = 440
velset= vel x*(prevstateno=[100,106]),0
sprpriority = 2

[State 440]
type=PlaySnd
trigger1=Animelem=2
trigger1=random>=500
value=2,14
channel=2

[State 440]
type=PlaySnd
trigger1=Animelem=1
value=0,2

[State 440]
type=HitDef
trigger1=Animelem=2
priority=3,Hit
attr = C, NA    
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
damage =35
getpower = 20,10                  
givepower = 15,8
hitflag = MAFD
guardflag = L
pausetime =7,7
hitsound   = S0,9
guardsound=S0,13
sparkno=S7001
guard.sparkno=S7004
sparkxy = -5,-10
ground.slidetime = 16
ground.hittime  = 18
ground.velocity = -7
air.velocity = -5.5,-3
guard.velocity = -8
guard.slidetime = 13
guard.hittime = 13
airguard.velocity = -6
ground.cornerpush.veloff =0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=20

[State 440]
type=StateTypeSet
trigger1=animelem=3
statetype=C      
movetype=I        
physics=C

[State 440,normal dampener 4]
type=VarSet
trigger1=movehit&&var(25)=0
trigger2=numtarget&&var(25)=0
var(25)=4

[State 440]
type=VarSet
triggerall=time=0
trigger1=movehit&&var(26)=1
trigger2=numtarget&&var(26)=1
var(26)=2

[State 440]
type=VarSet
triggerall=time=1
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 440]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,1

[State 440]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
triggerall=power<2000
trigger1 = ctrl = 0
value = 1100

[State 440]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 1
triggerall=power<2000
trigger1 = ctrl = 0
value = 450

[State 440]
type=ChangeState
triggerall=var(20)=20
triggerall=power>=2000
triggerall=Movehit=1
triggerall=p2life!=0
triggerall=var(21)=0
trigger1=ctrl=0
value=ifelse(p2statetype=A,3000,3100)

[State 440]
type=ChangeState
triggerall=var(20)=20
triggerall=power>=2000
triggerall=Movehit=1
triggerall=p2life!=0
triggerall=var(21)=1
trigger1=ctrl=0
value=ifelse(random>=500,3010,3150)

[State 440]
type=VarSet
trigger1=movehit=1
trigger2=animtime=0
v=49
value=0

[State 440]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------
;Crouch Strong Kick
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 40
ctrl = 0
anim = 450
velset= vel x*(prevstateno=[100,106]),0
sprpriority = 2

[State 450]
type=PlaySnd
trigger1=Animelem=2
value=2,15

[State 450]
type=PlaySnd
trigger1=Animelem=1
value=0,3

[State 450,alpha counter]
type=NotHitBy
trigger1=prevstateno=750
trigger1=1
value=SCA,AA,AP,AT
time=1

[State 450]
type=HitDef
trigger1=Animelem=2
priority=5,Hit
attr = C, NA
damage =ifelse(var(26)=1,40,ifelse(var(26)=2,20,60))
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Trip
air.type=Trip
getpower = 30,15
givepower = 15,8
hitflag = MAFD
guardflag = L
pausetime = 7,7
sparkno=S7002
guard.sparkno=S7004
sparkxy = -5,-15
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = 0,-6
guard.hittime = 36
guard.ctrltime = 36
air.velocity = -1.5,-4.5
airguard.velocity = -2,-2
guard.velocity = -2
yaccel=.5
fall=1
air.fall=1
fall.recover=0
fall.recovertime=50
p2stateno = 452

[State 450]
type=VarSet
trigger1=movehit&&var(25)=0
trigger2=numtarget&&var(25)=0
var(25)=1

[State 450]
type=VarSet
triggerall=time=0
trigger1=movehit&&var(26)=2
trigger2=numtarget&&var(26)=2
var(26)=3

[State 450]
type=VarSet
triggerall=time=1
trigger1=movehit&&var(26)=1
trigger2=numtarget&&var(26)=1
var(26)=2

[State 450]
type=VarSet
triggerall=time=2
trigger1=movehit&&var(26)=0
trigger2=numtarget&&var(26)=0
var(26)=1

[State 450]
type=StateTypeSet
trigger1=animelem=3
statetype=C      
movetype=I        
physics=C

[State 450]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = ifelse(var(23)=23,power>=2000,power>=ifelse(life>=500,3000,2000))
trigger1=ctrl=0
value=3150

[State 450]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = ifelse(var(23)=23,power>=1000,power>=ifelse(life>=500,2000,1000))
trigger1=ctrl=0
value=3100

[State 450]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------
;Crouch Strong Kick p2 State
[Statedef 452]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 452]
type = ChangeAnim
trigger1 = Time = 0
value = 5070

[State 452]
type = VelSet
;triggerall = p2dist X >= 0
;triggerall = pos Y >= -100
trigger1 = time = [0,8]
x = -.5
y = -2.5

[State 452]
type = Gravity
trigger1 = 1

[State 452]
type = changeState
trigger1 = Pos Y >= -10
trigger1 = Vel Y >= 0
value = 453
ctrl = 0

;---------------------------------------------------
;Crouch Strong Kick P2 Lie on the ground
[Statedef 453]
type    = L
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 453]
type = PosSet
trigger1 = Time = 0
y = 0

[State 453]
type = ChangeAnim
Trigger1 = 1
value = 5110

[State 453]
type = SelfState
trigger1 = Time = 20
value=ifelse(alive,5120,5150)

;==============================================================================================
;                                            Air Attacks
;==============================================================================================
;Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
anim =600
sprpriority = 2

[State 600]
type=PlaySnd
trigger1=Animelem=1
trigger1=random>=700
value=2,13
channel=2

[State 600]
type=PlaySnd
trigger1=Animelem=2
value=0,0

[State 600, Velset when chained from Dart kick]
type = Velset
triggerall = PrevStateno = 660
trigger1 = Time = 0
y = 0

[State 600]
type=HitDef
trigger1=Time=0
attr = A, NA
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse((Prevstateno=[110,111]),10,20)
getpower= 10
givepower= 10
guardflag= HA
hitflag=MAF
priority = 3, Hit
pausetime=8,8
sparkno=S7000
guard.sparkno=S7004
sparkxy = 0,-55
hitsound=S0,4
guardsound=S0,12
ground.slidetime = 10
ground.hittime = 12
ground.velocity = -5
guard.slidetime = 12
guard.hittime = 12
air.hittime = 16
air.velocity = 0,-4.5
airguard.velocity = -6
yaccel=.6
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12
ID=600

[State 600]
type=StateTypeSet
triggerall=Anim=605
trigger1=animelem=4
statetype=A      
movetype=I        
physics=A

[State 600]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,1

[State 600]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
trigger1 = ctrl = 0
value = 610

[State 600]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 1
trigger1 = ctrl = 0
value = 630

[state 600]
type = changestate
trigger1 = AnimTime = 0
value = 101
ctrl = 1

;---------------------------------------
;Jump Medium Punch 
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 35
ctrl = 0
anim =610
sprpriority = 2

[State 610, Velset when chained from Dart kick]
type = Velset
triggerall = PrevStateno = 660
trigger1 = Time = 0
y = 0

[State 610]
type=PlaySnd
trigger1=Animelem=2
trigger1=random>=700
value=2,14
channel=2

[State 610]
type=PlaySnd
trigger1=Animelem=2
value=0,3

[State 610]
type=width
trigger1=time=[5,11]
value=30,0

[State 610]
type=HitDef
trigger1=animelem=3
attr=A,NA
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse((Prevstateno=[110,111]),13,25)
getpower=40,60
givepower=25,10
priority=5,Hit
guardflag = HA
hitflag=MAF
pausetime = 8,8
sparkno=S7001
guard.sparkno=S7004
sparkxy = -5,-70
hitsound= S0,9
guardsound=S0,12
ground.slidetime =12
ground.hittime  =12
ground.velocity=-2.5 
guard.velocity = -5
air.velocity = 0,-4
airguard.velocity = -5, 1
yaccel=.5
fall=0
air.fall=0
fall.recover=0
fall.recovertime=25
;P1StateNo=621

[State 610]
type=StateTypeSet
triggerall=Anim=625
trigger1=animelem=9
statetype=A      
movetype=I        
physics=A

[State 610]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,2

[State 610]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
trigger1 = ctrl = 0
value = ifelse(power>=2000,3050,620)

[State 610]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 1
trigger1 = ctrl = 0
value = ifelse(var(23)=23,1010,ifelse(random>=500,650,1202))

[State 610]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 2
trigger1 = ctrl = 0
value = ifelse(random>=500,1152,1010)

[state 610]
type = changestate
trigger1 = AnimTime = 0
value = 101
ctrl = 1

;---------------------------------------
;Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = A
poweradd= 45
ctrl = 0
anim =620
sprpriority = 2

[State 620, Velset when chained from Dart kick]
type = Velset
triggerall = PrevStateno = 660
trigger1 = Time = 0
y = 0

[State 600]
type=PlaySnd
trigger1=Animelem=2
trigger1=random>=500
value=2,15
channel=2

[State 620]
type=PlaySnd
trigger1=Animelem=2
value=0,3

[State 620]
type=PosFreeze
triggerall=time<=1&&anim=650&&(enemy,statetype!=A)
trigger1=numtarget&&prevstateno=[600,610]
trigger2=numtarget&&prevstateno=[630,640]
x=1
y=1

[State 620]
type=HitDef
trigger1=Time=0
attr = A, NA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage =40
getpower=40,60
givepower=25,10
priority=5,Hit
guardflag = HA
hitflag=MAF
pausetime = 14,14
sparkno=S7002
guard.sparkno=S7004
sparkxy = 0,-75
hitsound= S0,6
guardsound=S0,12
ground.slidetime =12
ground.hittime  =12
ground.velocity=-4.5 
guard.velocity = -5
air.velocity = -7,8
airguard.velocity = -5, 1
yaccel=.5
fall=0
air.fall=1
fall.recover=0
fall.recovertime=25

[state 620]
type = changestate
trigger1 = AnimTime = 0
value = 101
ctrl = 1
;--------------------------------------
;Jump Light Kick
[Statedef 630]
type = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
anim =630
sprpriority = 2

[State 630]
type=PlaySnd
trigger1=Animelem=2
trigger1=random>=700
value=2,13
channel=2

[State 630]
type=PlaySnd
trigger1=Animelem=2
value=0,0

[State 630, Velset when chained from dart kick]
type = Velset
triggerall = PrevStateno = 660
trigger1 = Time = 0
y = 0

[State 630]
type=HitDef
trigger1=Time=0
attr = A, NA
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse((Prevstateno=[110,111]),10,20)
getpower=10
givepower=8
guardflag = HA
hitflag=MAF
priority=3,Hit
pausetime=8,8
sparkno=S7000
guard.sparkno=S7004
sparkxy = 0,-100
hitsound=S0,8
guardsound=S0,13
ground.slidetime = 10
ground.hittime = 12
ground.velocity = -5
guard.slidetime = 12
guard.hittime = 12
air.hittime = 16
air.velocity = 0,-4.5
airguard.velocity = -6
yaccel=.4
fall=0
air.fall=0
fall.recover=1
fall.recovertime=20

[State 630]
type=StateTypeSet
trigger1=animelem=8
statetype=A      
movetype=I        
physics=A

[State 630]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,1

[State 630]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
trigger1 = ctrl = 0
value = 640

[State 630]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 1
trigger1 = ctrl = 0
value = ifelse(var(23)=23,1010,ifelse(random>=500,650,1202))

[state 630]
type=changestate
trigger1=AnimTime=0
value=101
ctrl=1

;--------------------------------------
;Jump Medium Kick
[Statedef 640]
type = A
movetype= A
physics = A
poweradd= 30
ctrl = 0
anim =640
sprpriority = 2

[State 640]
type=PlaySnd
trigger1=Animelem=2
trigger1=random>=700
value=2,14
channel=2

[State 640]
type=PlaySnd
trigger1=Animelem=2
value=0,1

[State 640, Velset when chained from dart kick]
type = Velset
triggerall = PrevStateno = 660
trigger1 = Time = 0
y = 0

[State 640]
type=HitDef
trigger1=Time=0
attr = A, NA
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse((Prevstateno=[110,111]),10,20)
getpower=20,15
givepower=10,10
guardflag = HA
hitflag=MAF
priority=3,Hit
pausetime = 10,10
sparkno=S7001
guard.sparkno=S7004
sparkxy = -10,-55
hitsound=S0,9
guardsound=S0,13
ground.slidetime = 10
ground.hittime = 12
ground.velocity = -6.5
guard.slidetime = 12
guard.hittime = 12
air.hittime = 16
air.velocity = 0,-5.5
airguard.velocity = -6
yaccel=.6

[State 640]
type=StateTypeSet
trigger1=animelem=8
statetype=A      
movetype=I        
physics=A

[State 640,normal dampener 2]
type=VarSet
trigger1=movehit&&var(25)=0
trigger2=numtarget&&var(25)=0
var(25)=2

[State 640]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,2

[State 640]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 0
trigger1 = ctrl = 0
value = ifelse(enemy,statetype!=A,650,ifelse(power>=2000,3210,620))

[State 640]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 1
trigger1 = ctrl = 0
value = ifelse(enemy,statetype!=A,650,ifelse(power>=1000,3055,1152))

[State 640]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2life != 0
triggerall = Movehit = 1
triggerall = var(21) = 2
trigger1 = ctrl = 0
value = ifelse(enemy,statetype!=A,650,ifelse(var(23)=23,1010,ifelse(random>=500,650,1202)))

[state 640]
type=changestate
trigger1=AnimTime=0
value=101
ctrl=1

;--------------------------------------
;Jump Strong Kick
[Statedef 650]
type    = A
movetype= A
physics = A
poweradd= 45
ctrl = 0
anim =650
sprpriority = 2

[State 650, Velset when chained from dart kick]
type = Velset
triggerall = PrevStateno = 660
trigger1 = Time = 0
y = 0
 
[State 650]
type=PlaySnd
trigger1=Animelem=2
value=0,3

[State 650]
type=PlaySnd
trigger1=Animelem=3
value=2,15

[State 650]
type=width
trigger1=time=[5,11]
value=30,0

[State 650]
type=PosFreeze
triggerall=time<=1&&anim=650&&(enemy,statetype!=A)
trigger1=numtarget&&prevstateno=[600,610]
trigger2=numtarget&&prevstateno=[630,640]
x=1
y=1

[State 650]
type=HitDef
trigger1=animelem=3
attr=A,NA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=70
getpower=40,40
givepower=35,20
priority=5,Hit
guardflag=HA
hitflag=MAF
pausetime=ifelse(p2bodydist x<=-1,11,14),ifelse(p2bodydist x<=-1,11,14)
sparkno=S7002
guard.sparkno=S7004
sparkxy = 0,-35
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4.5,0
guard.velocity = -5
air.velocity=-9,9
airguard.velocity = -5, 1
yaccel=.5
fall=0
air.fall=1
fall.recover=0
fall.recovertime=30

[State 650]
type=StateTypeSet
trigger1=animelem=4
statetype=A      
movetype=I        
physics=A

[State 650]
type=VarSet
trigger1=numtarget&&var(25)=0
var(25)=4

[State 650]
type=VarSet
trigger1=numtarget&&var(26)=0
var(26)=3

[state 650]
type=changestate
trigger1=AnimTime=0
value=101
ctrl=1

;===============================================================================================
;                                             Guard Push
;===============================================================================================
;Guard Push Standing
[Statedef 700]
type=S
movetype=I
physics=N
poweradd=30
velset=0,0
ctrl=0
anim=700
sprpriority=0

[State 700]
type=PlaySnd
trigger1=Time=0
value=2,13

[State 700]
type=Velset
triggerall= enemy(0),BackEdgeBodyDist<20
trigger1=Time>=0
trigger1=Time<=10
x=-10
y=0

[State 700]
type=Velset
triggerall= enemy(0),BackEdgeBodyDist>=20
trigger1=Time>=0
trigger1=Time<=10
x=0
y=0

[State 700]
type=Explod
Anim=7005
trigger1=Time=0
postype=P1
pos=60,-75
bindtime=10
removeTime=10
sprpriority=4
ownpal=1

[State 700]
type=Helper
trigger1=Time=0
helpertype=Normal
name="GuardPush"
postype=P1
pos=0,0
stateno=711
ownpal=1
size.height=200
size.ground.back=30
size.ground.front=30

[State 700]
type=varset
Trigger1=time=0
var(10)=prevstateno

[State 700]
type=ChangeState
trigger1=AnimTime=0
value=var(10)
ctrl=0
;=====================================
;Guard Push Crouching
[Statedef 705]
type=C
movetype=I
physics=N
poweradd=30
velset=0,0
ctrl=0
anim=705
sprpriority=0

[State 705]
type=PlaySnd
trigger1=Time=0
value=2,13

[State 705]
type=Velset
triggerall=enemy(0),BackEdgeBodyDist<20
trigger1=Time>=0
trigger1=Time<=10
x=-10
y=0

[State 705]
type=Velset
triggerall=enemy(0),BackEdgeBodyDist>=20
trigger1=Time>=0
trigger1=Time<=10
x=0
y=0

[State 705]
type=Explod
Anim=7005
trigger1=Time=0
postype=P1
pos=50,-55
bindtime=10
removeTime=10
sprpriority=4
ownpal=1

[State 705]
type=Helper
trigger1=Time=0
helpertype=Normal
name="GuardPush"
postype=P1
pos=0,0
stateno=711
ownpal=1
size.height=200
size.ground.back=30
size.ground.front=30

[State 705]
type=varset
Trigger1=time=0
var(10)=prevstateno

[State 705]
type=ChangeState
trigger1=AnimTime=0
value=var(10)
ctrl=0
;===================================
;Guard Push Air
[Statedef 710]
type=A
movetype=I
physics=N
poweradd=30
velset=0,0
ctrl=0
anim=710
sprpriority=0

[State 710]
type=PlaySnd
trigger1=Time=0
value=2,13

[State 710]
type=Velset
triggerall=enemy(0),BackEdgeBodyDist<20
trigger1=Time>=0
trigger1=Time<=10
x=-10
y=0

[State 710]
type=Velset
triggerall=enemy(0),BackEdgeBodyDist>=20
trigger1=Time>=0
trigger1=Time<=10
x=0
y=0

[State 710]
type=Explod
Anim=7005
trigger1=Time=0
postype=P1
pos=45,-85
bindtime=10
removeTime=10
sprpriority=4
ownpal=1

[State 710]
type=Helper
trigger1=Time=0
helpertype=Normal
name="GuardPush"
postype=P1
pos=0,0
stateno=712
ownpal=1
size.height=200
size.ground.back=30
size.ground.front=30

[State 710]
type=ChangeState
trigger1=AnimTime=0
value=50
ctrl=1

;---------------------------
;Invisible Push
[Statedef 711]
type    = A
movetype= I 
physics = N
velset = 0,0
anim = 711

[State 711]
type = posset
trigger1 = time = 0
y = 0

[State 711]
type = PlayerPush
trigger1 = 1
value = 1

[State 711]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 711]
type = VelSet
trigger1 = Time >= 0
x = 17

[State 711]
type = DestroySelf
trigger1 = Time = 20

;--------------------------
; Guard Push Air Helper
[Statedef 712]
type = A
movetype= I
physics = N
poweradd= 0
ctrl = 0
anim = 712
sprpriority = -4

[State 712]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 712]
type = Velset
trigger1 = Time = [0,10]
x = 30

[State 712]
type = Velset
trigger1 = Time = [11,13]
x = 20

[State 712]
type = Velset
trigger1 = Time >= 14
x = 10

[State 712]
type = NotHitBy
trigger1 = 1
value = SCA
time = 10

[State 712]
type = DestroySelf
trigger1 = Time >= 18

;==============================================================================================
;                                          Alpha Counter
;==============================================================================================
;ALPHA COUNTER BACKHAND 
[Statedef 750]
type=S
movetype= A
physics = S
anim = 750
velset = 0
poweradd = -500
sprpriority = 2
ctrl = 0

[State 750]
type=playerpush
trigger1=time >=0
value=1

[State 750]
type=NotHitBy
trigger1 = 1
value=SCA,AA,AP,AT
time=1

[State 750]
type=superpause
trigger1=!time
time=20
movetime=20
anim=-1
sound=s1,15

[State 750]
type=BGPalFX
trigger1=time=0
time=24
add=-255,-255,-255
sinadd=255,255,255,120

[State 750]
type=BGPalFX
trigger1=time=22
time=30
add=-255,-255,-255
sinadd=255,255,255,120

[State 750]
type = Explod
Anim = 7006
triggerall=facing=1
trigger1 = Time = 1
postype = P1
pos = 30,23
bindtime = 1
;removeTime = 30
sprpriority = 0
ownpal = 1
pausemovetime=999
supermovetime=999

[State 750]
type = Explod
Anim = 17006
triggerall=facing=-1
trigger1 = Time = 1
postype = P1
pos = 30,23
bindtime = 1
;removeTime = 30
sprpriority = 0
ownpal = 1
pausemovetime=999
supermovetime=999

[State 750]
type=assertspecial
trigger1=1
flag=nowalk
flag2=nostandguard
flag3=nocrouchguard

[State 750]
type=width
trigger1=1
value=60,0

[state 750]
type = ChangeState
trigger1 = AnimTime = 0
value =ifelse(p2statetype!=C,751,450)
ctrl = 0

;------------------------------------
;Alpha Counter Backhand
[Statedef 751]
type    = S                  
movetype= A                  
physics = S                
juggle  = 1                
ctrl = 0                        
anim = 751                       
poweradd = 50                    
sprpriority = 2                  

[State 751]
type=NotHitBy
trigger1 = 1
value=SCA,AA,AP,AT
time=1

[State 751, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 751]
type = PlaySnd
trigger1 = Animelem = 2
value = 2,15
channel=2

[State 751]
type = PlaySnd
trigger1 = Animelem = 2
value = 0,2

[State 751]
type=width
trigger1=time=[0,5]
value=60,0

[State 751]
type=ScreenBound
trigger1=1
value=0

[State 751, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 751]
type=HitDef
trigger1=Animelem=3
priority=3,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=100
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=12,11
sparkno=S7002
guard.sparkno=S7004
sparkxy=0,-83
hitsound=S0,6               
guardsound=S0,12
ground.slidetime=30
ground.hittime=40
ground.velocity=-30,-2
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-5
air.velocity=-30,-2; This block of code is from N64Mario's carlos so give him credit
ground.cornerpush.veloff=0
envshake.time=30   
envshake.freq=100  
envshake.ampl=-10 
envshake.phase=10 
fall.recover=0    
air.juggle=1      
air.fall=1         
fall=1     
p2facing=1        
p2stateno=752      

[State 751, PlaySnd]
type = PlaySnd
trigger1 = P2stateno =753
value = S1,20
persistent = 0

[State 751, Explod]
type = Explod
trigger1 = P2stateno =753
ID =7013
anim =7013
postype = p2
pos = -20,20
facing=-1
bindtime = 1
sprpriority = 3
persistent = 0

[State 751, HitAdd]
type =HitAdd
trigger1 = P2stateno =753
trigger1 = time =0
value = 1
persistent = 0

[State 751]
type=ChangeState
trigger1=P2Stateno=753
trigger1=BackEdgeBodyDist <=-60
value=100
ctrl=0

[State 751]
type=ChangeState
trigger1=P2Stateno=753
trigger1=BackEdgeBodyDist >-60
trigger1=AnimTime=0
value=0
ctrl=1

[State 751]
type = ChangeState
trigger1=AnimTime=0
value = 0
ctrl = 1

;-------------------------------------------------
; This code is from N64Mario's carlos so give him credit, he is the author of statedef 980-981
; i am using it with his permission read the readme file
; Opponent Hit
[Statedef 752]
type    = A
movetype= H
physics = N
velset = 0,0
anim = 5010

[State 752]
type = VelSet
trigger1 = time = 0
x = -20

[State 752]
type = SelfState
trigger1 = Alive = 0
value = 5000

[State 752]
type = ChangeAnim
trigger1 = Time < 10
value = 5010

[State 752]
type = AfterImage
trigger1 = Time = 5
length = 5
timegap = 1
framegap = 1
PalBright   = 0,0,0
PalContrast = 100,100,100
PalMul      = 1,1,1
trans = Add1
time = 0

[State 752]
type = AfterImageTime
trigger1 = 1
time = 2

[State 752]
type = ChangeAnim
trigger1 = Time >= 10
value = 5011

[State 752]
type = HitVelSet
trigger1 = Time = 10
x = 1

[State 752]
type = ChangeState
triggerall = Time >= 3
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 753

[State 752]
type = SelfState
trigger1 = Time = 150
value = 5000

;---------------------------------------------------------------------------
; This code is from N64Mario's carlos so give him credit, he is the author of statedef 980-981
; i am using it with his permission read the readme file
; Hit Wall
[Statedef 753]
type    = A
movetype= H
physics = N
anim = 5010

[State 753]
type = EnvShake
trigger1 = time = 0
time = 30
freq = 100
ampl = -10
phase = 10

[State 753]
type = PosAdd
trigger1 = Time = 0
x = 10 - BackEdgeBodyDist

[State 753]
type = PosFreeze
trigger1 = Time < 10
x = 1
y = 1

[State 753]
type =null; Explod
trigger1 = time = 0
anim = F72
pos = -30,-50
postype = p1
facing = 1
sprpriority = 3
bindtime = 2
supermove = 1

[State 753]
type =null; PlaySnd
trigger1 = Time = 0
value = F7,2

[State 753]
type = LifeAdd
trigger1 = Time = 0
value = -75

[State 753]
type = ChangeAnim
triggerall = SelfAnimExist(5030)
trigger1 = Time = 10
value = 5030

[State 753]
type = VelSet
trigger1 = Time = 10
x = 2
y = -4

[State 753]
type = VelAdd
trigger1 = Time > 10
y = .4

[State 753]
type = ChangeAnim
triggerall = SelfAnimExist(5035)
trigger1 = Anim = 5030
trigger1 = AnimTime = 0
value = 5035

[State 753]
type = ChangeAnim
triggerall = SelfAnimExist(5050)
triggerall = AnimTime = 0
trigger1 = Anim = 5030
trigger2 = Anim = 5035
value = 5050

[State 753]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y > 20
value = 5100 ;Hit ground

;==============================================================================================
;                                          Recovery Rolls
;==============================================================================================
;Lie Down Recovery Roll Forward
[Statedef 940]
type = C
movetype = I
physics = N
poweradd = 0
velset = 11.5,0
ctrl = 0
anim = 940
sprpriority = 0

[State 940]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 11
trigger3 = Time = 22
value = 1,5

[State 940]
type = turn
triggerall = p2dist X <= -3
trigger1 = time = 0

[State 940]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 940]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 940]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 940]
type = ChangeState
triggerall = Var(20) = 20
trigger1 = (P2Dist X <= -30) || (FrontEdgeBodyDist <= 0)
trigger2 = Time >= 40
value = 944

[State 940]
type = ChangeState
trigger1 = AnimTime = 0
value = 944
ctrl = 0

;--------------------------
;Lie Down Recovery Roll back
[Statedef 941]
type = C
movetype = I
physics = N
poweradd = 0
velset = -11.5,0
ctrl = 0
anim = 941
sprpriority = 0

[State 941]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 11
trigger3 = Time = 22
value = 1,5

[State 941]
type = turn
triggerall = p2dist X <= -3
trigger1 = time = 0

[State 941]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 941]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 941]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 941]
type = ChangeState
triggerall = Var(20) = 20
trigger1 = (P2Dist X <= -30) || (FrontEdgeBodyDist <= 0)
trigger2 = Time >= 40
value = 944

[State 941]
type = ChangeState
trigger1 = AnimTime = 0
value = 944
ctrl = 0
;----------------------------
; Recovery Roll Forward
[Statedef 942]
type = L
movetype = I
physics = S
ctrl = 0
anim = 942
poweradd = 0
velset = 0,0

[State 942]
type = PlaySnd
trigger1 = Time = 0
value = 4000,2

[State 942]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 11
trigger3 = Time = 22
trigger4 = Time = 33
trigger5 = Time = 44
value = 1,5

[State 942]
type = PosSet
trigger1 = Time = 0
y = 0

[State 942]
type = VelSet
trigger1 = Time >= 0
x = 9

[State 942]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 942]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 942]
type = varset
trigger1 = Time = 0
v = 31
value = 0

[State 942]
type = ChangeState
triggerall = Var(20) = 20
trigger1 = (P2Dist X <= -40) || (FrontEdgeBodyDist <= 0)
trigger2 = Time >= 40
value = 944
ctrl = 0

[State 942]
type = ChangeState
;trigger1 = AnimTime = 0
trigger1 = (P2Dist X <= -25) || (FrontEdgeBodyDist <= 10)
trigger2 = Time >= 40
value = 944
ctrl = 0
;----------------------------
; Recovery Roll Back
[Statedef 943]
type = L
movetype = I
physics = S
ctrl = 0
anim = 943
poweradd = 0
velset = 0,0

[State 943]
type = PlaySnd
trigger1 = Time = 0
value = 4000,2

[State 943]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 11
trigger3 = Time = 22
trigger4 = Time = 33
trigger5 = Time = 44
value = 1,5

[State 943]
type = PosSet
trigger1 = Time = 0
y = 0

[State 943]
type = VelSet
trigger1 = Time >= 0
x = -9

[State 943]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 943]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 943]
type = varset
trigger1 = Time = 0
v = 31
value = 0

[State 943]
type = ChangeState
triggerall = Var(20) = 20
trigger1 = (P2Dist X <= -40) || (FrontEdgeBodyDist <= 0)
trigger2 = Time >= 40
value = 944
ctrl = 0

[State 943]
type = ChangeState
trigger1 = AnimTime = 0
value = 944
ctrl = 0

;----------------------------
; Recovery Roll End
[Statedef 944]
type = C
movetype = I
physics = S
ctrl = 0
anim = 944
poweradd = 0
velset = 0,0

[State 944]
type = turn
triggerall = p2dist X <= 0
trigger1 = time = 0
trigger2 = AnimTime = 0
trigger3 = frontedgebodydist <=5

[State 944]
type=NotHitBy
trigger1=1
value=SCA
time=1

[State 944] ;Can't be thrown right after getting up
type=NotHitBy
trigger1=AnimTime = 0
value=,NT,ST,HT
time=12

[State 944] ;Can't be hit right after getting up (short time)
type=NotHitBy
trigger1=AnimTime = 0
value=SCA
time=4

[State 944]
type = ChangeState
triggerall = Var(20) = 20
triggerall = prevstateno!=5138
triggerall = !(enemynear,ctrl) && (enemynear,stateno!=[120,155]) && p2statetype!=L
triggerall = P2BodyDist X = [0,40]
triggerall = P2movetype=A
triggerall = p2statetype!=A
triggerall = ifelse(var(23)=23,power>=1000,power>=ifelse(life>=500,2000,1000))
trigger1 = AnimTime = 0
value = ifelse(p2statetype=A,3100,ifelse(random>=500,3200,3000))
ctrl = 0

[State 944]
type = ChangeState
triggerall = var(20) = 20
triggerall = prevstateno!=5138
triggerall = P2BodyDist X = [-10,40]
triggerall = p2statetype!=A
trigger1 = AnimTime = 0
value = ifelse(random>300,430,ifelse(random>=650,820,800))

[State 944]
type = ChangeState
triggerall = var(20) = 20
triggerall = prevstateno!=5138
triggerall = P2BodyDist X = [-10,50]
triggerall = p2statetype=A
trigger1 = AnimTime = 0
value = ifelse(P2BodyDist X<=25,420,1200)

[State 944]
type = ChangeState
trigger1 = AnimTime = 0
value = 12
ctrl = 1
;===============================================================================================
;                                              Throws
;===============================================================================================
;GROUND THROW SHADOW SUPLEX
[Statedef 800]
type = S
movetype= A
physics = N
anim = 800
vel=0,0
poweradd = 50
ctrl = 0
facep2=1

[State 800]
type=PlaySnd
trigger1=AnimElem=2
value=0,0

[State 800]
type=PlaySnd
trigger1=AnimElem=3
value=2,5
channel=2

[State 800]
type=VelSet
trigger1=1
x=0
y=0

[State 800, Don't Guard]
type=attackdist
trigger1=1
value=0

[State 800]
type = turn
trigger1 = p2dist X <= -1
trigger1 = time = 0

[State 800]
type = HitDef
triggerall=var(20)!=20
trigger1=AnimElem=2
attr=S,NT
hitflag=M-
guardflag= 
damage=0
getpower=50
givepower=40
priority=1, Hit 
pausetime=0,6
;snap = -40, 0, 0
sparkno=S7014
guard.sparkno=S7018
sparkxy=-40,-85
hitsound = S800,0    
p1facing = ifelse (command = "holdfwd", 1, -1) 
p2facing = 1         
p1stateno = 801   
p2stateno = 810             
fall = 1   
fall.damage = 0   
kill = 1
fall.kill = 1        

[State 800]
type = HitDef
triggerall=var(20)=20
trigger1=AnimElem=2
attr = S, NT
hitflag = M-
guardflag = 
damage = 0
getpower= 50
givepower= 40
priority = 1, Hit 
pausetime = 0,6
;snap = -40, 0, 0
sparkno=S7014
guard.sparkno=S7018
sparkxy=-40,-85
hitsound = S800,0    
p1facing = 1
p2facing = 1         
p1stateno = 801   
p2stateno = 810             
fall = 1   
fall.damage = 0   
kill = 1
fall.kill = 1   

[State 800, Type]
type=statetypeset
trigger1= animelemtime(3)>=0
movetype=I

[State 800]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------
;GROUND THROW SHADOW SUPLEX TECH HIT DECIDER
[Statedef 801]
type    = S
movetype= A
physics = N
velset = 0
anim = 801
ctrl = 0

[State 801]
type=VelSet
trigger1=1
x=0
y=0

[State 801]
type=TargetBind
trigger1 = enemy,stateno=810
trigger1 = time <= 6
pos=70,-60
time=6

[State 801]
type = VarSet
triggerall = Time = [0,10]
trigger1 = target, command = "x" 
trigger2 = target, command = "y" 
trigger3 = target, command = "z" 
trigger4 = target, command = "recovery" 
var(32) = 1

[State 801]
type = targetstate
TriggerAll = Time = 6
trigger1 = var(32) = 0
value = 810

[State 801]
type = targetstate
TriggerAll = Time = 6
trigger1 = var(32) = 1
value = 897

[State 301, end]
type = changeState
triggerall = var(32) = 1
Trigger1 = Time = 6
value = 896
ctrl = 0

[State 301, end]
type = ChangeState
triggerall = var(32) = 0
Trigger1 = Time = 6
value = 805
ctrl = 0

;---------------------------------------
;GROUND THROW SHADOW SUPLEX P1 State
[Statedef 805]
type=S
physics=S
movetype=A
anim=805
ctrl=0
velset=0,0
sprpriority=1

[State 805, throw]
type=targetstate
trigger1= !time && numtarget
value=810

[State 805]
type=PlaySnd
trigger1=AnimElem=3
value=2,9
channel=2

[State 805]
type=PlaySnd
trigger1=AnimElem=3
value=0,1
channel=1

[State 805]
type=PlaySnd
trigger1=AnimElem=6
value=1,21
channel=0

[State 805, throw]
type=targetfacing
trigger1= time<=1
value=-1

[State 805, width]
type=width
trigger1= animelemtime(6)>=0 && animelemtime(8)<0
edge=90,0

[State 805, Bind 1]
type=targetbind
trigger1= numtarget && animelemtime(2)<0
pos=ceil(-24*const(size.xscale)),ceil(-58*const(size.yscale))

[State 805, Bind 2]
type=targetbind
trigger1= numtarget && animelemtime(2)>=0 && animelemtime(3)<0
pos=ceil(-42*const(size.xscale)),ceil(-81*const(size.yscale))

[State 805, Bind 3]
type=targetbind
trigger1= numtarget && animelemtime(3)>=0 && animelemtime(4)<0
pos=ceil(-38*const(size.xscale)),ceil(-81*const(size.yscale))

[State 805, Bind 4]
type=targetbind
trigger1= numtarget && animelemtime(4)>=0 && animelemtime(6)<0
pos=ceil(34*const(size.xscale)),ceil(-100*const(size.yscale))

[State 805, Bind 6]
type=targetbind
trigger1= numtarget && animelemtime(6)>=0 && animelemtime(7)<0
pos=ceil(82*const(size.xscale)),0

[State 805, damage]
type=targetlifeadd
trigger1= animelem=6
value=-80

[State 805, givepower]
type=targetpoweradd
trigger1= animelem=7
value=30

[State 805, getpower]
type=poweradd
trigger1= animelem=6
value=40

[State 805, throw]
type=targetstate
trigger1= animelem=7
value=811

[State 805, Snd]
type=playsnd
trigger1= numtarget && animelem=6
value=0,5101

[State 805, shake]
type=envshake
trigger1= numtarget && animelem=6
time=18
ampl=-6

[State 805, Dust]
type=explod
trigger1=animelem=6
anim=7012
sprpriority=3
postype=p1
pos=102,0
scale=1,1
pausemovetime=-1
supermovetime=-1
ownpal=1

[State 805, End]
type=changestate
trigger1= !animtime
value=0 
ctrl=1

;---------------------------------------
;GROUND THROW SHADOW SUPLEX P2 State
[Statedef 810]
type=S
movetype=H
physics=N
velset=0,0
sprpriority=0

[State 810, Anim]
type=changeanim2
trigger1= !time
value=810

[State 810, camera]
type=screenbound
trigger1= 1
value=0
movecamera=0,0

;---------------------------------------
;GROUND THROW SHADOW SUPLEX P2 Thrown State
[Statedef 811]
type=A
physics=N
movetype=H
ctrl=0
velset=0,0
sprpriority=0

[State 811, Vel]
type=velset
trigger1= !time
x=-4
y=-7.5

[State 811, grav]
type=veladd
trigger1= 1
y=.5

[State 811, recover]
type=changestate
trigger1= vel y>0 && alive
trigger1= command="recovery"
value=812

[State 811, End]
type=selfstate
trigger1= vel y>0 && pos y>=-10
value=5100

;---------------------------------------
;GROUND THROW SHADOW SUPLEX P2 Recovery State
[Statedef 812]
type=A
movetype=H
physics=N

[State 812, Vel]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 812, End]
type=selfstate
trigger1= vel y>0 && pos y>=0
value=5201

;---------------------------------------
;GROUND THROW KNEE GATLING
[Statedef 820]
type = S
movetype= A
physics = N
anim = 800
vel=0,0
poweradd = 50
ctrl = 0
facep2=1

[State 820]
type=PlaySnd
trigger1=AnimElem=2
value=0,0

[State 820]
type=PlaySnd
trigger1=AnimElem=3
value=2,5
channel=2

[State 820]
type=VelSet
trigger1=1
x=0
y=0

[State 820, Don't Guard]
type=attackdist
trigger1=1
value=0

[State 820]
type = turn
trigger1 = p2dist X <= -1
trigger1 = time = 0

[State 820]
type = HitDef
triggerall=var(20)!=20
trigger1=AnimElem=2
attr=S,NT
hitflag=M-
guardflag= 
damage=0
getpower=50
givepower=40
priority=1, Hit 
pausetime=0,6
;snap = -40, 0, 0
sparkno=S7014
guard.sparkno=S7018
sparkxy=-40,-85
hitsound = S800,0    
p1facing = ifelse (command = "holdfwd", 1, -1) 
p2facing = 1         
p1stateno = 821   
p2stateno = 824  
yaccel=.5
numhits=0           
fall = 1   
fall.damage = 0   
kill = 1
fall.kill = 1        

[State 820]
type = HitDef
triggerall=var(20)=20
trigger1=AnimElem=2
attr = S, NT
hitflag = M-
guardflag = 
damage = 0
getpower= 50
givepower= 40
priority = 1, Hit 
pausetime = 0,6
;snap = -40, 0, 0
sparkno=S7014
guard.sparkno=S7018
sparkxy=-40,-85
hitsound = S800,0    
p1facing = 1
p2facing = 1         
p1stateno = 821   
p2stateno = 824   
yaccel=.5
numhits=0          
fall = 1   
fall.damage = 0   
kill = 1
fall.kill = 1   

[State 820, Type]
type=statetypeset
trigger1= animelemtime(3)>=0
movetype=I

[State 820]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------
;GROUND THROW TECH HIT DECIDER
[Statedef 821]
type    = S
movetype= A
physics = N
velset = 0
anim = 801
ctrl = 0

[State 821]
type=VelSet
trigger1=1
x=0
y=0

[State 821]
type=TargetBind
trigger1 = time <= 6
pos=70,0
time=6

[State 821]
type = VarSet
triggerall = Time = [0,10]
trigger1 = target, command = "x" 
trigger2 = target, command = "y" 
trigger3 = target, command = "z" 
trigger4 = target, command = "recovery" 
var(32) = 1

[State 821]
type = targetstate
TriggerAll = Time = 6
trigger1 = var(32) = 0
value = 824

[State 821]
type = targetstate
TriggerAll = Time = 6
trigger1 = var(32) = 1
value = 897

[State 821, end]
type = changeState
triggerall = var(32) = 1
Trigger1 = Time = 6
value = 896
ctrl = 0

[State 821, end]
type = ChangeState
triggerall = var(32) = 0
Trigger1 = Time = 6
value = ifelse(command="holdfwd",822,830)
ctrl = 0

;---------------------------------------
;GROUND THROW KNEE GATLING P1 STATE
[Statedef 822]
type=S
physics=S
movetype=A
anim=822
ctrl=0
velset=0,0
sprpriority=1

[State 822, width]
type=width
trigger1= 1
edge=48,0

[State 822, End]
type=changestate
triggerall= (animelemtime(11)<0 || animelemtime(19)>=0) && hitcount>=1
trigger1= time>=(120+var(12)) || hitcount>=11
trigger2= numtarget
trigger2= !(target,alive)
trigger3= !numtarget
value=823 

[State 822, Anim]
type=changeanim
triggerall= anim=822 && animelemtime(24)<0
trigger1= command="a" || command="b" || command="c" || command="x" || command="y" || command="z"
trigger2= command="up" || command="down" || command="back" || command="fwd"
value=822
elem=animelemno(0)+1

[State 820, Anim]
type=changeanim
trigger1= anim=822 && animelemtime(24)<0
trigger1= animelemtime(animelemno(0))>=1
value=822
elem=animelemno(0)+1

[State 822, mashvar]
type=varset
trigger1= !time
var(12)=0

[State 822, mashvar]
type=varadd
trigger1= command="a" || command="b" || command="c" || command="x" || command="y" || command="z"
trigger2= command="up" || command="down" || command="back" || command="fwd"
var(12)=1

[State 822, mashvar]
type=varadd
triggerall= numtarget
trigger1= target,command="x" || target,command="y" || target,command="z"
trigger2= target,command="a" || target,command="b" || target,command="c"
trigger3= target,command="up" || target,command="down" || target,command="back" || target,command="fwd"
var(12)=-1

[State 822, flash]
type=palfx
triggerall= anim=822 && animelemtime(24)<0
trigger1= command="a" || command="b" || command="c" || command="x" || command="y" || command="z"
trigger2= command="up" || command="down" || command="back" || command="fwd"
time=1
add=32,32,32

[State 822, throw]
type=targetstate
trigger1= numtarget
value=ifelse((animelemtime(11)>=0 && animelemtime(19)<0),825,824)

[State 822, throw]
type=targetfacing
trigger1= numtarget
value=-1

[State 822, Bind]
type=targetbind
trigger1= numtarget
trigger1= target,stateno=824
pos=ceil(65*const(size.xscale)),0

[State 822, Bind]
type=targetbind
trigger1= numtarget
trigger1= target,stateno=825
pos=ceil(51*const(size.xscale)),ceil(-78*const(size.yscale))

[State 822, damage]
type=targetlifeadd
trigger1= numtarget && animelem=13 && !hitcount
value=ceil(ifelse(42*fvar(11)<7,-7,-42*fvar(11)))

[State 822, damage]
type=targetlifeadd
trigger1= numtarget && animelem=13 && hitcount
value=ceil(ifelse(14*fvar(11)<7,-7,-14*fvar(11)))

[State 822, Snd]
type=playsnd
trigger1= animelem=10
value=2,9
channel=2

[State 822, Snd]
type=playsnd
trigger1= animelem=10
value=0,2
channel=1

[State 822, Hit]
type=hitadd
trigger1= numtarget && animelem=13
value=1

[State 822, hitcount]
type=varadd
trigger1= numtarget && animelem=13
var(13)=1

[State 822, Snd]
type=playsnd
trigger1= numtarget && animelem=13
value=0,10

[State 820, Sparks]
type=explod
trigger1= numtarget && animelem=13
anim=7002
sprpriority=5
postype=p1
pos=ceil(53*const(size.xscale)),ceil(-69*const(size.yscale))
facing=-1
ownpal=1
pausemovetime=-1
supermovetime=-1
ignorehitpause=1

[State 822, shake]
type=envshake
trigger1= numtarget && animelem=13
time=14
ampl=4

;---------------------------------------
;GROUND THROW KNEE GATLING P1 STATE END
[Statedef 823]
type=S
physics=S
movetype=A
anim=823
ctrl=0
velset=0,0
sprpriority=1

[State 823, throw]
type=targetstate
trigger1= !time
value=826

[State 823, throw]
type=targetfacing
trigger1= time<=1
value=-1

[State 823, throw]
type=targetstate
trigger1= animelem=4
value=827

[State 823, width]
type=width
trigger1= 1
edge=48,0

[State 823, Bind 1]
type=targetbind
trigger1= numtarget && animelemtime(3)<0
pos=ceil(65*const(size.xscale)),0

[State 823, Bind 3]
type=targetbind
trigger1= numtarget && animelemtime(3)>=0 && animelemtime(4)<0
pos=ceil(88*const(size.xscale)),ceil(-95*const(size.yscale))

[State 823, Bind 4]
type=targetbind
trigger1= numtarget && animelem=4
pos=ceil(85*const(size.xscale)),ceil(-30*const(size.yscale))

[State 823, damage]
type=targetlifeadd
trigger1= numtarget && animelem=3
value=ceil(ifelse(14*fvar(11)<7,-7,-14*fvar(11)))

[State 823, givepower]
type=targetpoweradd
trigger1= numtarget && animelem=3
value=36

[State 823, getpower]
type=poweradd
trigger1= numtarget && animelem=3
value=72

[State 823, Snd]
type=playsnd
trigger1= animelem=2
value=2,9
channel=0

[State 823, Snd]
type=playsnd
trigger1= animelem=2
value=0,2
channel=1

[State 823, Hit]
type=hitadd
trigger1= numtarget && animelem=3
value=1

[State 823, Snd]
type=playsnd
trigger1= numtarget && animelem=3
value=0,6

[State 823, Sparks]
type=explod
trigger1= numtarget && animelem=3
anim=7002
sprpriority=5
postype=p1
pos=ceil(88*const(size.xscale)),ceil(-95*const(size.yscale))
facing=-1
ownpal=1
pausemovetime=-1
supermovetime=-1
ignorehitpause=1

[State 823, shake]
type=envshake
trigger1= numtarget && animelem=3
time=14
ampl=4

[State 823, End]
type=changestate
trigger1= !animtime
value=0 
ctrl=1

;---TARGET---
[Statedef 824]
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0
[State 824, Anim]
type=changeanim2
trigger1= !time
value=824
[State 824, camera]
type=screenbound
trigger1= 1
value=0
movecamera=0,0
[State 824, flash]
type=palfx
trigger1= command="a" || command="b" || command="c" || command="x" || command="y" || command="z"
trigger2= command="up" || command="down" || command="back" || command="fwd"
time=1
add=32,32,32

[Statedef 825]
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0
[State 825, Anim]
type=changeanim2
trigger1= !time
value=825
[State 825, camera]
type=screenbound
trigger1= 1
value=0
movecamera=0,0
[State 825, flash]
type=palfx
trigger1= command="a" || command="b" || command="c" || command="x" || command="y" || command="z"
trigger2= command="up" || command="down" || command="back" || command="fwd"
time=1
add=32,32,32

[Statedef 826]
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0
[State 826, Anim]
type=changeanim2
trigger1= !time
value=826
[State 826, camera]
type=screenbound
trigger1= 1
value=0
movecamera=0,0

[Statedef 827]
type=A
physics=N
movetype=H
ctrl=0
velset=0,0
sprpriority=0
[State 827, Anim]
type=changeanim
trigger1= !time
value=ifelse(selfanimexist(5035),5035,5030)
[State 827, Anim]
type=changeanim
trigger1= (anim=[5030,5035]) && !animtime
value=5050
[State 827, Vel]
type=velset
trigger1= time=2
x=-6.5
y=-5.85
[State 827, grav]
type=veladd
trigger1= time>=2
y=.5
[State 827, recover]
type=selfstate
trigger1= command="recovery"
trigger1= alive && time>=27
value=ifelse((pos y>=-20),5200,5210)
[State 827, End]
type=selfstate
trigger1= vel y>0 && pos y>=0
value=5100

;---------------------------------------
;GROUND THROW KNEE GATLING P1 PULL STATE
[Statedef 830]
type=S
movetype=A
physics=S
anim=830
ctrl=0
sprpriority=0

[State 830, throw]
type=targetstate
trigger1= !time && numtarget
value=831

[State 830, throw]
type=targetfacing
trigger1= !time && numtarget
value=-1

[State 830, width]
type=width
trigger1= 1
edge=24,24

[State 830, Turn]
type=turn
trigger1= animelem=3

[State 830, facing]
type=targetfacing
trigger1= 1
value=-1

[State 830, Bind 1]
type=targetbind
trigger1= animelemtime(2)<0
trigger2= animelemtime(5)>=0
pos=ceil(48*const(size.xscale)),0

[State 830, Bind 2]
type=targetbind
trigger1= animelemtime(2)>=0 && animelemtime(3)<0
trigger2= animelemtime(4)>=0 && animelemtime(5)<0
pos=ceil(24*const(size.xscale)),0

[State 830, Bind 3]
type=targetbind
trigger1= animelemtime(3)>=0 && animelemtime(4)<0
pos=0,0

[State 830, End]
type=changestate
trigger1= !numtarget
value=0
ctrl=1

[State 830, End]
type=changestate
trigger1= animelemtime(5)>=0
value=822

;---------------------------------------
;GROUND THROW KNEE GATLING P2 PULL STATE
[Statedef 831]
type=S
movetype=H
physics=N
velset=0,0
sprpriority=1
[State 831, nhb]
type=nothitby
trigger1= 1
value=SCA
time=1
[State 831, camera]
type=screenbound
trigger1= 1
value=0
movecamera=1,1
[State 831, Anim]
type=changeanim2
trigger1= !time
value=831
[State Safety]
type=selfstate
trigger1= time>=60
value= ifelse(pos y<0, 5040, 0)
ctrl=1

;---------------------------------------
;AIR THROW BACKBREAKER
[Statedef 850]
type = A
movetype= A
physics = N
anim = 850
sprpriority=1
poweradd = 50
ctrl = 0

[State 850]
type=PlaySnd
trigger1=AnimElem=2
value=0,0

[State 850]
type=PlaySnd
trigger1=AnimElem=3
value=2,5
channel=2

[State 850, Don't Guard]
type=attackdist
trigger1=1
value=0

[State 850]
type = turn
trigger1 = p2dist X <= -1
trigger1 = time = 0

[State 850]
type = HitDef
triggerall=var(20)!=20
trigger1=AnimElem=1
attr=A,NT
hitflag=AF
guardflag= 
damage=0
getpower=50
givepower=40
priority=1, Hit 
pausetime=0,6
;snap = -40, 0, 0
sparkno=S7014
guard.sparkno=S7018
sparkxy=-40,-85
hitsound = S800,0    
p1facing = 1 
p2facing = 1         
p1stateno = 851   
p2stateno = 860             
fall = 1   
fall.damage = 0   
kill = 1
fall.kill = 1        

[State 850]
type = HitDef
triggerall=var(20)=20
trigger1=AnimElem=1
attr = A, NT
hitflag =AF
guardflag = 
damage = 0
getpower= 50
givepower= 40
priority = 1, Hit 
pausetime = 0,6
;snap = -40, 0, 0
sparkno=S7014
guard.sparkno=S7018
sparkxy=-40,-85
hitsound = S800,0    
p1facing = 1
p2facing = 1         
p1stateno = 851   
p2stateno = 860             
fall = 1   
fall.damage = 0   
kill = 1
fall.kill = 1   

[State 850, Type]
type=statetypeset
trigger1= animelemtime(2)>=0
movetype=I

[State 850, grav]
type=gravity
trigger1= 1

[State 850, Land]
type=changestate
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------------
;AIR THROW TECH HIT DECIDER
[Statedef 851]
type    = A
movetype= A
physics = N
anim = 851
velset=ifelse(vel x>4,4,ifelse(vel x<-4,-4,vel x)),0
ctrl = 0

[State 851]
type=TargetBind
trigger1 = time <= 6
pos=70,-60
time=6

[State 851]
type = VarSet
triggerall = Time = [0,10]
trigger1 = target, command = "x" 
trigger2 = target, command = "y" 
trigger3 = target, command = "z" 
trigger4 = target, command = "recovery" 
var(32) = 1

[State 851]
type = targetstate
TriggerAll = Time = 6
trigger1 = var(32) = 0
value = 860

[State 851]
type = targetstate
TriggerAll = Time = 6
trigger1 = var(32) = 1
value = 897

[State 851, end]
type = changeState
triggerall = var(32) = 1
Trigger1 = Time = 6
value = 5850
ctrl = 0

[State 851, end]
type = ChangeState
triggerall = var(32) = 0
Trigger1 = Time = 6
value = 855
ctrl = 0

;---------------------------------------
; Air Throw Backbreaker P1 Air State
[Statedef 855]
type=A
physics=N
movetype=A
anim=855
ctrl=0
velset=ifelse(vel x>4,4,ifelse(vel x<-4,-4,vel x)),0
sprpriority=1

[State 855, throw]
type=targetstate
trigger1= !time && numtarget
value=860

[State 855, throw]
type=targetfacing
trigger1= time<=1
value=1

[State 855, Pos]
type=posset
trigger1= pos y>0 && animelemtime(2)<0
y=0

[State 855, Pos]
type=posfreeze
trigger1= animelemtime(2)<0
value=1

[State 855, Vel]
type=velset
trigger1= animelem=2
y=-1

[State 855, Vel]
type=veladd
trigger1= animelemtime(2)>=0
y=.5

[State 855, Bind]
type=targetbind
trigger1= numtarget
pos=ceil(4*const(size.xscale)),ceil(-113*const(size.yscale))

[State 855, Snd]
type=playsnd
trigger1= animelem=2
value=2,19
channel=2

[State 855, End]
type=changestate
trigger1= vel y>0 && pos y>=0
value=856

;---------------------------------------
; Air Throw Backbreaker P1 Ground State
[Statedef 856]
type=C
physics=N
movetype=A
anim=856
ctrl=0
velset=0,0
sprpriority=1

[State 856, throw]
type=targetstate
trigger1= numtarget && !time
value=861

[State 856, throw]
type=targetstate
trigger1= numtarget && animelem=2
value=862

[State 856, Pos]
type=posset
trigger1= !time
y=0

[State 856, Hit]
type=hitadd
trigger1= !time
value=1

[State 856, Snd]
type=playsnd
trigger1= !time
value=2,14
channel=2

[State 856, Snd]
type=playsnd
trigger1= !time
value=1,0
channel=0

[State 856]
type=Explod
anim=7010
trigger1=Time=0
postype=P1
pos=0,0
persistent=0
sprpriority=-2
pausemovetime=999
supermovetime=999

[State 856, Sparks]
type=explod
trigger1= !time
anim=7001
sprpriority=5
postype=p1
pos=ceil(3*const(size.xscale)),ceil(-64*const(size.yscale))
facing=-1
ownpal=1
pausemovetime=-1
supermovetime=-1
ignorehitpause=1

[State 856, shake]
type=envshake
trigger1= !time
time=14
ampl=-4

[State 856, Bind]
type=targetbind
trigger1= numtarget && animelemtime(2)<0
pos=ceil(3*const(size.xscale)),ceil(-48*const(size.yscale))

[State 856, damage]
type=targetlifeadd
trigger1= !time
value=-75

[State 856, givepower]
type=targetpoweradd
trigger1= !time
value=30

[State 856, getpower]
type=poweradd
trigger1= !time
value=45

[State 856, No Spam]
type=varset
trigger1=1
var(31)=60
ignorehitpause=1

[State 856, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;---------------------------------------
; Air Throw Backbreaker P2 Air State
[Statedef 860]
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0
[State 860, Anim]
type=changeanim2
trigger1= !time
value=860
[State 860, camera]
type=screenbound
trigger1= 1
value=0
movecamera=0,0

;---------------------------------------
; Air Throw Backbreaker P2 Air State
[Statedef 861]
type=A
physics=N
movetype=H
ctrl=0
velset=0,0
sprpriority=0
[State 861, Anim]
type=changeanim2
trigger1= !time
value=861
[State 861, camera]
type=screenbound
trigger1= 1
value=0
movecamera=0,0

;---------------------------------------
; Air Throw Backbreaker P2 Ground State
[Statedef 862]
type=A
physics=N
movetype=H
ctrl=0
velset=0,0
sprpriority=0

[State 862, Anim]
type=changeanim
trigger1= !time
value=ifelse(selfanimexist(5035),5035,5030)

[State 862, Anim]
type=changeanim
trigger1= (anim=[5030,5035]) && !animtime
value=5050

[State 862, Vel]
type=velset
trigger1= !time
x=3.88
y=-7.5

[State 862, grav]
type=veladd
trigger1= 1
y=.5

[State 862, recover]
type=selfstate
trigger1= command="recovery"
trigger1= alive && time>=18
value=ifelse((pos y>=-20),5200,5210)

[State 862, End]
type=selfstate
trigger1= vel y>0 && pos y>=0
value=5100

;---------------------------------
;P1 GROUND THROW TECH HIT STATE
[Statedef 896]
type    = S
movetype= I 
physics = S
anim = 5940
ctrl = 0

[State 896]
type=PosSet
trigger1=1 
y = 0

[State 896]
type = VelSet
trigger1 = time <= 10 
x = -8

[State 896]
type = VelSet
trigger1 = time = [11,24] 
x = -4

[State 896]
type = VelSet
trigger1 = time >=25 
x = 0

[State 896]
type = PlaySnd
trigger1 = time = 0
value = 2000,9
volume = 200
channel = 0

[State 896]
type = EnvShake
trigger1 = time = 0
time = 20
ampl = -5

[State 896]
type = Pause
trigger1 = (Time%2) = 0
trigger1 = Time <= 15
time = 2

[State 896]
type = PalFX
trigger1 = Time = 0
trigger2 = Time = 10
time = 2
add = 50,50,50
mul = 300,300,300

[State 896]
type = Explod
Anim = 7006
triggerall=facing=1
trigger1 = Time = 1
postype = P1
pos = 30,23
bindtime = 1
removeTime = 30
sprpriority = -3
ownpal = 1
pausemovetime=999
supermovetime=999

[State 896]
type = Explod
Anim = 17006
triggerall=facing=-1
trigger1 = Time = 1
postype = P1
pos = 30,23
bindtime = 1
removeTime = 30
sprpriority = -3
ownpal = 1
pausemovetime=999
supermovetime=999

[State 896]
type = VarSet
trigger1 = Time = 0
var(32) = 0

[State 896]
type=ChangeState
trigger1=Time=30
value=0
ctrl=1

;---------------------------------
;P2 GROUND THROWN TECH HIT STATE
[Statedef 897]
type    = S
movetype= I 
physics = S
ctrl = 0

[State 897]
type = VelSet
trigger1 = time <= 5 
x = -10

[State 897]
type = PosSet
trigger1 = time = 0 
y = 0

[State 897]
type = PalFX
trigger1 = Time = 0
trigger2 = Time = 10
time = 2
add = 50,50,50
mul = 300,300,300

[State 897]
type = changeanim
Trigger1 = Statetype=A
Trigger1 = selfanimexist(15948)
Trigger1 = time = 0
value = 15948

[State 897]
type = changeanim
Trigger1 = Statetype!=A
Trigger1 = selfanimexist(15945)
Trigger1 = time = 0
value = 15945

[State 898]
type = changeanim
Trigger1 = !selfanimexist(15945)
Trigger1 = Time = 0
value = 5007

[State 897]
type = VarSet
trigger1 = animtime = 0
v = 32
value = 0

[State 897]
type=SelfState
trigger1=Time=30
value=ifelse(Statetype=A,50,0)
ctrl=1

;---------------------------------
;P2 THROWN TECH HIT State
[Statedef 898]
type    = S
movetype= I 
physics = S
ctrl = 0

[State 898]
type = VelSet
trigger1 = time <= 5 
x = 10

[State 898]
type = PosSet
trigger1 = time = 0 
y = 0

[State 898]
type = PalFX
trigger1 = Time = 0
trigger2 = Time = 10
time = 2
add = 50,50,50
mul = 300,300,300

[State 898]
type = changeanim
Trigger1 = Statetype=A
Trigger1 = selfanimexist(15949)
Trigger1 = time = 0
value = 15949

[State 898]
type = changeanim
Trigger1 = Statetype!=A
Trigger1 = selfanimexist(15946)
Trigger1 = time = 0
value = 15946

[State 899]
type = changeanim2
Trigger1 = !selfanimexist(15946)
Trigger1 = Time = 0
value = 5947

[State 898]
type = VarSet
trigger1 = animtime = 0
v = 32
value = 0

[State 898]
type=SelfState
trigger1=Time=30
value=ifelse(Statetype=A,50,0)
ctrl=1

;==============================================================================================
;==============================================================================================
;                                           SPECIAL ATTACKS
;==============================================================================================
;==============================================================================================
;Shadow Boom
[Statedef 1000]
type=S
movetype=A
physics=S
anim=1000
velset=0,0
ctrl=0
poweradd=50
sprpriority=-1

[State 1000]
type=VarSet
trigger1=time=0
trigger1=Command="boom_l"||Command="boom_m"||Command="boom_h"
var(40)=ifelse(Command="boom_l",0,Ifelse(Command="boom_m",1,2))

[State 1000, No Spam]
type=varset
trigger1=time=1
var(31)=ifelse(var(40)=0,60,ifelse(var(40)=1,55,50))
ignorehitpause=1

[State 1000]
type=PlaySnd
trigger1=AnimElem=3
value=1,27
channel=1

[State 1000]
type=PlaySnd
trigger1=AnimElem=4
value=2,15
channel=2

[State 1000]
type=turn
trigger1=time=0
trigger1=P2bodydist X <= -10

[State 1000]
type=VelSet
trigger1=Time=0
X=0
Y=0

[State 1000]
type=PosSet
trigger1=1
y=0

[State 1000]
type=width
trigger1=Time=[0,6]
value=40,0

[State 1000, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 1000]
type=Explod
Anim=6000
trigger1=time=4
postype=P1
pos=6,-26
;removetime=19
bindtime=-1
removeongethit=1
sprpriority=5
ownpal=1
scale=1.1,1.1
persistent=0
pausemovetime=999
supermovetime=999

[State 1000]
type=Helper
trigger1=AnimElem=4,=4
name="shadow boom"
pos=78,-26
postype=P1
stateno=1001
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=0
ID=ifelse(var(40)=0,1000,ifelse(var(40)=1,1001,1002))

[State 1000]
type=StateTypeSet
trigger1=animelem=13
statetype=S      
movetype=I        
physics=S

[State 1000]
type=varset
triggerall=time>=15&&var(25)=0
trigger1=enemy,movetype=H
var(25)=1

[State 1000]
type=VarSet
trigger1=time=0&&var(25)=1
var(25)=2

[State 1000]
type = ChangeState
triggerall = var(20) = 20
triggerall = p2dist X <= 100
triggerall = p2life != 0
triggerall = p2stateno=[5000,5999]
triggerall = ifelse(var(23)=23,power>=1000,power>=ifelse(life>=500,2000,1000))
trigger1=AnimElem=12,=0
value = ifelse(P2statetype=A,3000,ifelse(random>=500,3100,3000))
ctrl = 0

[State 1000]
type=ChangeState
trigger1=Animtime=0
value=0
ctrl=1

;---------------------------------
;Shadow Boom Boomerange Animations
[Statedef 1001]
type=A
movetype=A
physics=N
ctrl=0
anim=6001
velset=0,0
sprpriority=4

[State 1001]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 1001]
type=VelSet
trigger1=Ishelper(1000)
trigger1=time=0
x=3
y=0

[State 1001]
type=VelSet
trigger1=Ishelper(1001)
trigger1=time=0
x=4.3
y=0

[State 1001]
type=VelSet
trigger1=Ishelper(1002)
trigger1=time=0
x=5.5
y=0

[State 1001]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1002
ignorehitpause=1

[State 1001]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1001]
type=HitDef
triggerall=Ishelper(1000)>=1
trigger1=1
attr=S,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(26)=2,25,50),5
getpower=0,15
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=4,ifelse(P2bodydist x<=100,8,4)
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=14
ground.hittime=14
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-2.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=1000

[State 1001]
type=HitDef
triggerall=Ishelper(1001)>=1
trigger1=1
attr=S,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(26)=2,30,65),5
getpower=0,15
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=4,ifelse(P2bodydist x<=100,8,4)
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=17
ground.hittime=17
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-2.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=1001

[State 1001]
type=HitDef
triggerall=Ishelper(1002)>=1
trigger1=1
attr=S,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(26)=2,40,75),5
getpower=0,15
givepower=15,8
priority=7,Hit
guardflag=MA
hitflag=MAF
pausetime=4,ifelse(P2bodydist x<=100,8,4)
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=20
ground.hittime=20
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-2.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=1002

[State 1001]
type=null;Explod
Anim=16000
trigger1=movehit&&numtarget
trigger1=!(target,time)&&target,movetype=H
postype=left
pos=ceil((target,pos x)-((target,const(size.ground.front)+10)*facing)+160),ceil(screenpos y)+10
sprpriority=4
removetime=-2
ownpal=1
facing=ifelse(facing=-1,-1,1)
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=0
scale=.7,.7

[State 1001]
type=changestate
trigger1=movecontact
value=1002
ignorehitpause=1

[State 1001]
type=null;changestate
trigger1=movecontact&&numhelper<=0
value=1003

[State 1001, End]
type=destroyself
trigger1=pos x!=[-200,200]
trigger2=frontedgedist<-120||backedgedist<-120

;---------------------------------
;Shadow Boom Destroy Animations
[Statedef 1002]
type = A
movetype = A
physics = N
ctrl = 0
anim=6002
velset=0,0
sprpriority=3
movehitpersist=1

[State 1002]
type =AssertSpecial
trigger1=1
flag =noshadow

[State 1002]
type = DestroySelf
trigger1=animtime=0

;---------------------------------
;Air Shadow Boom
[Statedef 1010]
type=A
movetype=A
physics=N
anim=1010
velset=0,0
ctrl=0
poweradd=50
sprpriority=0

[State 1010]
type=VarSet
trigger1=time=0
trigger1=Command="boom_l"||Command="boom_m"||Command="boom_h"
var(40)=ifelse(Command="boom_l",0,Ifelse(Command="boom_m",1,2))

[State 1010, No Spam]
type=null;varset
trigger1=time=1
var(31)=ifelse(var(40)=0,60,ifelse(var(40)=1,55,50))
ignorehitpause=1

[State 1010]
type=PlaySnd
trigger1=AnimElem=2
value=1,27
channel=1

[State 1010]
type=PlaySnd
trigger1=AnimElem=3
value=2,15
channel=2

[State 1010]
type=turn
trigger1=time=0
trigger1=P2bodydist X <= -10

[State 1010]
type=VelSet
trigger1=time<=18
X=0
Y=0

[State 1010]
type=Statetypeset
trigger1=time>=19
physics=A

[State 1010]
type=Gravity
trigger1=time>=19

[State 1010, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= 1
fvar(5)= 0

[State 1010]
type=Helper
trigger1=AnimElem=4,=1
name="air shadow boom"
pos=48,5
postype=P1
stateno=1011
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=0
ID=ifelse(var(40)=0,1010,ifelse(var(40)=1,1011,1012))

[State 1010]
type=StateTypeSet
trigger1=animelem=5      
movetype=I        

[State 1010]
type=ctrlset
trigger1=animelem=8
value=1

[State 1010]
type=varset
triggerall=time>=15&&var(25)=0
trigger1=enemy,movetype=H
var(25)=1

[State 1010]
type=VarSet
trigger1=time=0&&var(25)=1
var(25)=2

[State 1010]
type =null; ChangeState
triggerall = var(20) = 20
triggerall = p2dist X <= 100
triggerall = p2life != 0
triggerall = p2stateno=[5000,5999]
triggerall = ifelse(var(23)=23,power>=1000,power>=ifelse(life>=500,2000,1000))
trigger1=AnimElem=12,=0
value = ifelse(P2statetype=A,3000,ifelse(random>=500,3100,3000))
ctrl = 0

[State 1010]
type=ChangeState
trigger1=Pos Y>=0
value=52
ctrl=0

;---------------------------------
;Shadow Boom Boomerange Animations
[Statedef 1011]
type=A
movetype=A
physics=N
ctrl=0
anim=6003
velset=0,0
sprpriority=4

[State 1011]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 1011]
type=VelSet
trigger1=Ishelper(1010)
trigger1=time=0
x=3
y=2.2

[State 1011]
type=VelSet
trigger1=Ishelper(1011)
trigger1=time=0
x=4.3
y=3

[State 1011]
type=VelSet
trigger1=Ishelper(1012)
trigger1=time=0
x=5.5
y=4

[State 1011]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1012
ignorehitpause=1

[State 1011]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1011]
type=HitDef
triggerall=Ishelper(1010)>=1
trigger1=1
attr=A,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(26)=2,25,50),5
getpower=0,15
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=4,ifelse(P2bodydist x<=100,8,4)
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=14
ground.hittime=14
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-2.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=1010

[State 1011]
type=HitDef
triggerall=Ishelper(1011)>=1
trigger1=1
attr=A,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(26)=2,30,65),5
getpower=0,15
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=4,ifelse(P2bodydist x<=100,8,4)
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=17
ground.hittime=17
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-2.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=1011

[State 1011]
type=HitDef
triggerall=Ishelper(1012)>=1
trigger1=1
attr=A,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(26)=2,40,75),5
getpower=0,15
givepower=15,8
priority=7,Hit
guardflag=MA
hitflag=MAF
pausetime=4,ifelse(P2bodydist x<=100,8,4)
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=20
ground.hittime=20
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-2.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=1012

[State 1011]
type=null;Explod
Anim=16000
trigger1=movehit&&numtarget
trigger1=!(target,time)&&target,movetype=H
postype=left
pos=ceil((target,pos x)-((target,const(size.ground.front)+10)*facing)+160),ceil(screenpos y)+10
sprpriority=4
removetime=-2
ownpal=1
facing=ifelse(facing=-1,-1,1)
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=0
scale=.7,.7

[State 1011]
type=changestate
trigger1=movecontact
value=1012
ignorehitpause=1

[State 1011]
type=changestate
trigger1=pos Y >=40
value=1013

[State 1011, End]
type=destroyself
trigger1=pos x!=[-200,200]
trigger2=frontedgedist<-120||backedgedist<-120

;---------------------------------
;Shadow Boom Destroy Animations
[Statedef 1012]
type = A
movetype = A
physics = N
ctrl = 0
anim=6004;ifelse(movehit,6004,7004)
velset=0,0
sprpriority=3
movehitpersist=1

[State 1012]
type =AssertSpecial
trigger1=1
flag =noshadow

[State 1012]
type = DestroySelf
trigger1=animtime=0

;---------------------------------
;Shadow Boom Destroy Animations
[Statedef 1013]
type = A
movetype = A
physics = N
ctrl = 0
anim=6004
velset = 0,0
sprpriority = 4
movehitpersist=1

[State 1013]
type=posadd
trigger1=time=0
x=20
y=20

[State 1013]
type=playsnd
trigger1 = animelem=1
value=1,25
ignorehitpause=1
persistent=0

[State 1013]
type =AssertSpecial
trigger1=1
flag =noshadow

[State 1013]
type = DestroySelf
trigger1=animtime=0

;---------------------------------
;Shadow Blade Light
[Statedef 1100]
type=S
movetype=A
physics=N
anim=1100
velset=0,0
juggle=ifelse((p2movetype=H&&p2statetype=A),10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1100]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1100]
type=playsnd
trigger1 = animelem=4
value=1,6

[State 1100, nothitby]
type=nothitby
trigger1= time<=6
value=SCA
time=1
ignorehitpause=1

[State 1100, grav]
type=veladd
trigger1= animelemtime(5)>=0
trigger1= animelemtime(8)<=0
y=.5

[State 1100, grav]
type=veladd
trigger1= animelemtime(10)>=0
y=.6

[State 1100, Vel]
type=velset
trigger1= animelem=5
x=2
y=-10.6

[State 1100, Vel]
type=velset
trigger1= animelem=9
x=2.3

[State 1100]
type=Explod
Anim=6005
trigger1=animelem=5
postype=P1
pos=77,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=5.5,-7.5
persistent=0
pausemovetime=999
supermovetime=999

[State 1100]
type=Helper
trigger1=Animelem=5
stateno=1105
id=1100
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1100]
type=HitDef
trigger1=Animelem=4
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=0,-58
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=10
ground.hittime =30
ground.velocity=-2.5,-11
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=0,-10
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
kill=0
fall=0
air.fall=0
fall.recover=1
fall.recovertime=30 
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
ID=1100

[State 1100]
type=Varset
triggerall=time=[7,8]
trigger1=movehit
trigger2=numtarget
var(22)=1
ignorehitpause=1

[State 1100]
type=HitDef
triggerall=var(22)=1
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =30
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-14
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1100]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype!=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=24
ground.hittime =24
ground.velocity=-10
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-10
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1100]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-14
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1100]
type=Varset
triggerall=time>=9
triggerall=var(22)=0
triggerall=p2statetype=A
trigger1=movehit
trigger2=numtarget
var(22)=2
ignorehitpause=1

[State 1100]
type=HitDef
triggerall=var(22)=2
trigger1=P2statetype=A
trigger1=Animelem=6
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =30
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-14
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1100]
type=StateTypeSet
trigger1=animelem=6
statetype=A              
physics=A

[State 1100, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1100, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Shadow Blade Medium
[Statedef 1101]
type=S
movetype=A
physics=N
anim=1101
velset=0,0
juggle=ifelse((p2movetype=H&&p2statetype=A),10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1101]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1101]
type=playsnd
trigger1 = animelem=4
value=1,6

[State 1101, nothitby]
type=nothitby
trigger1= time<=6
value=SCA
time=1
ignorehitpause=1

[State 1101, grav]
type=veladd
trigger1= animelemtime(5)>=0
trigger1= animelemtime(8)<=0
y=.6

[State 1101, grav]
type=veladd
trigger1= animelemtime(10)>=0
y=.6

[State 1101, Vel]
type=velset
trigger1= animelem=5
x=2.8
y=-12.6

[State 1101, Vel]
type=velset
trigger1= animelem=9
x=2.8

[State 1101]
type=null;Explod
Anim=6007
trigger1=animelem=4
postype=P1
pos=38,-13
bindtime=-1
removeongethit=1
sprpriority=3
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 1101]
type=Explod
Anim=6005
trigger1=animelem=5
postype=P1
pos=77,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=7,-10.5
persistent=0
pausemovetime=999
supermovetime=999

[State 1101]
type=Helper
trigger1=Animelem=4
stateno=1105
id=1100
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1101]
type=HitDef
trigger1=Animelem=4
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=0,-78
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2.5,-11
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=0,-10
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=30 
kill=0
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
ID=1101

[State 1101]
type=Varset
triggerall=time=[7,8]
trigger1=movehit
trigger2=numtarget
var(22)=1
ignorehitpause=1

[State 1101]
type=HitDef
triggerall=var(22)=1
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=35
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=14
ground.hittime =16
ground.velocity=-9
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,-16
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1101]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype!=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=35
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=26
ground.hittime =26
ground.velocity=-16
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,-16
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1101]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=35
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-16
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1101]
type=Varset
triggerall=time>=9
triggerall=var(22)=0
triggerall=p2statetype=A
trigger1=movehit
trigger2=numtarget
var(22)=2
ignorehitpause=1

[State 1101]
type=HitDef
triggerall=var(22)=2
trigger1=P2statetype=A
trigger1=Animelem=6
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,-16
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1101]
type=StateTypeSet
trigger1=animelem=6
statetype=A              
physics=A

[State 1101, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1101, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Shadow Blade Heavy
[Statedef 1102]
type=S
movetype=A
physics=N
anim=1102
velset=0,0
juggle=ifelse((p2movetype=H&&p2statetype=A),10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1102]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1102]
type=playsnd
trigger1 = animelem=4
value=1,6

[State 1102, nothitby]
type=nothitby
trigger1= time<=6
value=SCA
time=1
ignorehitpause=1

[State 1102, grav]
type=veladd
trigger1= animelemtime(5)>=0
trigger1= animelemtime(8)<=0
y=.6

[State 1102, grav]
type=veladd
trigger1= animelemtime(10)>=0
y=.6

[State 1102, Vel]
type=velset
trigger1= animelem=5
x=3
y=-14.6

[State 1102, Vel]
type=velset
trigger1= animelem=9
x=3.3

[State 1102]
type=null;Explod
Anim=6007
trigger1=animelem=4
postype=P1
pos=38,-13
bindtime=-1
removeongethit=1
sprpriority=3
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 1102]
type=Explod
Anim=6005
trigger1=animelem=5
postype=P1
pos=77,-19
bindtime=1
removetime=60
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
vel=7,-12.5
persistent=0
pausemovetime=999
supermovetime=999

[State 1102]
type=Helper
trigger1=Animelem=4
stateno=1105
id=1100
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1102]
type=HitDef
trigger1=Animelem=4
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=0,-78
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2.5,-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=0,-10
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=28 
kill=0
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
ID=1102

[State 1102]
type=Varset
triggerall=time=[7,8]
trigger1=movehit
trigger2=numtarget
var(22)=1
ignorehitpause=1

[State 1102]
type=HitDef
triggerall=var(22)=1
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=45
animtype=hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,3
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-10
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1102]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype!=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=45
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=28
ground.hittime =28
ground.velocity=-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1102]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=45
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1102]
type=HitDef
triggerall=var(22)=1
;trigger1=P2statetype=A
trigger1=Animelem=7
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=4,4
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1102]
type=StateTypeSet
trigger1=animelem=8
statetype=A              
physics=A

[State 1102, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1102, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Shadow Blade - Helper Projectile Cancel
[Statedef 1105]
type=A
movetype=A
physics=N
sprpriority=5
ctrl=0

[State 1105]
type=changeanim
trigger1=!time&&!prevstateno
value=1105

[State 1105]
type=BindToparent
trigger1=1

[State 1105]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1105
ignorehitpause=1

[State 1105]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1105]
type=DestroySelf
trigger1=Parent, Stateno=1100
trigger1=time>=16
trigger2=Parent, Stateno=1101
trigger2=time>=14
trigger3=Parent, Stateno=1102
trigger3=time>=14
trigger4=Parent, Stateno!=[1100,1102]
trigger5=animtime=0

;---------------------------------
;Air Shadow Blade Light
[Statedef 1150]
type=A
movetype=A
physics=N
anim=1150
velset=0,0
juggle=ifelse(Var(30)=2,10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1150]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1150]
type=playsnd
trigger1 = animelem=4
value=1,6

[State 1150, nothitby]
type=nothitby
trigger1= time<=6
value=SCA
time=1
ignorehitpause=1

[State 1150, grav]
type=veladd
trigger1= animelemtime(5)>=0
trigger1= animelemtime(8)<=0
y=.5

[State 1150, grav]
type=veladd
trigger1= animelemtime(10)>=0
y=.6

[State 1150, Vel]
type=velset
trigger1= animelem=5
x=2
y=-10.6

[State 1150, Vel]
type=velset
trigger1= animelem=9
x=2.3

[State 1150]
type=Explod
Anim=6005
trigger1=animelem=5
postype=P1
pos=77,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=5.5,-7.5
persistent=0
pausemovetime=999
supermovetime=999

[State 1150]
type=Helper
trigger1=Animelem=5
stateno=1105
id=1100
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1150]
type=HitDef
trigger1=Animelem=4
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=0,-58
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=10
ground.hittime =30
ground.velocity=-2.5,-11
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=0,-10
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
kill=0
fall=0
air.fall=0
fall.recover=1
fall.recovertime=30 
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
ID=1150

[State 1150]
type=Varset
triggerall=time=[7,8]
trigger1=movehit
trigger2=numtarget
var(22)=1
ignorehitpause=1

[State 1150]
type=HitDef
triggerall=var(22)=1
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =30
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-14
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1150]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype!=A
trigger1=Animelem=5
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=24
ground.hittime =24
ground.velocity=-10
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-10
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=12
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1150]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-14
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1150]
type=Varset
triggerall=time>=9
triggerall=var(22)=0
triggerall=p2statetype=A
trigger1=movehit
trigger2=numtarget
var(22)=2
ignorehitpause=1

[State 1150]
type=HitDef
triggerall=var(22)=2
trigger1=P2statetype=A
trigger1=Animelem=6
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =30
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-5,-14
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1150]
type=StateTypeSet
trigger1=animelem=6
statetype=A              
physics=A

[State 1150, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1150, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Air Shadow Blade Medium
[Statedef 1151]
type=S
movetype=A
physics=N
anim=1151
velset=0,0
juggle=ifelse(Var(30)=2,10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1151]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1151]
type=playsnd
trigger1 = animelem=4
value=1,6

[State 1151, nothitby]
type=nothitby
trigger1= time<=6
value=SCA
time=1
ignorehitpause=1

[State 1151, grav]
type=veladd
trigger1= animelemtime(5)>=0
trigger1= animelemtime(8)<=0
y=.6

[State 1151, grav]
type=veladd
trigger1= animelemtime(10)>=0
y=.6

[State 1151, Vel]
type=velset
trigger1= animelem=5
x=2.8
y=-12.6

[State 1151, Vel]
type=velset
trigger1= animelem=9
x=2.8

[State 1151]
type=null;Explod
Anim=6007
trigger1=animelem=4
postype=P1
pos=38,-13
bindtime=-1
removeongethit=1
sprpriority=3
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 1151]
type=Explod
Anim=6005
trigger1=animelem=5
postype=P1
pos=77,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=7,-10.5
persistent=0
pausemovetime=999
supermovetime=999

[State 1151]
type=Helper
trigger1=Animelem=4
stateno=1105
id=1100
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1151]
type=HitDef
trigger1=Animelem=4
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=0,-78
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2.5,-11
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=0,-10
air.hittime=30
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=30 
kill=0
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
ID=1151

[State 1151]
type=Varset
triggerall=time=[7,8]
trigger1=movehit
trigger2=numtarget
var(22)=1
ignorehitpause=1

[State 1151]
type=HitDef
triggerall=var(22)=1
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=35
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=14
ground.hittime =16
ground.velocity=-9
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,-16
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1151]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype!=A
trigger1=Animelem=5
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=35
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=26
ground.hittime =26
ground.velocity=-16
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,-16
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1151]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=35
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-16
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1151]
type=Varset
triggerall=time>=9
triggerall=var(22)=0
triggerall=p2statetype=A
trigger1=movehit
trigger2=numtarget
var(22)=2
ignorehitpause=1

[State 1151]
type=HitDef
triggerall=var(22)=2
trigger1=P2statetype=A
trigger1=Animelem=6
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,-16
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1151]
type=StateTypeSet
trigger1=animelem=6
statetype=A              
physics=A

[State 1151, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1151, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Air Shadow Blade Heavy
[Statedef 1152]
type=S
movetype=A
physics=N
anim=1152
velset=0,0
juggle=ifelse(Var(30)=2,10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1152]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1152]
type=playsnd
trigger1 = animelem=4
value=1,6

[State 1152, nothitby]
type=nothitby
trigger1= time<=6
value=SCA
time=1
ignorehitpause=1

[State 1152, grav]
type=veladd
trigger1= animelemtime(5)>=0
trigger1= animelemtime(8)<=0
y=.6

[State 1152, grav]
type=veladd
trigger1= animelemtime(10)>=0
y=.6

[State 1152, Vel]
type=velset
trigger1= animelem=5
x=3
y=-14.6

[State 1152, Vel]
type=velset
trigger1= animelem=9
x=3.3

[State 1152]
type=null;Explod
Anim=6007
trigger1=animelem=4
postype=P1
pos=38,-13
bindtime=-1
removeongethit=1
sprpriority=3
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 1152]
type=Explod
Anim=6005
trigger1=animelem=5
postype=P1
pos=77,-19
bindtime=1
removetime=60
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
vel=7,-12.5
persistent=0
pausemovetime=999
supermovetime=999

[State 1152]
type=Helper
trigger1=Animelem=4
stateno=1105
id=1100
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1152]
type=HitDef
trigger1=Animelem=4
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=0,-78
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2.5,-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=0,-10
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=28 
kill=0
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
ID=1152

[State 1152]
type=Varset
triggerall=time=[7,8]
trigger1=movehit
trigger2=numtarget
var(22)=1
ignorehitpause=1

[State 1152]
type=HitDef
triggerall=var(22)=1
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=45
animtype=hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,3
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-10
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1152]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype!=A
trigger1=Animelem=5
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=45
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=28
ground.hittime =28
ground.velocity=-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1152]
type=HitDef
triggerall=var(22)=0
trigger1=P2statetype=A
trigger1=Animelem=5
priority=5,Hit
attr=S,SA
guardflag=MA
hitflag=MAF
damage=45
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=0,6
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1152]
type=HitDef
triggerall=var(22)=1
;trigger1=P2statetype=A
trigger1=Animelem=7
priority=5,Hit
attr=A,SA
guardflag=MA
hitflag=MAF
damage=25
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=4,4
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 1152]
type=StateTypeSet
trigger1=animelem=8
statetype=A              
physics=A

[State 1152, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1152, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Shadow Slice Light
[Statedef 1200]
type=A
movetype=A
physics=N
anim=1200
velset=0,0
juggle=ifelse((p2movetype=H&&p2statetype=A),10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1200]
type=changestate
trigger1=Time=0&&var(20)=20
trigger1=pos Y >=0
value=1250

[State 1200]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1200]
type=playsnd
trigger1 = animelem=4
value=0,0

[State 1200, Vel]
type=velset
trigger1= animelem<=3
x=0
y=0

[State 1200, Vel]
type=velset
trigger1= animelem=4
x=3.3
y=0

[State 1200, Vel]
type=velset
trigger1= animelem>=5
x=3.3
y=6

[State 1200, Vel]
type=velset
trigger1= animelem>=9
x=2.3
y=6

[State 1200, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 1200]
type=Helper
trigger1=Animelem=5
stateno=1205
id=1200
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1200]
type=HitDef
trigger1=Time=0
priority=5,Hit
attr=A,SA
guardflag=HA
hitflag=MAF
damage=60
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=Trip
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-25
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-2,8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,10
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
down.bounce =1
fall=1
air.fall=1
fall.recover=0
;fall.recovertime=12 

[State 1200]
type=StateTypeSet
trigger1=animelem=5              
physics=A

[State 1200, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1200, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Shadow Slice Medium
[Statedef 1201]
type=A
movetype=A
physics=N
anim=1201
velset=0,0
juggle=ifelse((p2movetype=H&&p2statetype=A),10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1201]
type=changestate
trigger1=Time=0&&var(20)=20
trigger1=pos Y >=0
value=1251

[State 1201]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1201]
type=playsnd
trigger1 = animelem=4
value=0,0

[State 1201, Vel]
type=velset
trigger1= animelem<=3
x=0
y=0

[State 1201, Vel]
type=velset
trigger1= animelem=4
x=10.3
y=0

[State 1201, Vel]
type=velset
trigger1= animelem>=5
x=5.3
y=6

[State 1201, Vel]
type=velset
trigger1= animelem>=9
x=3.3
y=6

[State 1201, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 1201]
type=Helper
trigger1=Animelem=5
stateno=1205
id=1200
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1201]
type=HitDef
trigger1=Time=0
priority=5,Hit
attr=A,SA
guardflag=HA
hitflag=MAF
damage=75
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=Trip
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-25
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-2,8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,10
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
down.bounce =1
fall=1
air.fall=1
fall.recover=0
;fall.recovertime=12 

[State 1201]
type=StateTypeSet
trigger1=animelem=5             
physics=A

[State 1201, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1201, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Shadow Slice Heavy
[Statedef 1202]
type=A
movetype=A
physics=N
anim=1202
velset=0,0
juggle=ifelse((p2movetype=H&&p2statetype=A),10,0)
ctrl=0
poweradd=50
sprpriority=0

[State 1202]
type=changestate
trigger1=Time=0&&var(20)=20
trigger1=pos Y >=0
value=1252

[State 1202]
type=playsnd
trigger1 = animelem=3
value=2,15

[State 1202]
type=playsnd
trigger1 = animelem=4
value=0,0

[State 1202, Vel]
type=velset
trigger1= animelem<=3
x=0
y=0

[State 1202, Vel]
type=velset
trigger1= animelem=4
x=12.3
y=0

[State 1202, Vel]
type=velset
trigger1= animelem>=5
x=7.3
y=6

[State 1202, Vel]
type=velset
trigger1= animelem>=9
x=5.3
y=6

[State 1202, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 1202]
type=Helper
trigger1=Animelem=5
stateno=1205
id=1200
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1202]
type=HitDef
trigger1=Time=0
priority=5,Hit
attr=A,SA
guardflag=HA
hitflag=MAF
damage=90
animtype=Heavy
air.animtype=Back
fall.animtype=Back
ground.type=Trip
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-25
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-2,8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,10
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
down.bounce =1
fall=1
air.fall=1
fall.recover=0
;fall.recovertime=12 

[State 1202]
type=StateTypeSet
trigger1=animelem=5              
physics=A

[State 1202, statetype]
type=statetypeset
trigger1=animelemtime(8)>=0
movetype=I

[State 1202, End]
type=changestate
trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Shadow Slice - Helper Projectile Cancel
[Statedef 1205]
type=A
movetype=A
physics=N
sprpriority=5
ctrl=0

[State 1205]
type=changeanim
trigger1=!time&&!prevstateno
value=1205

[State 1205]
type=BindToparent
trigger1=1

[State 1205]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1205
ignorehitpause=1

[State 1205]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1205]
type=DestroySelf
trigger1=Parent, Stateno=[1200,1202]
trigger1=time>=19
trigger2=Parent, Stateno!=[1200,1202]
trigger3=animtime=0

;---------------------------------
;Shadow Slice Light
[Statedef 1250]
type=A
movetype=A
physics=A
anim=1250
velset=0,0
ctrl=0
poweradd=50
sprpriority=0

[State 1250]
type=playsnd
trigger1 = animelem=4
value=2,15

[State 1250]
type=playsnd
trigger1 = animelem=5
value=0,0

[State 1250, grav]
type=gravity
trigger1=animelemtime(1)>1

[State 1250, vel]
type=velset
trigger1=animelem=1
x=4
y=-8

[State 1250, vel]
type=velset
trigger1=animelem=5
x=3
y=-1

[State 1250, vel]
type=velset
trigger1=animelem=6
x=2
y=4

[State 1250, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 1250]
type=Helper
trigger1=Animelem=7
stateno=1255
id=1250
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1250]
type=HitDef
trigger1=Time=0
priority=5,Hit
attr=A,SA
guardflag=HA
hitflag=MAF
damage=60
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=ifelse(p2statetype!=A,8,9),10
guard.pausetime=8,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-25
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,10
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
down.bounce =1
fall=0
air.fall=1
fall.recover=0
;fall.recovertime=12 

[State 1250, statetype]
type=statetypeset
trigger1=animelemtime(10)>=0
movetype=I

[State 1250, End]
type=changestate
trigger1=animelem>=3
trigger1= vel y>0 && pos y>=-20
value=52

;---------------------------------
;Shadow Slice Medium
[Statedef 1251]
type=A
movetype=A
physics=A
anim=1251
velset=0,0
ctrl=0
poweradd=50
sprpriority=0

[State 1251]
type=playsnd
trigger1 = animelem=4
value=2,15

[State 1251]
type=playsnd
trigger1 = animelem=5
value=0,0

[State 1251, vel]
type=velset
trigger1=animelem=1
x=6
y=-8

[State 1251, vel]
type=velset
trigger1=animelem=5
x=6
y=-1

[State 1251, vel]
type=velset
trigger1=animelem=6
x=5
y=4

[State 1251, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 1251]
type=Helper
trigger1=Animelem=7
stateno=1255
id=1250
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1251]
type=HitDef
trigger1=Time=0
priority=5,Hit
attr=A,SA
guardflag=HA
hitflag=MAF
damage=70
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=ifelse(p2statetype!=A,8,9),10
guard.pausetime=8,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-25
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-1.5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,10
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
down.bounce =1
fall=0
air.fall=1
fall.recover=0
;fall.recovertime=12 

[State 1251, statetype]
type=statetypeset
trigger1=animelemtime(10)>=0
movetype=I

[State 1251, End]
type=changestate
trigger1=animelem>=3
trigger1= vel y>0 && pos y>=-20
value=52

;---------------------------------
;Shadow Slice Heavy
[Statedef 1252]
type=A
movetype=A
physics=A
anim=1252
velset=0,0
ctrl=0
poweradd=50
sprpriority=0

[State 1252]
type=changestate
trigger1=var(20)=20&&time=0
trigger1=p2bodydist x < 150
value=ifelse(p2bodydist x<=75,1250,1251)

[State 1252]
type=playsnd
trigger1 = animelem=4
value=2,15

[State 1252]
type=playsnd
trigger1 = animelem=5
value=0,0

[State 1252, vel]
type=velset
trigger1=animelem=1
x=9
y=-8.5

[State 1252, vel]
type=velset
trigger1=animelem=5
x=7
y=-1

[State 1252, vel]
type=velset
trigger1=animelem=6
x=5
y=4

[State 1252, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 1252]
type=Helper
trigger1=Animelem=7
stateno=1255
id=1250
helpertype=Normal
name="projectile cancel"
postype=p1
pos=0,0
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 1252]
type=HitDef
trigger1=Time=0
priority=5,Hit
attr=A,SA
guardflag=HA
hitflag=MAF
damage=80
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=10,5
givepower=11,8 
pausetime=ifelse(p2statetype!=A,8,9),10
guard.pausetime=8,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=-10,-25
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-2
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-6,10
air.hittime=12
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
down.bounce =1
fall=0
air.fall=1
fall.recover=0
;fall.recovertime=12 

[State 1252, statetype]
type=statetypeset
trigger1=animelemtime(10)>=0
movetype=I

[State 1252, End]
type=changestate
trigger1=animelem>=3
trigger1= vel y>0 && pos y>=-20
value=52

;---------------------------------
;Shadow Slice Land
[Statedef 1253]
type    = S
physics = S
ctrl = 0
anim = 47

[State 1253]
type=PlaySnd
trigger1=Time=0
value=0,15

[State 1253]
type = VelSet
trigger1 = Time = 0
x=.83
y=0

[State 1253]
type = VelSet
trigger1 = AnimTime = 0
x=0
y=0

[State 1253]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1253]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 1253]
type=Explod
anim=7011
trigger1=Time=0
postype=P1
pos=0,0
persistent=0
sprpriority=-2
pausemovetime=999
supermovetime=999

[State 1253]
type=changestate
trigger1=var(20)=20&&time=3
trigger1=P2statetype!=A&&P2movetype=H
trigger1=P2bodydist X=[-30,30]
value=ifelse(random>=500,400,430)
ctrl=0

[State 1253]
type=changestate
trigger1=!animtime
value=0
ctrl=1

;---------------------------------
;Shadow Slice - Helper Projectile Cancel
[Statedef 1255]
type=A
movetype=A
physics=N
sprpriority=5
ctrl=0

[State 1255]
type=changeanim
trigger1=!time&&!prevstateno
value=1255

[State 1255]
type=BindToparent
trigger1=1

[State 1255]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1255
ignorehitpause=1

[State 1255]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1255]
type=DestroySelf
trigger1=Parent, Stateno=[1250,1252]
trigger1=time>=19
trigger2=Parent, Stateno!=[1250,1252]
trigger3=animtime=0

;---------------------------------
;Guard Break/Stun
[Statedef 2000]
type=S
movetype=A
physics=S
anim=2000
velset=0,0
poweradd=-500
ctrl=0
sprpriority=1

[State 2000]
type=Playsnd
trigger1=time=0
value=2,7
channel=2

[State 2000]
type=Playsnd
trigger1=time=25
value=0,3
channel=0

[State 2000, AfterImage]
type=AfterImage
trigger1=animelem=2
time=10
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=8
trans=add1
TimeGap=2

[State 2000]
type=Explod
anim=17010
trigger1=time=15
postype=P1
pos=0,0

[State 2000]
type=hitdef
trigger1=animelem=2
attr=S,SA
damage=100
ground.type=High
air.type=High
animtype=Hard 
guardflag=-
hitflag=MAF
priority=5,Hit
getpower=0
pausetime=3,8
sparkno=S7002
sparkxy=-15,-65
guard.sparkno=S7004
guard.pausetime=11,11
hitsound=s0,32 
guardsound=s0,13
ground.velocity=-3
airguard.velocity=-2*1.5,-5/2
guard.slidetime=15
guard.hittime=15
guard.ctrltime=15
guard.velocity=-10
p2stateno=2003
ID=2000

[State 2000]
type=Explod
triggerall=p2stateno=[2003,2004]
trigger1=Animelem=4
anim=7009
ID=7009
pos=const(size.head.pos.x)-10,const(size.head.pos.y)+90
postype=p2
sprpriority=4
bindtime=-1
removetime=-1
removeongethit=1

[State 2000] 
type=Helper
triggerall=p2stateno=[2003,2004]
trigger1=Animelem=4
name="Stun"
Stateno=2005
ID=2005

[State 2000]
type=ChangeState
trigger1=AnimTime=0
value=0
ctrl=1

;---------------------------------
;Guard Break/Stun P2 Slide State
[Statedef 2003]
type=S
movetype=H
physics=N
velset=0,0
ctrl=0
sprpriority=1

[State 2003]
type=turn
triggerall=time=0
trigger1=(facing=1&&enemy,facing=1)
trigger2=(facing=-1&&enemy,facing=-1)

[State 2003]
type=Velset
triggerall=time=0
trigger1=(facing=1&&enemy,facing=-1)
trigger2=(facing=-1&&enemy,facing=1)
x=-3
y=0

[State 2003]
type=Velset
triggerall=time=0
trigger1=(facing=1&&enemy,facing=1)
trigger2=(facing=-1&&enemy,facing=-1)
x=3
y=0

[State 2003]
type=Posset
trigger1=time=0
y=0

[State 2003]
type=ChangeAnim2
triggerall=alive=1
trigger1=time = 0
value=2003

[State 2003]
type = SelfState
trigger1 = !Alive
value = 5000

[State 2003]
type=ChangeState
triggerall=Alive
trigger1=Time=20
value=2004
ctrl=0
;---------------------------------
;Guard Break/Stun P2 Stun State
[Statedef 2004]
type=S
movetype=H
physics=N
velset=0,0
ctrl=0
sprpriority=1

[State 2004]
type=Posset
trigger1=time=0
y=0

[State 2004]
type=ChangeAnim2
triggerall=alive = 1
triggerall=time = 0
trigger1 =!selfanimexist(5300)
value=2004

[State 2004]
type=ChangeAnim
triggerall=alive = 1
triggerall=time = 0
trigger1=selfanimexist(5300)
value=5300

[State 2004]
type=SelfState
triggerall=!Alive
trigger1=Time = 0
value=5080

[State 2004]
type=SelfState
trigger1=Time=200
value=0
ctrl=1

;------------------------------------
;Guard Break/Stun P2 Helper State
[Statedef 2005]
type=S
velset=0,0
sprpriority=0
anim=9741
ctrl=0

[State 2005]
type=null;stopsnd
trigger1=time=0
channel=0

[State 2005]
type=PlaySnd
trigger1=time%19=1
value=S1,9
channel=1

[State 2005]
type=DestroySelf
trigger1=enemy,stateno!=[2003,2004]

;================================================================================================
;================================================================================================
;                                            HYPER ATTACKS
;================================================================================================
;================================================================================================
;Shadow Break
[Statedef 3000]
type=S
movetype=A
physics=S
anim=3000
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3000]
type=changestate
triggerall=Var(20)=20&&time=0
trigger1=power>=2000&&life<=500
value=3010

[State 3000]
type=playsnd
trigger1=AnimElem=2||AnimElem=6||AnimElem=11
value=2,15
channel=2

[State 3000]
type=PlaySnd
trigger1=AnimElem=3||AnimElem=7||AnimElem=12
value=1,27
channel=0

[State 3000,wink]
type=PlaySnd
trigger1=time=23
value=1,8
channel=1

[State 3000, Vel]
type=velset
trigger1=1
x=0
y=0

[State 3000, Vel]
type=posset
trigger1=1
y=0

[State 3000]
type=width
trigger1=1
value=40,0

[State 3000, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3000,Hyper dampener 2]
type=VarSet
trigger1=movehit&&var(25)<=1
trigger2=numtarget&&var(25)<=1
var(25)=2

[State 3000,Hyper dampener 3]
type=VarSet
trigger1=time=0&&var(26)=3
trigger2=time=0&&var(26)=3
var(25)=3

[State 3000,wink superpause]
type=SuperPause
trigger1=Time=2
time=36
movetime=36
anim=7026
sound=s2000,0
;pos=0,0
darken=1
p2defmul=1
poweradd=-1000
unhittable=1

[State 3000,wink]
type=Explod
Anim=6008
trigger1=time=23
postype=P1
pos=4,-95
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3000,Portrait]
type=Explod
Anim=13600
trigger1=var(19)=1
trigger1=Time=0
postype=Back
pos=75,215
removetime=2
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
;pausemovetime=999
;supermovetime=999

[State 3000,Portrait Wink]
type=Explod
Anim=26022
trigger1=var(19)=1
trigger1=Time=0
postype=Back
pos=99,63
bindtime=1
removeongethit=1
sprpriority=5
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
pausemovetime=999
supermovetime=999

[state 3000, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=0 
add=-115,-115,-115
time=19
ignorehitpause=1
persistent=0

[State 3000,top]
type=Helper
trigger1=AnimElem=3||AnimElem=8||AnimElem=13
name="shadow boom"
pos=30,-40
postype=P1
stateno=3001
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=3
ID=3000

[State 3000,middle]
type=Helper
trigger1=AnimElem=3||AnimElem=8||AnimElem=13
name="shadow boom"
pos=50,-10
postype=P1
stateno=3001
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=3
ID=3001

[State 3000,bottom]
type=Helper
trigger1=AnimElem=3||AnimElem=8||AnimElem=13
name="shadow boom"
pos=30,20
postype=P1
stateno=3001
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=3
ID=3002

[State 3000]
type=varset
trigger1=time=0
var(21)=0

[State 3000]
type=varadd
triggerall=P2Life <=0
trigger1=Var(21) <=2 
v=21
value=1

[State 3000]
type=PlaySnd
trigger1=Var(21)=1
value=s3000,1
volume=255

[State 3000]
type=EnvShake
trigger1=Var(21)=1
time=14
ampl=-3
freq=160
phase=1

[State 3000, fadein from White]
type=BGPalFx
trigger1=Var(21)=1
time=25
add=-255,-255,-255        ;Black
sinadd=255,255,255,150    ;Black
;add=255,255,255            ;White
;sinadd=-255,-255,-255,150  ;White
ignorehitpause=1
persistent=0
pausemovetime=9999

[State 3000, Extra varset]
type=VarSet
trigger1=time=0
v=41
value=1

[State 3000,Hyper dampener 3]
type=VarSet
trigger1=time=0&&var(26)=3
var(25)=ifelse(prevstateno=450,3,2)

[State 3000, Extra varset]
type=VarAdd
trigger1=command="x"||command="y"||command="z"
trigger1=time=[20,50]
v=41
value=1
ignorehitpause=1

[State 3000, End Extra]
type=changestate
triggerall=animelem=14,=1
trigger1=var(41)>=6
trigger2=Var(20)=20
trigger2=life<500
trigger3=Var(20)=20
trigger3=life>=500&&random>=700
value=3005
ctrl=0

[State 3000, End]
type=changestate
trigger1=animtime=0
value=0
ctrl=1

;---------------------------------
;Shadow Break Projectile Animations
[Statedef 3001]
type=A
movetype=A
physics=N
ctrl=0
anim=16001
velset=0,0
sprpriority=4

[State 3001]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3001]
type=null;VelSet
trigger1=Ishelper(3000)
trigger1=time=0
x=7
y=0

[State 3001]
type=VelSet
triggerall=Ishelper(3000)
trigger1=time=0
trigger2=time=12
trigger3=time=24
trigger4=time=36
trigger5=time=48
trigger6=time=60
x=7
y=4

[State 3001]
type=VelSet
triggerall=Ishelper(3000)
trigger1=time=6
trigger2=time=18
trigger3=time=30
trigger4=time=42
trigger5=time=54
trigger6=time=66
x=7
y=-4

[State 3001,top]
type=VelSet
trigger1=Ishelper(3001)
trigger1=time=0
x=7
y=0

[State 3001,middle]
type=null;VelSet
trigger1=Ishelper(3002)
trigger1=time=0
x=7
y=0

[State 3001]
type=VelSet
triggerall=Ishelper(3002)
trigger1=time=0
trigger2=time=12
trigger3=time=24
trigger4=time=36
trigger5=time=48
trigger6=time=60
x=7
y=-4

[State 3001]
type=VelSet
triggerall=Ishelper(3002)
trigger1=time=6
trigger2=time=18
trigger3=time=30
trigger4=time=42
trigger5=time=54
trigger6=time=66
x=7
y=4

[State 3001,bottom]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3002
ignorehitpause=1

[State 3001]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 3001]
type=HitDef
triggerall=Ishelper(3000)>=1
trigger1=1
attr=S,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(25)=4,20,ifelse(Parent,var(25)=3,5,ifelse(Parent,var(25)=2,18,ifelse(Parent,var(26)=2,14,25)))),3
getpower=0,0
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=0,2
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=16
ground.hittime=16
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=3000

[State 3001]
type=HitDef
triggerall=Ishelper(3001)>=1
trigger1=1
attr=S,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(25)=4,20,ifelse(Parent,var(25)=3,5,ifelse(Parent,var(25)=2,18,ifelse(Parent,var(26)=2,14,25)))),3
getpower=0,0
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=0,2
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=16
ground.hittime=16
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-1.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=3001

[State 3001]
type=HitDef
triggerall=Ishelper(3002)>=1
trigger1=1
attr=S,SP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
damage=ifelse(Parent,var(25)=4,20,ifelse(Parent,var(25)=3,5,ifelse(Parent,var(25)=2,18,ifelse(Parent,var(26)=2,14,25)))),3
getpower=0,0
givepower=15,8
priority=7,Hit
guardflag=MA
hitflag=MAF
pausetime=0,2
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-50
hitsound=S0,7
guardsound=S0,13
ground.slidetime=16
ground.hittime=16
ground.velocity=-8,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-5,-2.5
;ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=3002

[State 3001]
type=null;Explod
Anim=16000
trigger1=movehit&&numtarget
trigger1=!(target,time)&&target,movetype=H
postype=left
pos=ceil((target,pos x)-((target,const(size.ground.front)+10)*facing)+160),ceil(screenpos y)+10
sprpriority=4
removetime=-2
ownpal=1
facing=ifelse(facing=-1,-1,1)
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=0
scale=.7,.7

[State 3001]
type=changestate
trigger1=movecontact
value=3002

[State 3001]
type=null;changestate
trigger1=movecontact&&numhelper<=0
value=1103

[State 3001]
type=DestroySelf
trigger1=frontedgedist<-120||backedgedist<-120

;---------------------------------
;Shadow Break Projectile Destroy Animations
[Statedef 3002]
type = A
movetype = A
physics = N
ctrl = 0
anim=6002
velset=0,0
sprpriority=3
movehitpersist=1

[State 3002]
type =AssertSpecial
trigger1=1
flag =noshadow

[State 3002]
type = DestroySelf
trigger1=animtime=0

;Shadow Break Extra
[Statedef 3000]
type=S
movetype=A
physics=S
anim=3000
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

;---------------------------------
;Shadow Break Extra
[Statedef 3005]
type=S
movetype=A
physics=S
anim=3005
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3005]
type=playsnd
trigger1=AnimElem=3
value=2,15
channel=2

[State 3005]
type=PlaySnd
trigger1=AnimElem=4
value=1,27
channel=0

[State 3005, Vel]
type=velset
trigger1=1
x=0
y=0

[State 3005, Vel]
type=posset
trigger1=1
y=0

[State 3005, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3005,Hyper dampener 3]
type=VarSet
trigger1=time=0&&var(25)>=3
var(25)=3

[State 3005,Hyper dampener 3]
type=VarSet
trigger1=time=1&&var(26)>=2
var(25)=ifelse(var(26)=2,4,3)

[State 3005]
type=width
trigger1=1
value=40,0

[State 3005,top]
type=Helper
trigger1=AnimElem=4
name="shadow boom"
pos=30,-40
postype=P1
stateno=3001
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=3
ID=3000

[State 3005,middle]
type=Helper
trigger1=AnimElem=4
name="shadow boom"
pos=50,-10
postype=P1
stateno=3001
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=3
ID=3001

[State 3005,bottom]
type=Helper
trigger1=AnimElem=4
name="shadow boom"
pos=30,20
postype=P1
stateno=3001
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=3
ID=3002

[State 3005, Varset Reset]
type=VarSet
trigger1=1
v=41
value=0

[State 3005]
type=varset
trigger1=time=0
var(21)=0

[State 3005]
type=varadd
triggerall=P2Life <=0
trigger1=Var(21) <=2 
v=21
value=1

[State 3005]
type=PlaySnd
trigger1=Var(21)=1
value=s3000,0
volume=255

[State 3005]
type=EnvShake
trigger1=Var(21)=1
time=14
ampl=-3
freq=160
phase=1

[State 3005, fadein from White]
type=BGPalFx
trigger1=Var(21)=1
time=25
add=-255,-255,-255        ;Black
sinadd=255,255,255,150    ;Black
;add=255,255,255            ;White
;sinadd=-255,-255,-255,150  ;White
ignorehitpause=1
persistent=0
pausemovetime=9999

[State 3005, End]
type=changestate
trigger1=animtime=0
value=0
ctrl=1

;---------------------------------
;Shadow Break Lvl2
[Statedef 3010]
type=S
movetype=A
physics=S
anim=3010
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3010,wink superpause]
type=SuperPause
trigger1=Time=3
time=36
movetime=36
anim=7026
sound=s2000,0
;pos=0,0
darken=1
p2defmul=1
poweradd=-2000
unhittable=1

[State 3010,wink]
type=PlaySnd
trigger1=time=24
value=1,8
channel=1

[State 3010]
type=PlaySnd
trigger1=animelem=4||Animelem=12||Animelem=20||Animelem=28||Animelem=36||Animelem=44||Animelem=52
trigger2=animelem=60||Animelem=68||Animelem=76||Animelem=84||Animelem=92
value=0,3
channel=1

[State 3010]
type=PlaySnd
trigger1=AnimElem=4
value=1,27
channel=0

[State 3010,wink]
type=Explod
Anim=6008
trigger1=time=24
postype=P1
pos=31,-93
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3010,Portrait]
type=Explod
Anim=13600
trigger1=var(19)=1
trigger1=animelem=2,=14
postype=Back
pos=75,215
removetime=2
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
;pausemovetime=999
;supermovetime=999

[State 3010,Portrait Wink]
type=Explod
Anim=26022
trigger1=var(19)=1
trigger1=animelem=2,=14
postype=Back
pos=99,63
bindtime=1
removeongethit=1
sprpriority=5
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
pausemovetime=999
supermovetime=999

[state 3010, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=animelem=2,=14
add=-115,-115,-115
time=19
ignorehitpause=1
persistent=0

[State 3010]
type=width
trigger1=Time=[0,6]
value=40,0

[State 3010]
type=Helper
trigger1=animelem=5
helpertype=Normal
name="hyper boom"
postype=P1
stateno=3011
ownpal=1

[State 3010]
type=Helper
trigger1=animelem=6
stateno=3012
id=3012
helpertype=Normal
name="projectile cancel"
postype=p1
pos=50,-60
keyctrl=0
ownpal=1
ignorehitpause=0
persistent=0

[State 3010, Proj cancel]
type=VarSet
trigger1=time=0
v=41
value=1

[State 3010, Proj cancel]
type=VarSet
trigger1=time=114
v=41
value=0

[State 3010, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= 1
fvar(5)= 0

[State 3010,Damage Dampener 3]
type=VarSet
triggerall=time>=140
trigger1=movehit
trigger2=numtarget
v=25
value=3

[State 3005,Hyper dampener 1]
type=VarSet
trigger1=var(25)!=3
trigger1=time=0&&var(26)<=2
var(25)=1

[State 3010]
type=PosFreeze
trigger1=1
x=1
y=1

[State 3010]
type=VarRandom
trigger1=1
v=42
range=10,-20

[State 3010]
type=VarRandom
trigger1=1
v=43
range=-80,-50

[State 3010]
type=HitDef
trigger1=animelem=6||Animelem=15||Animelem=25||Animelem=35||Animelem=44||Animelem=54||Animelem=63
trigger2=animelem=73||Animelem=83
attr=S,HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(25)=2,12,ifelse(var(25)=3,7,ifelse(var(25)=4,15,19))),2
getpower=0,0
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=0,1
sparkno=s7002
guard.sparkno=s7004
sparkxy=var(42),var(43)
hitsound=S0,4
guardsound=S0,13
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(P2bodydist x <=30,-4,ifelse(P2bodydist x >=100,20,-6)),0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=ifelse(P2bodydist x <=30,-4,ifelse(P2bodydist x >=100,20,-6))
;air.velocity=2.55,.55
air.velocity=ifelse(P2bodydist x <=30,-4,ifelse(P2bodydist x >=100,20,-6)),-.55
ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=0
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
forcestand=1
p2facing=1
kill=0
ID=3010

[State 3010]
type=HitDef
trigger1=animelem=11||Animelem=20||Animelem=30||Animelem=39||Animelem=49||Animelem=59||Animelem=68
trigger2=animelem=78||Animelem=86
attr=S,HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(25)=2,12,ifelse(var(25)=3,7,ifelse(var(25)=4,15,19))),2
getpower=0,0
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=0,1
sparkno=s7002
guard.sparkno=s7004
sparkxy=var(42),var(43)
hitsound=S0,4
guardsound=S0,13
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(P2bodydist x <=30,4,ifelse(P2bodydist x >=100,20,6)),0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=ifelse(P2bodydist x <=30,4,ifelse(P2bodydist x >=100,20,6))
;air.velocity=-5,-2.5
air.velocity=ifelse(P2bodydist x <=30,4,ifelse(P2bodydist x >=100,20,6)),-.5
ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=0
down.hittime=20
fall.recover=0
;fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
forcestand=1
p2facing=1
kill=0
ID=3010

[State 3010]
type=HitDef
trigger1=Animelem=91
attr=S,HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(25)=2,12,ifelse(var(25)=3,7,ifelse(var(25)=4,15,19))),2
getpower=0,0
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=0,1
sparkno=s7002
guard.sparkno=s7004
sparkxy=var(42),var(43)
hitsound=S0,4
guardsound=S0,13
ground.slidetime=16
ground.hittime=16
ground.velocity=ifelse(P2bodydist x <=30,-4,ifelse(P2bodydist x >=100,20,-6)),0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=ifelse(P2bodydist x <=30,-4,ifelse(P2bodydist x >=100,20,-6))
;air.velocity=2.55,.55
air.velocity=ifelse(P2bodydist x <=30,-4,ifelse(P2bodydist x >=100,20,-6)),.55
ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=0
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
forcestand=1
p2facing=1
ID=3010

[State 3010]
type=HitDef
trigger1=animelem=96
attr=S,HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(26)=2,7,10),2
getpower=0,0
givepower=15,8
guardflag=MA
hitflag=MAF
priority=7,Hit
pausetime=0,1
sparkno=s7002
guard.sparkno=s7004
sparkxy=var(42),var(43)
hitsound=S0,9
guardsound=S0,13
ground.slidetime=16
ground.hittime=16
ground.velocity=-8,-8
guard.slidetime=20
guard.hittime=20
airguard.velocity=-3
guard.velocity=-7
air.velocity=-6,-6.5
ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=1
air.fall=1
down.hittime=20
fall.recover=0
;fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
forcestand=1
p2facing=1
ID=3010

[State 3010, End]
type=changestate
trigger1=animtime=0
value=0
ctrl=1

;---------------------------------
;Shadow Break Projectile Animations
[Statedef 3011]
type=A
movetype=I
physics=N
ctrl=0
anim=9741
velset=0,0
sprpriority=4

[State 3011]
type=BindToparent
trigger1=1

[State 3011]
type = Explod
Anim = 6007
trigger1=Time=1
postype = P1
pos = 50,-60
bindtime = 1
removeTime = 18
removeongethit=1
sprpriority = 3
ownpal = 1
vel=.5,3.2
;pausemovetime=999
;supermovetime=999
ID=6007

[State 3011]
type = Explod
Anim = 16007
trigger1=Time=1
postype = P1
pos = 50,-60
bindtime = 1
removeTime = 18
removeongethit=1
sprpriority = 3
ownpal = 1
vel=.5,3.2
;pausemovetime=999
;supermovetime=999
ID=16007

[State 3011, grow]
type = ModifyExplod
trigger1 = time > 0
ID = 6007
scale = .1+(.0527*time),.1+(.0527*time)

[State 3011, grow]
type = ModifyExplod
trigger1 = time > 0
ID = 16007
scale = .1+(.0527*time),.1+(.0527*time)

[State 3011, shrink]
type =null; ModifyExplod
trigger1 = time > 0
ID = 6007
scale = 1-(.0327*time),1-(.0327*time)

[State 3011]
type=DestroySelf
trigger1=Parent,stateno!=3010

;---------------------------------
;Shadow Break - Helper Projectile Cancel
[Statedef 3012]
type=A
movetype=A
physics=N
sprpriority=5
ctrl=0

[State 3012]
type=changeanim
trigger1=!time&&!prevstateno
value=3012

[State 3012]
type=BindToparent
trigger1=1
pos=0,0

[State 3012]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3012
ignorehitpause=1

[State 3012]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 3012]
type=DestroySelf
trigger1=Parent,var(41)=0
trigger2=animtime=0
trigger3=parent,movetype=H

;---------------------------------
;Air Shadow Break Lvl2/Air Fireball
[Statedef 3050]
type=A
movetype=A
physics=N
anim=3050
ctrl=0
velset=0,0
juggle=0
sprpriority=0

[State 3050]
type=Turn
triggerall=time=0
trigger1=P2bodydist X <=-20

[State 3050]
type=PlaySnd
trigger1=AnimElem=4||AnimElem=10||AnimElem=16
value=2,13
channel=2

[State 3050]
type=PlaySnd
trigger1=AnimElem=5||AnimElem=11||AnimElem=17
value=1,27
channel=0

[State 3050,wink]
type=PlaySnd
trigger1=AnimElem=1,=2
value=1,8
channel=1

[State 3050]
type=Velset
trigger1=animelem=6
trigger2=animelem<=19
x = -1.8
y = -1.5

[State 3050]
type = VelMul
trigger1 = Time = 0
x = .08
y = .08

[State 3050]
type = turn
trigger1 = Animelem >= 18
trigger1 = p2dist X < -1

[State 3050]
type=StateTypeSet
trigger1=AnimElem=19
StateType=A
Physics=A

[State 3050]
type=NULL;AfterImage
trigger1=Time<=6
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
Trans=Add1
framegap=4
length=10
time=20

[State 3050, AfterImage]
type=AfterImage
trigger1=Time<=6
time=20
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=10
trans=add1
TimeGap=2
FrameGap=4

[State 3050]
type=AfterImageTime
triggerall=anim=3050
trigger1=1
ignorehitpause=1
time=2

[State 3050, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3050]
type=SuperPause
trigger1=Animelem=2
time = 40
anim =7026
sound =s2000,0
;pos =
darken = 1
p2defmul = 1
poweradd = -2000
unhittable = 1

[State 3050,wink]
type=Explod
Anim=6008
trigger1=animelem=2,=0
postype=P1
pos=24,-99
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3050,Portrait]
type=Explod
Anim=13050
trigger1=var(19)=1
trigger1=Time=2
postype=Back
pos=75,215
removetime=2
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
;pausemovetime=999
;supermovetime=999

[State 3050,Portrait Wink]
type=Explod
Anim=26022
trigger1=var(19)=1
trigger1=Time=2
postype=Back
pos=99,63
bindtime=1
removeongethit=1
sprpriority=5
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
pausemovetime=999
supermovetime=999

[state 3050, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=1 
add=-115,-115,-115
time=2
ignorehitpause=1
persistent=0

[State 3050]
type=PlaySnd
trigger1=time=1
value=1,8
channel=3

[State 3050]
type=Explod
trigger1=time=3
anim=7026
postype=p1
pos=-30,-107
sprpriority=5
ownpal=1
scale=1,1
supermove=1

[State 3050,middle]
type=Helper
trigger1=AnimElem=5||AnimElem=11||AnimElem=17
name="zankuu fireball"
pos=48,5
postype=P1
stateno=3051
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=4
id=3050

[State 3050,top]
type=Helper
trigger1=AnimElem=5||AnimElem=11||AnimElem=17
name="zankuu fireball2"
pos=48,5
postype=P1
stateno=3051
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=3
id=3051

[State 3050,bottom]
type=Helper
trigger1=AnimElem=5||AnimElem=11||AnimElem=17
name="zankuu fireball3"
pos=48,5
postype=P1
stateno=3051
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=3
id=3052

[State 3050]
type=varset
trigger1=time=0
var(21)=0

[State 3050]
type=varadd
triggerall=P2Life <=0
trigger1=Var(21) <=2 
v=21
value=1

[State 3050]
type=PlaySnd
trigger1=Var(21)=1
value=s3000,1
volume=255

[State 3050]
type=EnvShake
trigger1=Var(21)=1
time=14
ampl=-3
freq=160
phase=1

[State 3050, fadein from White]
type=BGPalFx
trigger1=Var(21)=1
time=25
add=-255,-255,-255        ;Black
sinadd=255,255,255,150    ;Black
;add=255,255,255            ;White
;sinadd=-255,-255,-255,150  ;White
ignorehitpause=1
persistent=0
pausemovetime=9999

[State 3050]
type=varset
triggerall=time>=10&&var(25)=0
trigger1=enemy,movetype=H
var(25)=1

[State 3050]
type=varset
triggerall=time=0&&var(25)=1
trigger1=enemy,movetype=H
var(25)=2

[State 3050]
type=VarSet
triggerall=time=0&&var(30)=1
trigger1=enemy,movetype=H
var(25)=2

[State 3050]
type=VarSet
triggerall=time=0&&var(30)=2
trigger1=enemy,movetype=H
var(25)=3

[State 3050]
type=ChangeState
triggerall=time>=50
trigger1 = Pos Y >= 0 && Vel Y >=0
value = 52

;---------------------------------
;Air Shadow Break Lvl2/Air Fireball Animations
[Statedef 3051]
type=A
movetype=A
physics=N
ctrl=0
anim=6003
velset=0,0
sprpriority=4

[State 3051]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3051]
type=VelSet
trigger1=Ishelper(3050)
trigger1=time=0
x=5
y=2.5

[State 3051,top]
type=VelSet
trigger1=Ishelper(3051)
trigger1=time=0
x=5.6
y=1.5

[State 3051]
type=VelSet
trigger1=Ishelper(3052)
trigger1=time=0
x=4.4
y=3.5

[State 3051]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3052
ignorehitpause=1

[State 3051]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 3051]
type=HitDef
triggerall=Ishelper(3050)>=1
trigger1=1
attr=A,HP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(25)=3,11,ifelse(Parent,var(25)=2,35,44)),5
getpower=0
givepower=15,8
guardflag=MA
hitflag=MAFD
priority=7,Miss
pausetime=0,8
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-40
hitsound=S0,7
guardsound=S0,13
ground.slidetime=25
ground.hittime=27
ground.velocity=-3,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-2,-3
ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=3050

[State 3051]
type=HitDef
triggerall=Ishelper(3051)>=1
trigger1=1
attr=A,HP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(25)=3,11,ifelse(Parent,var(25)=2,35,44)),5
;getpower=0
givepower=15,8
guardflag=MA
hitflag=MAFD
priority=7,Miss
pausetime=0,8
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-40
hitsound=S0,7
guardsound=S0,13
ground.slidetime=25
ground.hittime=27
ground.velocity=-2,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-2,-3
ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=3051

[State 3051]
type=HitDef
triggerall=Ishelper(3052)>=1
trigger1=1
attr=A,HP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(25)=3,11,ifelse(Parent,var(25)=2,35,44)),5
;getpower=0
givepower=15,8
guardflag=MA
hitflag=MAFD
priority=7,Miss
pausetime=0,8
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-40
hitsound=S0,7
guardsound=S0,13
ground.slidetime=25
ground.hittime=27
ground.velocity=-4,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-2,-3
ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=3052

[State 3051]
type=changestate
trigger1=movecontact
trigger2=pos Y >=35
value=3052

[State 3051]
type=DestroySelf
triggerall=time>0
trigger1=movehit
trigger2=frontedgedist<-120||backedgedist<-120

;---------------------------------
;Air Green Fireball Destroy Animations
[Statedef 3052]
type=S
physics=N
ctrl=0
anim=6004
velset=0,0
sprpriority=3
movehitpersist=1

[State 3052]
type=Posadd
trigger1=time=0
x=20
y=0

[State 3052]
type=velset
trigger1=1
x=0
y=0

[State 3052]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3052]
type=DestroySelf
trigger1=animtime=0

;---------------------------------
;Air Shadow Break/Air Fireball
[Statedef 3055]
type=A
movetype=A
physics=N
anim=3050
ctrl=0
velset=0,0
juggle=0
sprpriority=0

[State 3055]
type=Turn
triggerall=time=0
trigger1=P2bodydist X <=-20

[State 3055]
type=PlaySnd
trigger1=AnimElem=4||AnimElem=10||AnimElem=16
value=2,14
channel=2

[State 3055]
type=PlaySnd
trigger1=AnimElem=5||AnimElem=11||AnimElem=17
value=1,27
channel=0

[State 3055]
type=PlaySnd
trigger1=AnimElem=1,=2
value=1,8
channel=1

[State 3055]
type=Velset
trigger1=animelem=6
trigger2=animelem<=19
x = -1.8
y = -1.8

[State 3055]
type = VelMul
trigger1 = Time = 0
x = .08
y = .08

[State 3055]
type = turn
trigger1 = Animelem >= 18
trigger1 = p2dist X < -1

[State 3055]
type=StateTypeSet
trigger1=AnimElem=19
StateType=A
Physics=A

[State 3055]
type=NULL;AfterImage
trigger1=Time<=6
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
Trans=Add1
framegap=4
length=10
time=20

[State 3050, AfterImage]
type=AfterImage
trigger1=Time<=6
time=20
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=10
trans=add1
TimeGap=2
FrameGap=4

[State 3055]
type=AfterImageTime
triggerall=anim=3050
trigger1=1
ignorehitpause=1
time=2

[State 3055, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3055]
type=SuperPause
trigger1=Animelem=2
time = 40
anim =7026
sound =s2000,0
;pos =
darken = 1
p2defmul = 1
poweradd = -1000
unhittable = 1

[State 3055,wink]
type=Explod
Anim=6008
trigger1=animelem=2,=0
postype=P1
pos=24,-99
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3055,Portrait]
type=Explod
Anim=13050
trigger1=var(19)=1
trigger1=Time=2
postype=Back
pos=75,215
removetime=2
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
;pausemovetime=999
;supermovetime=999

[State 3055,Portrait Wink]
type=Explod
Anim=26022
trigger1=var(19)=1
trigger1=Time=2
postype=Back
pos=99,63
bindtime=1
removeongethit=1
sprpriority=5
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
pausemovetime=999
supermovetime=999

[state 3055, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=1 
add=-115,-115,-115
time=2
ignorehitpause=1
persistent=0

[State 3050]
type=PlaySnd
trigger1=time=1
value=1,8
channel=3

[State 3055]
type=Explod
trigger1=time=3
anim=7026
postype=p1
pos=-30,-107
sprpriority=5
ownpal=1
scale=1,1
supermove=1

[State 3055,middle]
type=Helper
trigger1=AnimElem=5||AnimElem=11||AnimElem=17
name="zankuu fireball"
pos=48,5
postype=P1
stateno=3056
helpertype=normal
keyctrl=0
ownpal=1
ignorehitpause=1
persistent=1
sprpriority=4
id=3055

[State 3055]
type=varset
trigger1=time=0
var(21)=0

[State 3055]
type=varadd
triggerall=P2Life <=0
trigger1=Var(21) <=2 
v=21
value=1

[State 3055]
type=PlaySnd
trigger1=Var(21)=1
value=s3000,1
volume=255

[State 3055]
type=EnvShake
trigger1=Var(21)=1
time=14
ampl=-3
freq=160
phase=1

[State 3055, fadein from White]
type=BGPalFx
trigger1=Var(21)=1
time=25
add=-255,-255,-255        ;Black
sinadd=255,255,255,150    ;Black
;add=255,255,255            ;White
;sinadd=-255,-255,-255,150  ;White
ignorehitpause=1
persistent=0
pausemovetime=9999

[State 3055]
type=varset
triggerall=time>=10&&var(25)=0
trigger1=enemy,movetype=H
var(25)=1

[State 3055]
type=varset
triggerall=time=0&&var(25)=1
trigger1=enemy,movetype=H
var(25)=2

[State 3055]
type=VarSet
triggerall=time=0&&var(30)=1
trigger1=enemy,movetype=H
var(25)=2

[State 3055]
type=VarSet
triggerall=enemy,movetype=H
trigger1=time=0&&var(30)=2
var(25)=3

[State 3055]
type=ChangeState
triggerall=time>=50
trigger1 = Pos Y >= 0 && Vel Y >=0
value = 52

;---------------------------------
;Air Shadow Break/Air Fireball Animations
[Statedef 3056]
type=A
movetype=A
physics=N
ctrl=0
anim=6003
velset=0,0
sprpriority=4

[State 3056]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3056]
type=VelSet
trigger1=Ishelper(3055)
trigger1=time=0
x=5
y=2.5

[State 3055]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3052
ignorehitpause=1

[State 3056]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 3056]
type=HitDef
triggerall=Ishelper(3055)>=1
trigger1=1
attr=A,HP
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(Parent,var(26)=3,55,ifelse(Parent,var(25)=3,20,ifelse(Parent,var(25)=2,75,100))),5
getpower=0
givepower=15,8
guardflag=MA
hitflag=MAFD
priority=7,Miss
pausetime=0,8
sparkno=s7002
guard.sparkno=s7004
sparkxy=-10,-40
hitsound=S0,7
guardsound=S0,13
ground.slidetime=25
ground.hittime=27
ground.velocity=-3,0
guard.slidetime=20
guard.hittime=20
airguard.velocity=-6
guard.velocity=-7
air.velocity=-2,-3
ground.cornerpush.veloff=0
numhits=1
yaccel=.5
fall=0
air.fall=1
down.hittime=20
fall.recover=0
fall.recovertime=25
envshake.time=10
envshake.freq=260
envshake.ampl=-5
ID=3055

[State 3056]
type=changestate
trigger1=movecontact
trigger2=pos Y >=35
value=3052

[State 3056]
type=DestroySelf
triggerall=time>0
trigger1=movehit
trigger2=frontedgedist<-120||backedgedist<-120

;---------------------------------
;Shadow Justice
[Statedef 3100]
type=S
movetype=A
physics=N
anim=3100
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3100]
type=changestate
triggerall=Var(20)=20&&time=0
trigger1=power>=2000&&life<=500
value=3150

[State 3100]
type=playsnd
trigger1=AnimElem=3||Animelem=16||Animelem=28
value=2,15
channel=2

[State 3100]
type=PlaySnd
trigger1=AnimElem=4||Animelem=18||Animelem=29
value=1,6
channel=0

[State 3100,wink]
type=PlaySnd
trigger1=time=26
value=1,8
channel=1

[State 3100, Vel]
type=velset
trigger1=time=0
x=0
y=0

[State 3100, Vel]
type=posset
trigger1=time=0
y=0

[State 3100]
type=PosFreeze
trigger1= animelemtime(37)>=0
trigger1= animelemtime(38)<=0
value=1

[State 3100, nothitby]
type=nothitby
trigger1= time<=25
value=SCA
time=1
ignorehitpause=1

[State 3100, nothitby]
type=nothitby
trigger1= numenemy>=2
trigger1= animelemtime(30)<=0
trigger1= P2bodydist x >=0
value=SCA,NA
time=1
ignorehitpause=1

[State 3100, grav]
type=null;veladd
trigger1= animelemtime(32)>=0
trigger1= animelemtime(36)<=0
y=.6

[State 3100, grav]
type=gravity
trigger1= animelemtime(39)>=0
value=1

[State 3100, Vel]
type=velset
trigger1= animelem=32
x=3
y=-18.6

[State 3100, Vel]
type=velset
trigger1= animelem=6 
trigger2= animelem=19
x=5.5

[State 3100, Vel]
type=velset
trigger1= animelem=35
x=3.3

[State 3100, Vel]
type=velset
trigger1= animelem=13
trigger2= animelem=26
trigger3= animelem=37,>=6
trigger3= animelem=37,<=13
x=0
y=0

[State 3100, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= 1
fvar(5)= 0

[State 3100, Trip Dampener]
type=varset
triggerall=p2movetype=H
trigger1=time=0
trigger1=prevstateno!=450
trigger1=var(26)=1
var(26)=2

[State 3100, Trip Dampener Reset]
type= varset
trigger1=numtarget=0
trigger1=animelemtime(5)>=0
trigger2=animelemtime(39)>=0
var(26)=0

[State 3100,Hyper dampener 2]
type=VarSet
trigger1=animelem=35&&p2movetype=H
var(25)=ifelse(var(25)<=1,2,3)

[State 3100,Hyper dampener 3]
type=VarSet
trigger1=time=0&&var(26)=3
var(25)=ifelse(prevstateno!=450,2,3)

[State 3100, AfterImage]
type=AfterImage
trigger1= animelem=3
time=70
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=9
trans=add1
TimeGap=2
FrameGap=4

[State 3100,wink superpause]
type=SuperPause
trigger1=Time=4
time=36
movetime=36
anim=7026
sound=s2000,0
;pos=0,0
darken=1
p2defmul=1
poweradd=-1000
unhittable=1

[State 3100,wink]
type=Explod
Anim=6008
trigger1=time=26
postype=P1
pos=-17,-56
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3100,Portrait]
type=Explod
Anim=13600
trigger1=var(19)=1
trigger1=Time=5
postype=Back
pos=75,215
removetime=2
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
;pausemovetime=999
;supermovetime=999

[State 3100,Portrait Wink]
type=Explod
Anim=26022
trigger1=var(19)=1
trigger1=Time=5
postype=Back
pos=99,63
bindtime=1
removeongethit=1
sprpriority=5
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
pausemovetime=999
supermovetime=999

[state 3100, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=17 
add=-115,-115,-115
time=19
ignorehitpause=1
persistent=0

[State 3100]
type=Explod
Anim=6005
trigger1= animelem=6 
postype=P1
pos=87,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=7,-7.5
persistent=0
pausemovetime=999
supermovetime=999

[State 3100]
type=Explod
Anim=6005
trigger1= animelem=19
postype=P1
pos=87,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=7,-7.5
persistent=0
pausemovetime=999
supermovetime=999

[State 3100]
type=Explod
Anim=6005
trigger1= animelem=31 
postype=P1
pos=87,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=7,-9.5
persistent=0
pausemovetime=999
supermovetime=999

[State 3100]
type=VarRandom
trigger1=1
v=42
range=0,-20

[State 3100]
type=VarRandom
trigger1=1
v=43
range=-108,-88

[State 3100]
type=HitDef
trigger1=Animelem=5||Animelem=20
priority=5,Hit
attr=S,HA
guardflag=MA
hitflag=MAFD
damage=ifelse(var(25)=4,20,ifelse(var(25)=3,5,ifelse(var(25)=2,15,ifelse(var(26)=2,18,25)))),2
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0,0
givepower=11,8 
pausetime=6,6
sparkno=S7002
guard.sparkno=S7004
sparkxy=var(42),var(43)
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=12
ground.hittime =12
ground.velocity=-5.5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-4,-3
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
kill=0

[State 3100]
type=HitDef
trigger1=Animelem=7||Animelem=9||Animelem=19||Animelem=22
priority=5,Hit
attr=S,HA
guardflag=MA
hitflag=MAFD
damage=ifelse(var(25)=4,20,ifelse(var(25)=3,5,ifelse(var(25)=2,15,ifelse(var(26)=2,18,25)))),2
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0,0
givepower=11,8 
pausetime=4,4
sparkno=S7002
guard.sparkno=S7004
sparkxy=var(42),var(43)
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=12
ground.hittime =12
ground.velocity=-5.5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-4,-3
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
kill=0

[State 3100]
type=HitDef
trigger1=Animelem=6||Animelem=18||Animelem=31
priority=5,Hit
attr=S,HA
guardflag=MA
hitflag=MAFD
damage=ifelse(var(25)=4,20,ifelse(var(25)=3,5,ifelse(var(25)=2,15,ifelse(var(26)=2,18,25)))),2
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0,0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=var(42),var(43)
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=12
ground.hittime =12
ground.velocity=-5.5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-4,-3
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
kill=0

[State 3100]
type=HitDef
trigger1=Animelem=32||Animelem=33
priority=5,Hit
attr=A,HA
guardflag=MA
hitflag=MAFD
damage=ifelse(var(25)=4,20,ifelse(var(25)=3,5,ifelse(var(25)=2,15,ifelse(var(26)=2,18,25)))),2
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0,0
givepower=11,8 
pausetime=4,3
sparkno=S7001
guard.sparkno=S7004
sparkxy=var(42),var(43)
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2,-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-17
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 3100]
type=HitDef
trigger1=Animelem=35
priority=5,Hit
attr=A,HA
guardflag=MA
hitflag=MAFD
damage=ifelse(var(25)=4,20,ifelse(var(25)=3,5,ifelse(var(25)=2,15,ifelse(var(26)=2,18,25)))),2
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0,0
givepower=11,8 
pausetime=4,4
sparkno=S7001
guard.sparkno=S7004
sparkxy=var(42),var(43)
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2,-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-10
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.6
fall=1
air.fall=1
fall.recover=0
;fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 3100]
type=null;StateTypeSet
trigger1=animelem=2              
physics=N

[State 3100]
type=StateTypeSet
trigger1=animelem=32  
statetype=A            
physics=A

[State 3100, statetype]
type=statetypeset
trigger1=animelemtime(39)>=0
movetype=I

[State 3100, End]
type=changestate
;trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Shadow Justice Lvl2
[Statedef 3150]
type=S
movetype=A
physics=N
anim=3150
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3150]
type=playsnd
trigger1=AnimElem=3||Animelem=16||Animelem=28||Animelem=42||Animelem=54
value=2,15
channel=2

[State 3150]
type=PlaySnd
trigger1=AnimElem=4||Animelem=18||Animelem=29||Animelem=43||Animelem=55
value=1,6
channel=0

[State 3150]
type=PlaySnd
trigger1=time=26
value=1,8
channel=1

[State 3150, Vel]
type=velset
trigger1=time=0
x=0
y=0

[State 3150, Vel]
type=posset
trigger1=time=0
y=0

[State 3150]
type=PosFreeze
trigger1= animelemtime(64)>=0
trigger1= animelemtime(65)<=0
value=1

[State 3150, nothitby]
type=nothitby
trigger1= time<=25
value=SCA
time=1
ignorehitpause=1

[State 3150, nothitby]
type=nothitby
trigger1= numenemy>=2
trigger1= animelemtime(60)<=0
trigger1= P2bodydist x >=0
value=SCA,NA
time=1
ignorehitpause=1

[State 3150, grav]
type=gravity
trigger1= animelemtime(66)>=0
value=1

[State 3150, Vel]
type=velset
trigger1= animelem=59
x=3
y=-18.6

[State 3150, Vel]
type=velset
trigger1= animelem=6 
trigger2= animelem=19
trigger3= animelem=32
trigger4= animelem=45
x=5.5

[State 3150, Vel]
type=velset
trigger1= animelem=62
x=3.3

[State 3150, Vel]
type=velset
trigger1= animelem=13
trigger2= animelem=26
trigger3= animelem=39
trigger4= animelem=52
trigger5= animelem=64,>=6
trigger5= animelem=64,<=13
x=0
y=0

[State 3150, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= 1
fvar(5)= 0

[State 3150, Trip Dampener]
type=varset
triggerall=p2movetype=H
trigger1=time=0
trigger1=prevstateno!=450
trigger1=var(26)=1
var(26)=2

[State 3150, Trip Dampener Reset]
type= varset
trigger1=numtarget=0
trigger1=animelemtime(5)>=0
trigger2=animelemtime(66)>=0
var(26)=0

[State 3150,Hyper dampener 2]
type=VarSet
trigger1=animelem=62&&p2movetype=H
var(25)=3

[State 3150,Hyper dampener 4]
type=VarSet
trigger1=time=0
trigger1=enemy,stateno=5110
trigger1=var(26)!=0
var(25)=4

[State 3150,Hyper dampener 3]
type=VarSet
trigger1=time=0
trigger1=var(25)=2
var(25)=3

[State 3150,Hyper dampener 4]
type=VarSet
trigger1=time=1
trigger1=enemy,stateno=5110
trigger1=var(26)=0
var(25)=2

[State 3150, AfterImage]
type=AfterImage
trigger1= animelem=3
time=140
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=9
trans=add1
TimeGap=2
FrameGap=4

[State 3150,wink superpause]
type=SuperPause
trigger1=Time=4
time=36
movetime=36
anim=7026
sound=s2000,0
;pos=0,0
darken=1
p2defmul=1
poweradd=-2000
unhittable=1

[State 3150,wink]
type=Explod
Anim=6008
trigger1=time=26
postype=P1
pos=-17,-56
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3150,Portrait]
type=Explod
Anim=13600
trigger1=var(19)=1
trigger1=Time=5
postype=Back
pos=75,215
removetime=2
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
;pausemovetime=999
;supermovetime=999

[State 3150,Portrait Wink]
type=Explod
Anim=26022
trigger1=var(19)=1
trigger1=Time=5
postype=Back
pos=99,63
bindtime=1
removeongethit=1
sprpriority=5
ownpal=1
ontop=1
scale=1.5,1.5
persistent=0
pausemovetime=999
supermovetime=999

[state 3150, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=17 
add=-115,-115,-115
time=19
ignorehitpause=1
persistent=0

[State 3150]
type=Explod
Anim=6005
trigger1= animelem=6 
postype=P1
pos=87,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=7,-7.5
persistent=0
pausemovetime=999
supermovetime=999

[State 3150]
type=Explod
Anim=6005
trigger1= animelem=19
postype=P1
pos=87,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=7,-7.5
persistent=0
pausemovetime=999
supermovetime=999

[State 3150]
type=Explod
Anim=6005
trigger1= animelem=31 
postype=P1
pos=87,-19
bindtime=1
removeongethit=1
removetime=60
sprpriority=4
ownpal=1
scale=1,1
vel=7,-9.5
persistent=0
pausemovetime=999
supermovetime=999

[State 3150]
type=VarRandom
trigger1=1
v=42
range=10,-30

[State 3150]
type=VarRandom
trigger1=1
v=43
range=-118,-78

[State 3150]
type=HitDef
trigger1=Animelem=5||Animelem=6||Animelem=7||Animelem=9||Animelem=18||Animelem=19||Animelem=20||Animelem=22
trigger2=Animelem=31||Animelem=32||Animelem=33||Animelem=35||Animelem=44||Animelem=45||Animelem=46||Animelem=48
trigger3=Animelem=58
priority=5,Hit
attr=S,HA
guardflag=MA
hitflag=MAFD
damage=ifelse(var(25)=3,10,ifelse(var(25)=2,15,ifelse(var(26)=2,17,ifelse(var(25)=4,15,20)))),1
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0,0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=var(42),var(43)
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=12
ground.hittime =12
ground.velocity=-5.5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-4,-2
air.hittime=36
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1
kill=0

[State 3150]
type=HitDef
trigger1=Animelem=59||Animelem=61
priority=5,Hit
attr=A,HA
guardflag=MA
hitflag=MAFD
damage=ifelse(var(25)=3,5,ifelse(var(25)=2,15,ifelse(var(26)=2,17,ifelse(var(25)=4,15,20)))),1
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0,0
givepower=11,8 
pausetime=4,3
sparkno=S7001
guard.sparkno=S7004
sparkxy=var(42),var(43)
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2,-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-15
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 3150]
type=HitDef
trigger1=Animelem=62
priority=5,Hit
attr=A,HA
guardflag=MA
hitflag=MAFD
damage=ifelse(var(26)=2,18,ifelse(var(25)=2,15,20)),1
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0,0
givepower=11,8 
pausetime=4,4
sparkno=S7001
guard.sparkno=S7004
sparkxy=var(42),var(43)
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2,-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-10
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.6
fall=1
air.fall=1
fall.recover=0
;fall.recovertime=36
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 3150]
type=StateTypeSet
trigger1=animelem=59 
statetype=A            
physics=A

[State 3150, statetype]
type=statetypeset
trigger1=animelemtime(66)>=0
movetype=I

[State 3150, End]
type=changestate
;trigger1=animelem>=6
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------
;Cross Shadow Blitz(start)
[Statedef 3200]
type=S
movetype=A
physics=N
anim=3200
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3200]
type=changestate
trigger1=var(20)=20&&time=0
trigger1=life<=500&&power>=2000
trigger1=p2life!=0&&p2life>=250
value=3250
ctrl=0

[State 3200,wink]
type=PlaySnd
trigger1=time=28
value=1,8
channel=1

[State 3200]
type=PlaySnd
trigger1=animelem=6
value=0,14
channel=0

[State 3200]
type=PlaySnd
trigger1=animelem=4
value=1,6
channel=1

[State 3200, Vel]
type=velset
trigger1=animelem=1
trigger2=animelem=9
x=0
y=0

[State 3200, Vel]
type=posset
trigger1=1
y=0

[State 3200, Vel]
type=velset
trigger1=animelem>=4
trigger2=animelem<=5
x=15
y=0

[State 3200, Vel]
type=velset
trigger1=animelem>=6
trigger2=animelem<=8
x=.83
y=0

[State 3200, AfterImage]
type=AfterImage
trigger1=animelem=4
time=10
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=10
trans=add1
TimeGap=2
;FrameGap=2

[State 3200,wink superpause]
type=SuperPause
trigger1=Time=8
time=36
movetime=36
anim=7026
sound=s2000,0
;pos=0,0
darken=1
p2defmul=1
poweradd=-1000
unhittable=1

[State 3200,wink]
type=Explod
Anim=6008
trigger1=time=29
postype=P1
pos=-3,-90
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[state 3200, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=27 
add=-115,-115,-115
time=1
ignorehitpause=1
persistent=0

[State 3200]
type=NotHitBy
trigger1=animelem=4
value=SCA,AA,AP,AT
time=10

[State 3200]
type=HitDef
trigger1=time=0
attr=S,HT
hitflag=MAF
guardflag=MA 
damage=30
getpower=0
givepower=10
priority=6,Miss 
pausetime=7,7
ground.slidetime=20
ground.hittime=16
sparkno=S7002
guard.sparkno=S7004
sparkxy=-40,-85
hitsound=S0,9  
guardsound=S0,13  
p1facing=1 
p2facing=1         
p1stateno=3201                   
kill=0 

[State 3200,Hyper dampener 2]
type=VarSet
trigger1=time=0&&var(26)=3
var(25)=2

[State 3200]
type=ChangeState
trigger1=animtime=0
value=0
ctrl=1

;---------------------------------
;Cross Shadow Blitz
[Statedef 3201]
type=S
movetype=A
physics=N
anim=3201
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3201]
type=PlaySnd
trigger1=animelem=24
value=2,15
channel=2

[State 3201, Vel]
type=null;velset
trigger1=time=0
x=0
y=0

[State 3201, Vel]
type=velset
trigger1=animelem=1
x=2
y=0

[State 3201, Vel]
type=posset
trigger1=time=0
y=0

[State 3201, Vel]
type=posadd
trigger1=Animelem=15
x=10

[State 3201, Vel]
type=posadd
trigger1=Animelem=18
x=20

[State 3201, Vel]
type=posadd
trigger1=Animelem=22
x=15

[State 3201]
type=ScreenBound
trigger1=time>=45
value=0

[State 3201, AfterImage]
type=AfterImage
trigger1=Time=0
time=60
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=9
trans=add1
TimeGap=2
FrameGap=4

[State 3201, HitAdd]
type=HitAdd
trigger1=Animelem=3
value=1
persistent=0

[State 3201]
type=HitDef
trigger1=Animelem=3
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=10,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-20
hitsound=S0,8               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
forcestand=1  
kill=0

[State 3201]
type=HitDef
trigger1=Animelem=6
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-105
hitsound=S0,10               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
forcestand=1 
kill=0

[State 3201]
type=HitDef
trigger1=Animelem=9
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-65
hitsound=S0,10               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
forcestand=1 
kill=0

[State 3201]
type=HitDef
trigger1=Animelem=12
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-4
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
forcestand=1 
kill=0

[State 3201]
type=HitDef
trigger1=Animelem=14
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
forcestand=1 
kill=0

[State 3201]
type=HitDef
trigger1=Animelem=17
priority=3,Hit
attr = C, HA    
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
getpower = 0                  
givepower = 15,8
hitflag = MAFD
guardflag = L
pausetime =1,1
hitsound   = S0,9
guardsound=S0,13
sparkno=S7001
guard.sparkno=S7004
sparkxy = -5,-10
ground.slidetime = 36
ground.hittime  = 36
ground.velocity = -1
air.velocity = -1,-2
guard.velocity = -8
guard.slidetime = 13
guard.hittime = 13
airguard.velocity = -2
ground.cornerpush.veloff =0
yaccel=.5
fall=0
air.fall=0
forcestand=1
kill=0

[State 3201]
type=HitDef
trigger1=Animelem=21
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=11,8 
pausetime=7,7
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-3,-4
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-3
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
forcestand=1 
kill=0

[State 3201]
type=HitDef
trigger1=Animelem=22
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=0
givepower=11,8 
pausetime=6,6
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-4,-5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-3
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
forcestand=1
kill=0

[State 3201]
type=HitDef
trigger1=Animelem=25
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=0
givepower=11,8 
pausetime=10,10
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-12,-5
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-12,-5
air.hittime=12
ground.cornerpush.veloff=0
yaccel=.5
fall=1
air.fall=1
fall.recover=0

[State 3201,Hyper dampener 3]
type=VarSet
trigger1=Animelem=25&&P2movetype=H
var(25)=3

[State 3201]
type=ChangeState
trigger1=AnimTime=0
trigger1=BackEdgeBodyDist <=-60
value=100
ctrl=0

[State 3201]
type=ChangeState
trigger1=BackEdgeBodyDist >-60
trigger1=AnimTime=0
value=0
ctrl=1

[State 3201]
type=null;ChangeState
trigger1=animtime=0
value=0
ctrl=1

;---------------------------------
;Air Cross Shadow Blitz(start)
[Statedef 3210]
type=A
movetype=A
physics=N
anim=3210
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3210,wink]
type=PlaySnd
trigger1=time=2
value=1,8
channel=1

[State 3210]
type=PlaySnd
trigger1=animelemtime(2)=1
value=1,6
channel=1

[State 3210, Vel]
type=velset
trigger1=animelem>=1
x=0
y=0

[State 3210, Vel]
type=velset
trigger1=animelemtime(2)=1
x=20
y=0

[State 3210, Vel]
type=velset
trigger1=animelem>=4
x=12
y=1

[State 3210, grav]
type=gravity
trigger1=animelem>=4

[State 3210, Type]
type=statetypeset
trigger1= animelem>=4
physics=A
movetype=I

[State 3210, AfterImage]
type=AfterImage
trigger1=animelem=2
time=10
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=10
trans=add1
TimeGap=1
;FrameGap=2

[State 3210]
type=SuperPause
trigger1=Time=10
time=40
;movetime=40
anim=7026
sound=s2000,0
;pos=0,0
darken=1
p2defmul=1
poweradd=-1000
unhittable=1

[State 3210,wink]
type=Explod
Anim=6008
trigger1=time=2
postype=P1
pos=23,-97
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[state 3210, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=2 
add=-115,-115,-115
time=1
ignorehitpause=1
persistent=0

[State 3210]
type=null;NotHitBy
trigger1=animelem=3
value=SCA,AA,AP,AT
time=10

[State 3210]
type = HitDef
trigger1=P2statetype=A
trigger1=time=0
attr=A,HT
guardflag=HA
hitflag=MAF
damage=ifelse(var(30)=1,10,30)
getpower=0
givepower=10
priority=6, Hit 
snap=40,0,0
pausetime=6,6
sparkno=S7002
guard.sparkno=S7004
sparkxy=-25,-70
hitsound = S0,9 
guardsound=S0,13   
p1facing = 1 
p2facing = 1         
p1stateno = 3211                   
kill = 0 

[State 3210]
type = HitDef
trigger1=P2statetype!=A
trigger1=time=0
attr=A,HT
guardflag=HA
hitflag=MAF
damage=ifelse(var(30)=1,10,30)
getpower=0
givepower=10
priority=6, Hit 
pausetime=6,4
sparkno=S7002
guard.sparkno=S7004
sparkxy=-25,-70
hitsound = S0,9 
guardsound=S0,13  
ground.velocity=0,-4 
p1facing = 1 
p2facing = 1         
p1stateno = 3211                   
kill = 0 

[State 3210]
type=ChangeState
trigger1=Pos Y>= 0
value=52
ctrl=1

;---------------------------------
;Air Cross Shadow Blitz
[Statedef 3211]
type=A
movetype=A
physics=N
anim=3211
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3211]
type=varset
triggerall=time=0
trigger1=enemy,movetype=H
var(25)=2

[State 3211]
type=varset
triggerall=animelem=24
trigger1=enemy,movetype=H
var(25)=3

[State 3211]
type=playsnd
trigger1 = animelem=21
value=2,15

[State 3211]
type=playsnd
trigger1 = animelem=22
value=1,6

[State 3211, grav]
type=veladd
trigger1= animelemtime(23)>=0
trigger1= animelemtime(25)<=0
y=.6

[State 3211, grav]
type=veladd
trigger1= animelemtime(27)>=0
y=.6

[State 3211, Vel]
type=velset
trigger1= animelem=1
x=2
y=0

[State 3211, Vel]
type=velset
trigger1= animelem=23
x=3
y=-14.6

[State 3211, Vel]
type=velset
trigger1= animelem=26
x=3.3

[State 3211, HitAdd]
type=null;HitAdd
trigger1=animelem=3
value=1
persistent=0

[State 3211, AfterImage]
type=AfterImage
trigger1=Time=0
time=65
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=10
trans=add1
TimeGap=1

[State 3211]
type=Explod
Anim=6005
trigger1=animelem=23
postype=P1
pos=77,-19
bindtime=1
removetime=60
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
vel=7,-12.5
persistent=0
pausemovetime=999
supermovetime=999

[State 3211]
type=HitDef
trigger1=animelem=3
attr = A, HA
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(30)=1,10,ifelse(var(30)=2,8,ifelse(var(25)<=2,30,5)))
getpower=0
givepower=10,5
priority=6,Hit
guardflag=HA
hitflag=MAF
pausetime =8,8
sparkno=S7002
guard.sparkno=S7004
sparkxy = -20,-65
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-5
guard.velocity = -5
air.velocity=-1.5,-1
airguard.velocity = -5, -1
yaccel=.5
fall=1
air.fall=1
fall.recover=0
envshake.time=10
envshake.freq=120
envshake.ampl=4
kill = 0

[State 3211]
type=HitDef
trigger1=animelem=5
attr = A, HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(30)=1,10,ifelse(var(30)=2,8,ifelse(var(25)<=2,30,5)))
getpower=0
givepower=10,5
priority=6,Hit
guardflag=HA
hitflag=MAF
pausetime =3,3
sparkno=S7002
guard.sparkno=S7004
sparkxy = -20,-55
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-5
guard.velocity = -5
air.velocity=-1.5,-1
airguard.velocity = -5, -1
yaccel=.5
fall=1
air.fall=1
fall.recover=0
envshake.time=10
envshake.freq=120
envshake.ampl=4
kill = 0

[State 3211]
type=HitDef
trigger1=animelem=8
attr = A, HA
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(30)=2,8,ifelse(var(25)<=2,30,5))
getpower=0
givepower=10,5
priority=6,Hit
guardflag=HA
hitflag=MAF
pausetime =8,8
sparkno=S7002
guard.sparkno=S7004
sparkxy = -20,-65
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-5
guard.velocity = -5
air.velocity=-1.5,-1
airguard.velocity = -5, -1
yaccel=.5
fall=1
air.fall=1
fall.recover=0
envshake.time=10
envshake.freq=120
envshake.ampl=4
kill = 0

[State 3211]
type=HitDef
trigger1=animelem=10
attr = A, HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(30)=2,8,ifelse(var(25)<=2,30,5))
getpower=0
givepower=10,5
priority=6,Hit
guardflag=HA
hitflag=MAF
pausetime =3,3
sparkno=S7002
guard.sparkno=S7004
sparkxy = -20,-70
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-5
guard.velocity = -5
air.velocity=-1.5,-1
airguard.velocity = -5, -1
yaccel=.5
fall=1
air.fall=1
fall.recover=0
envshake.time=10
envshake.freq=120
envshake.ampl=4
kill = 0

[State 3211]
type=HitDef
trigger1=animelem=13
attr = A, HA
animtype=Medium
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(30)=2,8,ifelse(var(25)<=2,30,5))
getpower=0
givepower=10,5
priority=6,Hit
guardflag=HA
hitflag=MAF
pausetime =3,3
sparkno=S7002
guard.sparkno=S7004
sparkxy = -20,-55
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-5
guard.velocity = -5
air.velocity=-1.5,-1
airguard.velocity = -5, -1
yaccel=.5
fall=1
air.fall=1
fall.recover=0
envshake.time=10
envshake.freq=120
envshake.ampl=4
kill = 0

[State 3211]
type=HitDef
trigger1=animelem=16
attr = A, HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(30)=2,8,ifelse(var(25)<=2,30,5))
getpower=0
givepower=10,5
priority=6,Hit
guardflag=HA
hitflag=MAF
pausetime =5,5
sparkno=S7002
guard.sparkno=S7004
sparkxy = -20,-75
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-5
guard.velocity = -5
air.velocity=-1.5,-1
airguard.velocity = -5, -1
yaccel=.5
fall=1
air.fall=1
fall.recover=0
envshake.time=10
envshake.freq=120
envshake.ampl=4
kill = 0

[State 3211]
type=HitDef
trigger1=animelem=18
attr = A, HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(30)=2,8,ifelse(var(25)<=2,30,5))
getpower=0
givepower=10,5
priority=6,Hit
guardflag=HA
hitflag=MAF
pausetime =3,3
sparkno=S7002
guard.sparkno=S7004
sparkxy = -20,-95
hitsound=S0,10
guardsound=S0,13
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-5
guard.velocity = -5
air.velocity=-1.5,-1
airguard.velocity = -5, -1
yaccel=.5
fall=1
air.fall=1
fall.recover=0
envshake.time=10
envshake.freq=120
envshake.ampl=4
kill = 0

[State 3211]
type=HitDef
trigger1=Animelem=22
priority=6,Hit
attr=A,HA
guardflag=HA
hitflag=MAF
damage=25
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
damage=ifelse(var(30)=2,8,ifelse(var(25)<=2,30,5))
givepower=11,8 
pausetime=10,8
sparkno=S7001
guard.sparkno=S7004
sparkxy=-30,-78
hitsound=S0,9              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-2.5,-18
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=0,-10
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=28 
kill=0
envshake.time=14
envshake.freq=120
envshake.ampl=4
kill = 0

[State 3211]
type=HitDef
trigger1=Animelem=24
priority=6,Hit
attr=A,HA
guardflag=HA
hitflag=MAF
damage=ifelse(var(30)=1,10,ifelse(var(30)=2,8,30))
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=11,8 
pausetime=4,4
sparkno=S7001
guard.sparkno=S7004
sparkxy=-30,-98
hitsound=S0,10              
guardsound=S0,13
ground.slidetime=10
ground.hittime =16
ground.velocity=-8
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-7,-18
air.hittime=28
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=1
fall.recover=1
fall.recovertime=28
envshake.time=14
envshake.freq=120
envshake.ampl=4
forcestand=1

[State 3211]
type=StateTypeSet
trigger1=animelem=26
statetype=A              
physics=A

[State 3211, statetype]
type=statetypeset
trigger1=animelemtime(26)>=0
movetype=I

[State 3211]
type=ChangeState
trigger1=Pos Y>= 0
value=52
ctrl=1

;---------------------------------
;Cross Shadow Blitz Lvl2(start)
[Statedef 3250]
type=S
movetype=A
physics=N
anim=3250
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3250,wink]
type=PlaySnd
trigger1=time=28
value=1,8
channel=1

[State 3250]
type=PlaySnd
trigger1=animelem=6
value=0,14
channel=0

[State 3250]
type=PlaySnd
trigger1=animelem=4
value=1,6
channel=1

[State 3250, Vel]
type=velset
trigger1=animelem=1
trigger2=animelem=9
x=0
y=0

[State 3250, Vel]
type=posset
trigger1=1
y=0

[State 3250, Vel]
type=velset
trigger1=animelem>=4
trigger2=animelem<=5
x=15
y=0

[State 3250, Vel]
type=velset
trigger1=animelem>=6
trigger2=animelem<=8
x=.83
y=0

[State 3250, AfterImage]
type=AfterImage
trigger1=animelem=4
time=10
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=10
trans=add1
TimeGap=2
;FrameGap=2

[State 3250,wink superpause]
type=SuperPause
trigger1=Time=8
time=36
movetime=36
anim=7026
sound=s2000,0
;pos=0,0
darken=1
p2defmul=1
poweradd=-2000
unhittable=1

[State 3250,wink]
type=Explod
Anim=6008
trigger1=time=28
postype=P1
pos=-3,-90
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[state 3250, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=27 
add=-115,-115,-115
time=1
ignorehitpause=1
persistent=0

[State 3250]
type=NotHitBy
trigger1=animelem=4
value=SCA,AA,AP,AT
time=10

[State 3250]
type=HitDef
trigger1=time=0
attr=S,HT
hitflag=MAF
guardflag=MA 
damage=30
getpower=0
givepower=10
priority=6,Miss 
pausetime=7,7
ground.slidetime=20
ground.hittime=16
sparkno=S7002
guard.sparkno=S7004
sparkxy=-40,-85
hitsound=S0,9 
guardsound=S0,13   
p1facing=1 
p2facing=1         
p1stateno=3251                   
kill=0 

[State 3250]
type=ChangeState
trigger1=animtime=0
value=0
ctrl=1

;---------------------------------
;Cross Shadow Blitz Lvl2
[Statedef 3251]
type=S
movetype=A
physics=N
anim=3251
velset=0,0
ctrl=0
poweradd=0
sprpriority=0

[State 3251, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3251]
type=PlaySnd
trigger1=animelem=24
value=2,15
channel=2

[State 3251, Vel]
type=velset
trigger1=time=0
x=0
y=0

[State 3251, Vel]
type=posset
trigger1=time=0
y=0

[State 3251, Vel]
type=posadd
trigger1=Animelem=15
x=10

[State 3251, Vel]
type=posadd
trigger1=Animelem=18
x=20

[State 3251, Vel]
type=posadd
trigger1=Animelem=22
x=15

[State 3251]
type=null;ScreenBound
trigger1=time>=45
value=0

[State 3251, AfterImage]
type=AfterImage
trigger1=Time=0
time=60
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=9
trans=add1
TimeGap=2
FrameGap=4

[State 3251, HitAdd]
type=HitAdd
trigger1=Animelem=3
value=1
persistent=0

[State 3251]
type=HitDef
trigger1=Animelem=3
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
;damage=30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=10,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-20
hitsound=S0,8               
guardsound=S0,13
ground.slidetime=36
ground.hittime=36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
kill=0
forcestand=1  

[State 3251]
type=HitDef
trigger1=Animelem=6
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
;damage=30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-105
hitsound=S0,10               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
kill=0
forcestand=1 

[State 3251]
type=HitDef
trigger1=Animelem=9
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
;damage=30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-65
hitsound=S0,10               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
kill=0
forcestand=1 

[State 3251]
type=HitDef
trigger1=Animelem=12
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
;damage=30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-4
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
kill=0
forcestand=1 

[State 3251]
type=HitDef
trigger1=Animelem=14
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
;damage=30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=11,8 
pausetime=1,1
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
kill=0
forcestand=1 

[State 3251]
type=HitDef
trigger1=Animelem=17
priority=3,Hit
attr = C, HA    
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
;damage =30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
getpower = 0                  
givepower = 15,8
hitflag = MAFD
guardflag = L
pausetime =1,1
hitsound   = S0,9
guardsound=S0,13
sparkno=S7001
guard.sparkno=S7004
sparkxy = -5,-10
ground.slidetime = 36
ground.hittime  = 36
ground.velocity = -1
air.velocity = -1,-2
guard.velocity = -8
guard.slidetime = 13
guard.hittime = 13
airguard.velocity = -2
ground.cornerpush.veloff =0
yaccel=.5
fall=0
air.fall=0
kill=0
forcestand=1

[State 3251]
type=HitDef
trigger1=Animelem=21
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
;damage=30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
getpower=0
givepower=11,8 
pausetime=4,4
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
kill=0
forcestand=1 

[State 3251]
type=HitDef
trigger1=Animelem=22
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
;damage=30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=0
givepower=11,8 
pausetime=3,3
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=36
ground.hittime =36
ground.velocity=-1
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-2,-2
air.hittime=32
ground.cornerpush.veloff=0
yaccel=.5
fall=0
air.fall=0
kill=0
forcestand=1

[State 3251]
type=HitDef
trigger1=Animelem=25
priority=3,Hit
attr=S,HA
guardflag=MA
hitflag=MAF
;damage=30
damage=ifelse(var(25)=4,25,ifelse(var(25)=3,10,ifelse(var(25)=2,20,30))),3
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
getpower=0
givepower=11,8 
pausetime=3,3
sparkno=S7002
guard.sparkno=S7004
sparkxy=-20,-98
hitsound=S0,9               
guardsound=S0,13
ground.slidetime=16
ground.hittime =16
ground.velocity=-2
guard.slidetime=11
guard.hittime=11
airguard.velocity=-6
air.velocity=-1,-2
air.hittime=12
ground.cornerpush.veloff=0
yaccel=.5
fall.recover=0    
air.juggle=1      
air.fall=0         
fall=0    
kill=0 
p2facing=1        

[State 3251]
type=ChangeState
trigger1=animtime=0
value=3252
ctrl=0

;-----------------------------------------
;Crouching Strong punch
[Statedef 3252]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
velset= vel x*(prevstateno=[100,106]),0
anim = 3252
sprpriority = 2

[State 3252, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,105]
trigger1 = Time = 0
x = 0
y = 0

[State 3252]
type=PlaySnd
trigger1=Animelem=1
trigger1=random>=500
value=2,15
channel=2

[State 3252]
type=PlaySnd
trigger1=Animelem=1
value=0,3

[State 3252]
type=null;PosAdd
trigger1=animelem=1
x=4

[State 3252]
type=null;PosAdd
trigger1=animelem=2
x=18

[State 3252]
type=null;PosAdd
trigger1=animelem=6
x=3

[State 3252, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3252]
type=HitDef
trigger1=Animelem=2
priority=5,Hit
attr = C, HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
;damage =50
damage=ifelse(var(25)=4,40,ifelse(var(25)=3,20,ifelse(var(25)=2,35,50))),3
getpower = 0
givepower = 15,8
guardflag = MA
hitflag = MAFD
pausetime = 10,2
sparkno=S7003
guard.sparkno=S7004
sparkxy = -45,-95
hitsound   = S0,7
guardsound=S0,12
ground.slidetime = 21
ground.hittime  = 24
ground.velocity = -10.5
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -10
guard.velocity = -10
air.velocity = -8,-4
yaccel=.5
fall=0
air.fall=0
fall.recover=1
fall.recovertime=25
kill=0
P1stateno=3253
P2Stateno=3255

[State 3252]
type=VarSet
trigger1=movehit&&var(26)=1
trigger2=numtarget&&var(26)=1
var(26)=1

[State 3252]
type=VarSet
triggerall=var(25)=[1,2]
trigger1=movehit
trigger2=numtarget
var(30)=2

[State 3252]
type=StateTypeSet
trigger1=animelem=3
statetype=C      
movetype=I        
physics=C

[State 3252]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------
; Super jump start
[StateDef 3253]
type = S
physics = S
anim = 3253
ctrl = 0

[State 3253]
type=PlaySnd
trigger1=Animelem=2
value=1,29
channel=1

[State 3253]
type = turn
triggerall = p2dist X <= -3
trigger1 = time >= 0

[State 3253, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3253]
type = ChangeState
trigger1 = AnimTime = 0
value = 3254
ctrl = 0

;-----------------------------
;Super jump 2
[StateDef 3254]
type = A
physics = A
anim = 41
ctrl = 0
velset = 3, -30.9

[State 3254]
type=ScreenBound
trigger1=1
value=0

[State 3254]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3254]
type = turn
trigger1 = p2dist X <= -3
trigger1 = time >= 0

[State 3254, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3254]
type=null;PlaySnd
trigger1=Time=0
value=1,11

[State 3254, AfterImage]
type=AfterImage
trigger1=Time=0
time=15
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=15
trans=add1
TimeGap=1

[State 3254]
type=Explod
Anim=7008
trigger1=time=0
postype=P1
pos=0,15
removetime=19
bindtime=1
removeongethit=1
sprpriority=1
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3254]
type = Changestate
;triggerall = time >= 15
triggerall= p2life != 0
;triggerall = anim = 41
trigger1 = p2bodydist y >=-200
trigger2 = time >= 7
value = 3256

;---------------------------
;Crouching Heavy Punch p2 Launched State
[Statedef 3255]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 3255]
type = ChangeAnim2
trigger1 = Time = 0
value = 429

[State 3255]
type=ScreenBound
trigger1=1
value=0

[State 3255]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3255]
type = VelSet
trigger1 = AnimElem = 2
y = -22

[State 3255]
type = VelAdd
trigger1 = AnimElem = 2,>= 0
y = .5

[State 3255]
type = VelSet
trigger1 = !Alive
x = -.5
y = -8

[State 3255]
type = SelfState 
trigger1 = Time > 30
trigger1 = Vel Y >= 0
value = 5040
ctrl = 1

[State 3255]
type = SelfState
trigger1 = !Alive
value = 5050

;---------------------------------------
;AIR THROW BACKBREAKER
[Statedef 3256]
type = A
movetype= A
physics = N
anim = 3256
sprpriority=1
poweradd = 0
ctrl = 0

[State 3256]
type=ScreenBound
trigger1=1
value=0

[State 3256]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3256]
type=PlaySnd
trigger1=AnimElem=2
value=0,0

[State 3256]
type=PlaySnd
trigger1=AnimElem=3
value=2,5
channel=2

[State 3256, Don't Guard]
type=attackdist
trigger1=1
value=0

[State 3256]
type = turn
trigger1 = p2dist X <= -1
trigger1 = time = 0

[State 3256]
type = HitDef
trigger1=time=0
attr=A,HT
hitflag=AF
guardflag=-
damage=0
getpower=0
givepower=40
priority=1, Hit 
pausetime=0,6
;snap = -40, 0, 0
sparkno=S7014
guard.sparkno=S7018
sparkxy=-40,-85
;hitsound = S800,0    
p1facing = 1 
p2facing = 1         
p1stateno = 3257   
p2stateno = 3259             
fall = 1   
fall.damage = 0   
kill = 0
fall.kill = 1        

[State 3256, grav]
type=gravity
trigger1= 1

[State 3256, Land]
type=changestate
trigger1= vel y>0 && pos y>=0
value=52

;---------------------------------------
; Air Throw Backbreaker P1 Air State
[Statedef 3257]
type=A
physics=N
movetype=A
anim=855
ctrl=0
velset=ifelse(vel x>4,4,ifelse(vel x<-4,-4,vel x)),0
sprpriority=1

[State 3257]
type=PlaySnd
trigger1=Time=50
value=1,30
channel=1

[State 3257]
type=ScreenBound
trigger1=1
value=0

[State 3257]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3257]
type = PosFreeze
trigger1 = Time < 90
x = 1
y = 1

[State 3257, throw]
type=targetstate
trigger1= !time && numtarget
value=3259

[State 3257, throw]
type=targetfacing
trigger1= time<=1
value=1

[State 3257, Pos]
type=posset
trigger1= pos y>0 && animelemtime(2)<0
y=0

[State 3257, Pos]
type=posfreeze
trigger1= animelemtime(2)<0
value=1

[State 3257, Vel]
type=velset
trigger1= animelem=2
y=-1

[State 3257, Vel]
type=veladd
trigger1= animelemtime(2)>=0
y=.5

[State 3257, Bind]
type=targetbind
trigger1= numtarget
pos=ceil(4*const(size.xscale)),ceil(-113*const(size.yscale))

[State 3257, Snd]
type=null;playsnd
trigger1= animelem=2
value=2,19
channel=2

[State 3257, AfterImage]
type=AfterImage
trigger1=Time=0
time=100
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=10
trans=add1
TimeGap=1

[State 3257, End]
type=changestate
trigger1= vel y>0 && pos y>=0
value=3258

;---------------------------------------
; Air Throw Backbreaker P1 Ground Landing State
[Statedef 3258]
type=C
physics=N
movetype=A
anim=856
ctrl=0
velset=0,0
sprpriority=1

[State 3258, Snd]
type=playsnd
trigger1= !time
value=1,31
channel=2

[State 3258, Snd]
type=null;playsnd
trigger1= !time
value=2,14
channel=2

[State 3258, Snd]
type=playsnd
trigger1= !time
value=1,0
channel=0

[State 3258, throw]
type=targetstate
trigger1= numtarget && !time
value=3260

[State 3258, throw]
type=targetstate
trigger1= numtarget && animelem=2
value=3261

[State 3258, Pos]
type=posset
trigger1= !time
y=0

[State 3258, Hit]
type=hitadd
trigger1= !time
value=1

[State 3258]
type=Explod
anim=7010
trigger1=Time=0
postype=P1
pos=0,0
persistent=0
sprpriority=-2
pausemovetime=999
supermovetime=999

[State 3258]
type=Explod
anim=7012
trigger1=Time=0
postype=P1
pos=0,0
persistent=0
sprpriority=3
pausemovetime=999
supermovetime=999

[State 3258]
type=Explod
anim=7012
trigger1=Time=0
postype=P1
pos=0,0
persistent=0
sprpriority=-3
scale=1.5,1.5
pausemovetime=999
supermovetime=999

[State 3258, Sparks]
type=explod
trigger1= !time
anim=7001
sprpriority=5
postype=p1
pos=ceil(3*const(size.xscale)),ceil(-64*const(size.yscale))
facing=-1
ownpal=1
pausemovetime=-1
supermovetime=-1
ignorehitpause=1

[State 3258, shake]
type=envshake
trigger1= !time
time=14
ampl=-7

[State 3258, Bind]
type=targetbind
trigger1= numtarget && animelemtime(2)<0
pos=ceil(3*const(size.xscale)),ceil(-48*const(size.yscale))

[State 3258, damage]
type=targetlifeadd
trigger1= !time
value=ifelse(var(25)=4,-40,ifelse(var(25)=3,-10,ifelse(var(25)=2,-35,-50)))

[State 3258, givepower]
type=targetpoweradd
trigger1= !time
value=30

[State 3258, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;---------------------------------------
; Air Throw Backbreaker P2 Air State
[Statedef 3259]
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0

[State 3259, Anim]
type=changeanim2
trigger1= !time
value=860

[State 3259, camera]
type=screenbound
trigger1= 1
value=0
movecamera=0,0

[State 3259]
type=AssertSpecial
trigger1=1
flag=noshadow

;---------------------------------------
; Air Throw Backbreaker P2 Air State
[Statedef 3260]
type=A
physics=N
movetype=H
ctrl=0
velset=0,0
sprpriority=0

[State 3260, Anim]
type=changeanim2
trigger1= !time
value=861

[State 3260, camera]
type=screenbound
trigger1= 1
value=0
movecamera=0,0

[State 3260]
type=AssertSpecial
trigger1=1
flag=noshadow

;---------------------------------------
; Air Throw Backbreaker P2 Ground State
[Statedef 3261]
type=A
physics=N
movetype=H
ctrl=0
velset=0,0
sprpriority=0

[State 3261, Anim]
type=changeanim
trigger1= !time
value=ifelse(selfanimexist(5035),5035,5030)

[State 3261, Anim]
type=changeanim
trigger1= (anim=[5030,5035]) && !animtime
value=5050

[State 3261, Vel]
type=velset
trigger1= !time
x=3.88
y=-7.5

[State 3261, grav]
type=veladd
trigger1= 1
y=.5

[State 3261, recover]
type=selfstate
trigger1= command="recovery"
trigger1= alive && time>=18
value=ifelse((pos y>=-20),5200,5210)

[State 3261, End]
type=selfstate
trigger1= vel y>0 && pos y>=0
value=5100

;---------------------------------
;Final Mission
[Statedef 3400]
type=S
movetype=A
physics=S
ctrl=0
anim=3400
velset=0,0
sprpriority=2

[State 3400,wink]
type=PlaySnd
trigger1=time=3
value=1,8
channel=1

[State 3400]
type=PlaySnd
trigger1=time=20
value=1000,4
channel=0

[State 3400]
type=PlaySnd
trigger1=time=23
value=2,15
channel=2

[State 3400]
type=PosAdd
trigger1=animelem=2
x=35

[State 3400]
type=NotHitBy
trigger1=time<10
value=SCA
time=1

[State 3400]
type=NotHitBy
trigger1=time=[20,29]
value=,AP,AT
time=1

[State 3400, Corner Push]
type= varset
trigger1= fvar(5)
trigger1= time<=20
fvar(5)= 0

[State 3400]
type=SuperPause
trigger1=Time=18
time=40
anim=7026
sound=s2000,0
;pos=0,0
darken=1
p2defmul=1
poweradd=-2000
unhittable=1

[State 3400, wink]
type=Explod
Anim=6008
trigger1=time=4
postype=P1
pos=30,-58
;removetime=9
bindtime=1
removeongethit=1
sprpriority=4
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3400, bd]
type=Explod
Anim=6011
trigger1=time=18
postype=Left
pos=0,0
;removetime=9
bindtime=-1
removeongethit=1
sprpriority=-4
ownpal=1
scale=1.1,1.1
persistent=0
pausemovetime=999
supermovetime=999
ID=6011

[State 3400, Remove BG] 
type=RemoveExplod
trigger1=animelem=3 
ID=6011

[state 3400, Blackout]
type=PalFx
trigger1=var(19)=1
trigger1=time=18 
add=-115,-115,-115
time=2
ignorehitpause=1
persistent=0

[State 3400]
type=velset
trigger1=time=[20,29]
x=15
y=0

[State 3400]
type=velset
trigger1=time=[30,40]
x=3.5
y=0

[State 3400]
type=velset
trigger1=time=41
x=0
y=0

[State 3400]
type=posset
trigger1=1
y=0

[State 3200, AfterImage]
type=AfterImage
trigger1=animelem=2
time=10
PalBright=1,1,1
PalContrast=128,128,128
PalAdd=0,0,0
PalMul=.5,.5,.5
length=10
trans=add1
TimeGap=2
;FrameGap=2

[State 3400]
type=HitDef
trigger1=time=0
attr=S,HA
hitflag=MA
guardflag=MA
damage=50
getpower=0
givepower=40
priority=7,Miss 
pausetime=0,8
snap=50,0,0
sparkno=-1
guard.sparkno=S7004
sparkxy=-20,-80
hitsound=S800,0  
guardsound=S0,13  
p1facing=1 
p2facing=1         
p1stateno=3401 
p2stateno=3407
kill=0  
               
[State 3400]
type=StateTypeSet
trigger1=animelem=4
statetype=C      
movetype=I        
physics=C

[State 3400]
type=ChangeState
trigger1=Animtime=0
value=0
ctrl=1

;---------------------------------
;Final Mission P1 State
[Statedef 3401]
type=S
movetype=A
physics=S
ctrl=0
anim=3401
velset=0,0
sprpriority=2

[State 3401]
type=width
trigger1=Time=[0,5]
value=5,0

[State 3401]
type=HitDef
trigger1=animelem=3
priority=5,Hit
attr=S,HA
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Low
air.type=Low
pausetime=8,2
sparkno=S7003
guard.sparkno=S7004
sparkxy=-50,-95
getpower=0
givepower=15,8
hitsound=S0,7
guardsound=S0,13
P1stateno=3402
P2Stateno=3405

[State 3401]
type=null;ChangeState
triggerall=animelem=4
trigger1=P2stateno=3405
value=3402

[State 3401]
type=ChangeState
trigger1=Animtime=0
value=3402
ctrl=0

;---------------------------
;Final Mission Super jump start
[StateDef 3402]
type=S
physics=S
anim=3402
ctrl=0

[State 3402]
type=turn
triggerall=p2dist X <=-3
trigger1=time >=0

[State 3402]
type=ChangeState
trigger1=AnimTime=0
value=3403
ctrl=0
;-----------------------------
;Final Mission Super jump up
[StateDef 3403]
type=A
;movetype=A
physics=N
anim=41
ctrl=0
velset=2.5,-15.9

[State 3403]
type=PlaySnd
trigger1=Time=0
value=1,11

[State 3403]
type=Explod
Anim=7008
trigger1=time=0
postype=P1
pos=0,15
removetime=19
bindtime=1
removeongethit=1
sprpriority=1
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 3403]
type=envcolor
trigger1=time=11
time=67
value=0,0,0

[State 3403]
type=Changestate
trigger1=time >=12
value=3404
ctrl=0

;---------------------------
;Final Mission End
[StateDef 3404]
type=S
physics=S
anim=3404
ctrl=0

[State 3404]
type=turn
Trigger1=Time=0

[State 3404]
type=Posset
trigger1=time=0
y=0

[State 3404]
type=PosAdd
trigger1=time=0
x=-150

[State 3404]
type=Velset
trigger1=1
x=0
y=0

[State 3404]
type=hitadd
trigger1=time=4||time=8||time=12||time=16||time=20||time=24||time=28||time=32||time=36||time=40
trigger2=time=44||time=48||time=52
value=1

[State 3404]
type=hitadd
trigger1=(P2StateNo=3406)&&(P2MoveType=H)&&(P2BodyDist Y >=0)&&(NumExplod(6010)<1)
value=1

[State 3404]
type=playsnd
trigger1=time=4||time=8||time=12||time=16||time=20||time=24||time=28||time=32||time=36||time=40
trigger2=time=44||time=48||time=52
value=0,6

[State 3404]
type=envshake
trigger1=time=4||time=8||time=12||time=16||time=20||time=24||time=28||time=32||time=36||time=40
trigger2=time=44||time=48||time=52
time=3
freq=90
ampl=-4

[State 3404]
type=envshake
triggerall=time>=50
trigger1=P2bodydist y =[-25,-5]
time=15
freq=90
ampl=-8

[State 3404, fadein from black]
type=AllPalFX
trigger1=Time=65
time=24
add=-255,-255,-255
sinadd=255,255,255,120

[State 3404]
type=Explod
Anim=6009
trigger1=time=4||time=32||time=40
postype=Left
pos=100,75
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=Explod
Anim=6009
trigger1=time=8||time=44
postype=Left
pos=50,150
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=Explod
Anim=6009
trigger1=time=12
postype=Left
pos=200,75
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=Explod
Anim=6009
trigger1=time=16
postype=Left
pos=50,25
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=Explod
Anim=6009
trigger1=time=20||time=52
postype=Left
pos=250,75
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=Explod
Anim=6009
trigger1=time=24||time=36
postype=Left
pos=150,125
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=Explod
Anim=6009
trigger1=time=28
postype=Left
pos=50,150
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=Explod
Anim=6009
trigger1=time=48
postype=Left
pos=50,175
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=Explod
trigger1=(P2StateNo=3406)&&(P2MoveType=H)&&(P2BodyDist Y >=0)&&(NumExplod(6010)<1)
Anim=6010
ID=6010
postype=P2
pos=0,0
sprpriority=5
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 3404]
type=playsnd
triggerall=time>=50
trigger1=P2bodydist y=[-25,-5]
value=1,3

[State 3404]
type=Changestate
triggerall=P2life=0
trigger1=time=120
value=185
ctrl=1

[State 3404]
type=Changestate
triggerall=P2life!=0
trigger1=time=120
value=3408
ctrl=0

;---------------------------
;Final Mission p2 Launched State
[Statedef 3405]
type=A
movetype=H
physics=N
velset=0,0
ctrl=0

[State 3405]
type=ChangeAnim2
trigger1=Time=0
value=429

[State 3405]
type=ChangeAnim2
trigger1=Time=50
value=3405

[State 3405]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 3405]
type=ScreenBound
trigger1=1
value=0

[State 3405]
type=ScreenBound
trigger1=Pos Y >=-200
value=1

[State 3405]
type=VelSet
trigger1=AnimElem=2
y=-13.8

[State 3405]
type=LifeAdd
trigger1=Time=50
kill=0
absolute=1
value=-300

[State 3405]
type=VelSet
trigger1=time=50
y=15

[State 3405]
type=PosAdd
trigger1=time=50
x=100

[State 3405]
type=Gravity
trigger1=time>=50

[State 3405]
type=ChangeState
triggerall=time>=50
trigger1=vel Y>0
trigger1=pos Y>=-10
value=3406

;---------------------------------------------------
;Final Mission P2 Lie on the ground
[Statedef 3406]
type=L
movetype=H
physics=N
velset=0,0
ctrl=0

[State 3406]
type=LifeAdd
trigger1=Time=0
kill=1
absolute=1
value=-50

[State 3406]
type=PosSet
trigger1=Time=0
y=0

[State 3406]
type=ChangeAnim
Trigger1=1
value=5110

[State 3406]
type=SelfState
triggerall=!Alive
trigger1=Time<=95
value=5080

[State 3406]
type=SelfState
triggerall=Alive
trigger1=Time=125
value=5120

;---------------------------------------------------
;Final Mission P2 First Hit
[Statedef 3407]
type=S
movetype=H
physics=N
velset=0,0
ctrl=0

[State 3407]
type=ChangeAnim2
trigger1=Time=0
value=3407

[State 3407]
type=PosSet
trigger1=time=0
y=0

[State 3407]
type=Selfstate
trigger1=time=100
value=0
ctrl=1

;---------------------------
;Final Mission Taunt End
[StateDef 3408]
type=S
physics=S
anim=3408
ctrl=0

[State 3408]
type=PosSet
trigger1=1
y=0

[State 3408]
type=ChangeState
trigger1=AnimTime=0
value=0
ctrl=1
;===============================================================================================
;                                             PARRY STATES
;===============================================================================================
;This block of code is edited from Mr. Fong so give him credit for his work
;Standing Parry
[Statedef 4000]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
anim = 125
facep2 = 1
sprpriority = 2

[State 4000, 1]
type = posset
trigger1 = 1
y = 0

[State 4000, 1]
type = PowerAdd
trigger1 = time = 0
value = 100

[State 4000, 2]
type=pause
trigger1=!time
time=15
movetime=15

[State 4000, 3]
type = HitBy
trigger1=time=[0,10]
time=1
value=SCA,AT

[State 4000, 3a]
type=posfreeze
trigger1=time=[0,10]
value=1

[State 4000, 4]
type = PalFX
trigger1 = time = 0
add = 80, 80, 255
sinadd= -80 ,-80, -255, 60
time = 10

[State 4000, 6]
type=Playsnd
trigger1=Time=1
value=4000,0

[State 4000]
type=Explod
Anim=7014
trigger1=time=2
postype=P1
pos=55,-98
bindtime=1
removeongethit=1
sprpriority=3
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 4000, debug]
type = assertspecial
trigger1 = time <= 11
flag = nowalk
flag2 = nostandguard
flag3 = nocrouchguard

[State 4000, CtrlSet]
type = CtrlSet
trigger1 = animelem = 4,=0
value = 1

[State 4000, 4]
type = ChangeState
triggerall = command = "holdback"
triggerall = inguarddist
trigger1 = animelem = 4,=0
value = 120

[State 4000, 4]
type = ChangeState
triggerall=var(20)=20
triggerall=p2bodydist X=[-20,20]
triggerall=P2life!=0
trigger1=animelem=4,=0
value = ifelse(random>=500,1100,120)

[State 4000, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching Parry
[Statedef 4010]
type    = C
movetype = I
physics = C
ctrl = 0
velset = 0,0
anim = 126
facep2 = 1
sprpriority = 2

[State 4010, Effect]
type =null; BGpalfx
trigger1 = time = 0
add = 256, 256, 256
sinadd = 256 ,256, 256, -28
color = 256
time = 7
ignorehitpause = 1

[State 4010, 1]
type = posset
trigger1 = 1
y = 0

[State 4010, 1]
type = PowerAdd
trigger1 = time = 0
value = 100

[State 4010, 2]
type=pause
trigger1=!time
time=15
movetime=15

[State 4010, 3]
type = HitBy
trigger1=time=[0,10]
time=1
value=SCA,AT

[State 4010, 3]
type=posfreeze
trigger1=time<=10
value=1

[State 4010, 4]
type = PalFX
trigger1 = time = 0
add = 80, 80, 255
sinadd= -80 ,-80, -255, 60
time = 15

[State 4010, 5]
type = Playsnd
trigger1 = Time = 0
value = 2,13

[State 4010, 5]
type=Playsnd
trigger1=Time=1
value=4000,0

[State 4010]
type=Explod
Anim=7014
trigger1=time=2
postype=P1
pos=70,-78
bindtime=1
removeongethit=1
sprpriority=3
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 4010, debug]
type = assertspecial
trigger1 = time <= 11
flag = nowalk
flag2 = nostandguard
flag3 = nocrouchguard

[State 4010, 4]
type=ChangeState
triggerall=var(20)=20
triggerall=p2bodydist X=[-20,50]
triggerall=time=[8,11]
trigger1=P2life!=0
value=ifelse(random<=500,1000,ifelse(random>=800,430,131))

[State 4010, 4]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Aerial Parry
[Statedef 4020]
type    = A
movetype = I
physics = A
ctrl = 0
anim = 127
facep2 = 1
sprpriority = 2

[State 4020, Effect]
type =null; BGpalfx
trigger1 = time = 0
add = 256, 256, 256
sinadd = 256 ,256, 256, -28
color = 256
time = 7
ignorehitpause = 1

[State 4020, Debug]
type =null; Turn
trigger1 = time = 0
trigger1 = p2bodydist x < 0

[State 4020]
type=statetypeset
trigger1=time<=10
physics=N

[State 4020, 3]
type = HitBy
trigger1=time=[0,10]
time=1
value=SCA,AT

[State 4020, 3]
type=posfreeze
trigger1=time<=10
value=1

[State 4020]
type=statetypeset
trigger1=time>10
physics=A

[State 4020, 1]
type = PowerAdd
trigger1 = time = 0
value = 100

[State 4020, 2]
type=pause
trigger1=!time
time=15
movetime=15

[State 4020, 4]
type = PalFX
trigger1 = time = 0
add = 80, 80, 255
sinadd= -80 ,-80, -255, 60
time = 15

[State 4020, 5]
type = Playsnd
trigger1 = Time = 0
value = 2,13

[State 4020, 6]
type=Playsnd
trigger1=Time=1
value=4000,0

[State 4020]
type=Explod
Anim=7014
trigger1=time=2
postype=P1
pos=70,-98
bindtime=1
removeongethit=1
sprpriority=3
ownpal=1
scale=1,1
persistent=0
pausemovetime=999
supermovetime=999

[State 4020, debug]
type = assertspecial
trigger1 = time <= 11
flag = noairguard

[State 4020, 4]
type=ChangeState
triggerall=var(20)=20
triggerall=p2bodydist X =[-20,20]
triggerall=P2life!=0
trigger1=time>=8
value=ifelse((p2bodydist Y =[-50,0]),850,ifelse(p2statetype!=A,1202,132))
ctrl=0

[State 4020, 4]
type = CtrlSet
trigger1 = animelem = 3,=0
value = 1

[State 4020, 4]
type = ChangeState
triggerall = command = "holdback"
triggerall = inguarddist
trigger1 = animelem = 3,=0
value = 120

[State 4020, 4]
type = ChangeState
trigger1 = animtime = 0
value = 4030

;---------------------------------------------------------------------------
;Aerial Parry Debug
[Statedef 4030]
type    = A
physics = N
ctrl = 1

[State 4030, 1]
type = VelSet
trigger1 = Time = 0
y = -.5

[State 4030, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 41

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
persistent = 0
value = Anim + 3

[State 4030, 4]
type = VelAdd
trigger1 = Time >= 0
y = .4

[State 4030, ChangeState]
type = ChangeState
trigger1 = Pos Y > 0
value = 52

;================================================================================================
;                                         SF3 LIFEBARS
;================================================================================================
;Lifebar
[Statedef 4100]
type=S
anim=4100
sprpriority=5

[State 4100]
type=VarSet
trigger1=power=[0,999]
var(15)=0

[State 4100]
type=VarSet
trigger1=power=[1000,1999]
var(15)=1

[State 4100]
type=VarSet
trigger1=power=[2000,2999]
var(15)=2

[State 4100]
type=VarSet
trigger1=power>=3000
var(15)=3

[State 4100]
type=removeexplod
trigger1= numexplod(7032)=1
trigger1= var(15)!=0
ID=7032

[State 4100]
type=removeexplod
trigger1= numexplod(7033)=1
trigger1= var(15)!=1
ID=7033

[State 4100]
type=removeexplod
trigger1= numexplod(7034)=1
trigger1= var(15)!=2
ID=7034

[State 4100]
type=removeexplod
trigger1= numexplod(7035)=1
trigger1= var(15)!=3
ID=7035

[State 4100]
type=removeexplod
trigger1= numexplod(7037)=1
trigger1= var(15)!=0
ID=7037

[State 4100]
type=removeexplod
trigger1= numexplod(7038)=1
trigger1= var(15)!=1
ID=7038

[State 4100]
type=removeexplod
trigger1= numexplod(7039)=1
trigger1= var(15)!=2
ID=7039

[State 4100]
type=removeexplod
trigger1= numexplod(7040)=1
trigger1= var(15)!=3
ID=7040

[State 4100]
type=Explod
triggerall=TeamSide=1
trigger1= var(15)=0 && numexplod(7032)=0
trigger2= var(15)=1 && numexplod(7033)=0
trigger3= var(15)=2 && numexplod(7034)=0
trigger4= var(15)=3 && numexplod(7035)=0
anim=7032+var(15)
ID=7032+var(15)
pos=124,233
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
ontop=1
scale=1,1

[State 4100]
type=Explod
triggerall=TeamSide=2
trigger1= var(15)=0 && numexplod(7037)=0
trigger2= var(15)=1 && numexplod(7038)=0
trigger3= var(15)=2 && numexplod(7039)=0
trigger4= var(15)=3 && numexplod(7040)=0
anim=7037+var(15)
ID=7037+var(15)
pos=-127,233
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
ontop=1
scale=1,1

[State 4100]
type=Explod
triggerall=TeamSide=1
trigger1= numexplod(7036)=0
anim=7036
ID=7036
pos=124,233
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
ontop=1
sprpriority=4
scale=1,1

[State 4100]
type=Explod
triggerall=TeamSide=2
trigger1= numexplod(7041)=0
anim=7041
ID=7041
pos=-126,233
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
ontop=1
sprpriority=4
scale=1,1

[State 4100]
type = modifyexplod
trigger1= var(15)=0
scale= power / 1000.0, 1
ID=7036

[State 4100]
type = modifyexplod
trigger1= var(15)=1
scale= (power-1000) / 1000.0, 1
ID=7036

[State 4100]
type = modifyexplod
trigger1= var(15)=2
scale= (power-2000) / 1000.0, 1
ID=7036

[State 4100]
type = modifyexplod
trigger1= var(15)=3
scale= 1, 1
ID=7036

[State 4100]
type = modifyexplod
trigger1= var(15)=0
scale= power / 1000.0, 1
ID=7041

[State 4100]
type = modifyexplod
trigger1= var(15)=1
scale= (power-1000) / 1000.0, 1
ID=7041

[State 4100]
type = modifyexplod
trigger1= var(15)=2
scale= (power-2000) / 1000.0, 1
ID=7041

[State 4100]
type = modifyexplod
trigger1= var(15)=3
scale= 1, 1
ID=7041

;[State 4100,invisable]
;type = ModifyExplod
;triggerall = NumExplod(7032)
;trigger1 = parent,var(13)
;Id = 7032
;scale = 0,0
;ignorehitpause = 1
;================================================================================================
;                                 NORMAL ATTACK KO HELPER STATE
;================================================================================================
;NORMAL ATTACK KO HELPER STATE
[Statedef 4200]
type=S
velset=0,0
anim=9741

[State 4200]
type=parentVarSet
trigger1=time=0
var(58)=-2

[State 4200]
type=Pause
triggerall=Parent,stateno!=420
trigger1=(Time%2)=0
trigger1=Time<=5
time=4

[State 4200]
type=PlaySnd
triggerall=time = 0
trigger1=Parent,stateno=[200,205]
trigger2=Parent,stateno=400
trigger3=Parent,stateno=600
trigger4=Parent,stateno=601
value=s0,25
volume=255

[State 4200]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=[210,215]
trigger2=Parent,stateno=410
trigger3=Parent,stateno=610
trigger4=Parent,stateno=611
value=s0,26
volume=255

[State 4200]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=[220,225]
trigger2=Parent,stateno=620
trigger3=Parent,stateno=621
value=s0,27
volume=255

[State 4200]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=420
trigger2=Parent,stateno=260
trigger3=Parent,stateno=246
value=s0,28
volume=255

[State 4200]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=[230,235]
trigger2=Parent,stateno=430
trigger3=Parent,stateno=630
value=s0,29
volume=255

[State 4200]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=[240,246]
trigger2=Parent,stateno=440
trigger3=Parent,stateno=640
value=s0,30
volume=255

[State 4200]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=[250,255]
trigger2=Parent,stateno=650
value=s0,30
volume=255

[State 4200]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=450
trigger2=Parent,stateno=655
value=s0,31
volume=255

[State 4200]
type=EnvShake
trigger1=time=0
time=14
ampl=-3
freq=160
phase=1

[State 4200]
type=DestroySelf
trigger1=time=100

;================================================================================================
;                                    HYPER ATTACK KO HELPER STATE
;================================================================================================
;HYPER ATTACK KO HELPER STATE
[Statedef 4300]
type=S
velset=0,0
anim=9741

[State 4300]
type=parentVarSet
trigger1=time=0
var(58)=-2

[State 4300]
type=PlaySnd
triggerall=time=0
triggerall=P2bodydist x !=[-43,43]
trigger1=Parent,stateno=3400
value=s0,32
volume=255

[State 4300]
type=PlaySnd
triggerall=time=9
triggerall=P2bodydist x=[-43,43]
trigger1=Parent,stateno=3400
value=s0,32
volume=255

[State 4300]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=[3000,3003]
trigger2=Parent,stateno=3100
trigger3=Parent,stateno=[3200,3206]
trigger4=Parent,stateno=[3210,3211]
trigger5=Parent,stateno=3503
value=s3000,0
volume=255

[State 4300]
type=PlaySnd
triggerall=time=0
trigger1=Parent,stateno=3010
trigger2=Parent,stateno=3150
trigger3=Parent,stateno=3258
trigger4=Parent,stateno=3404
value=s3000,1
volume=255

[State 4300]
type=EnvShake
trigger1=time=0
time=14
ampl=-3
freq=160
phase=1

[State 4300]
type=Pause
trigger1=time=0
time=10
movetime=10

[State 4300, fadein from White]
type=BGPalFx
trigger1=time=0
time=25
add=255,255,255
sinadd=-255,-255,-255,150
ignorehitpause=1
persistent=0
pausemovetime=9999

[State 4300,Blackout BG]
type=BGPalFX
triggerall=Time=0
trigger1=Parent,stateno=[3400,3404]
add=-256,-256,-256
time=66  

[State 4300, fadein from black]
type=BGPalFX
triggerall=Time=35
trigger1=Parent,stateno=[3400,3404]
time=24
add=-255,-255,-255
sinadd=255,255,255,120

[state 4300]
type = assertspecial
trigger1 = time <= 42
flag = nofg

[State 4300]
type=DestroySelf
trigger1=time=100


;================================================================================================
;                                         COLLAPSE/CHEAP DEATH
;================================================================================================
; Collapse/Cheap Death
[Statedef 5130]
type = S
movetype = H
physics = S
anim = 5130
;anim = 5130 + (2 * (statetype = C))

[State 5130]
type = DefenceMulSet
trigger1 = 1
value = 1
ignorehitpause = 1

[State 5130]
type=posset
trigger1=1
y=0

[State 5130]
type = nothitby
trigger1=1
value = SCA,AA,AP,AT
time=1

[State 5130, kosnd]
type=playsnd
trigger1= animelem=2 && !alive
value=2,1
channel=2

[State 5130]
type = ChangeState
trigger1 = anim = 5130
trigger1 = animtime = 0
value = 5131

;---------------------------------------------------------------------------
; Collapse (lying Down)
[Statedef 5131]
type = L
movetype = H
physics = C
anim = 5131

[State 5131, posadd]
type=posadd
trigger1= animelem=2
x=ceil(-20*const(size.xscale))

[State 5131, Snd]
type=playsnd
trigger1= animelem=3
value=1,21
channel=1

[State 5131]
type=posset
trigger1=1
y=0

[State 5131]
type = nothitby
trigger1=1
value = SCA,AA,AP,AT
time=1

[State 5131,Landing Dust]
type=Explod
anim=7011
trigger1= animelem=3
postype=P1
pos=0,0
persistent=0
sprpriority=-2
pausemovetime=999
supermovetime=999

[State 5131, End]
type=changestate
trigger1= !animtime
value=ifelse(alive,5110,5150)

;================================================================================================
;                                         DIZZY STATES
;================================================================================================
;Dizzy State
[Statedef 9001]
type = S
physics = S
movetype = I
ctrl = 0

[State 9001]
type = PlaySnd
trigger1 = Time = 0
value = 1000,1

[State 9001]
type =null; PlaySnd
trigger1 = Animelem = 6
value = 2,1

[State 9001, Flash]
type = PalFX
trigger1 = time%36 = 1
trigger2 = (command = "a") || (command = "b") || (command = "c") 
trigger3 = (command = "x") || (command = "y") || (command = "z")
time = 2
add = 50,50,50
mul = 300,300,300

[State 9001]
type = PosSet
trigger1 = Time = 0
Y = 0

[State 9001]
type = VelSet
trigger1 = Time = [0,13]
x = -4
Y = 0

[State 9001]
type = VelSet
trigger1 = Time >= 14
x = 0
Y = 0

[State 9001] 
type=Helper
trigger1=Animelem=4
name="Stun"
Stateno=9005
ID=9005

[State 9001]
type = Explod
trigger1=Animelem=4
anim = 7009
ID = 9001
pos = -20,0
postype = p1
sprpriority = 4
bindtime = -1
removetime = -1

[State 9001]
type = turn
triggerall = time = 0
trigger1 = p2dist X <= -5

[State 9001, Change Animation]
type = ChangeAnim
trigger1 = Time = 0
value = 9001

;[State 9001, Button Jam]
;type = ChangeState
;triggerall = Random <= 500
;trigger1 = (command = "a") || (command = "b") || (command = "c") 
;trigger2 = (command = "x") || (command = "y") || (command = "z")
;value = 9002

[State 9001, Next]
type = ChangeState
trigger1 = Time = 30
value = 9002

;-------------------------------------
;Dizzy Second state
[Statedef 9002]
type = S
physics = S
movetype = I
ctrl = 0

[State 9002, Flash]
type = PalFX
trigger1 = time%36 = 1
trigger2 = (command = "a") || (command = "b") || (command = "c") 
trigger3 = (command = "x") || (command = "y") || (command = "z")
time = 2
add = 50,50,50
mul = 300,300,300

[State 9002, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 9003

[State 9002, Next]
type = ChangeState
trigger1 = Time = 30
value = 9003

;-------------------------------------
;Dizzy Third state
[Statedef 9003]
type = S
physics = S
movetype = I
ctrl = 0

[State 9003, Flash]
type = PalFX
trigger1 = time%36 = 1
trigger2 = (command = "a") || (command = "b") || (command = "c") 
trigger3 = (command = "x") || (command = "y") || (command = "z")
time = 2
add = 50,50,50
mul = 300,300,300

[State 9003, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 9004

[State 9003, Next]
type = ChangeState
trigger1 = Time = 30
value = 9004

;-------------------------------------
;Dizzy Button Mash state
[Statedef 9004]
type = S
physics = S
movetype = I
ctrl = 0

[State 9004, Flash]
type = PalFX
trigger1 = animelem=1||animelem=4
trigger2 = (command = "a") || (command = "b") || (command = "c") 
trigger3 = (command = "x") || (command = "y") || (command = "z")
trigger4 = time%36 = 1
time = 2
add = 50,50,50
mul = 300,300,300

;[State 9004, Button Jam]
;type = ChangeState
;triggerall = (Random <= 500)
;trigger1 = (Command = "a") || (Command = "b") || (Command = "c") 
;trigger2 = (Command = "x") || (Command = "y") || (Command = "z")
;value = 0

[State 9004, Next]
type = Varset
trigger1 = time = 0
var(9) = 0
persistent = 0
ignorehitpause = 1

[State 9004, Next]
type = VarAdd
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
v = 9
value = 100
ignorehitpause = 1

[State 9004, Undizzy]
type = SelfState
trigger1 = var(9) >= 1000
trigger2 = time = 250     ;so you dont get stuck in the state
value = 0
ctrl = 1

;------------------------------------
;Dizzy Helper State
[Statedef 9005]
type = S
velset = 0,0
sprpriority = 0
anim = 9741
ctrl = 0

[State 9005]
type = VarRandom
triggerall = Time = 0
trigger1 = ctrl = 0
v = 21
range = 0,1

[State 9005]
type = PlaySnd
trigger1 = time%36 = 1
value = 2,3

[State 9005]
type = PlaySnd
triggerall = var(21)=0
trigger1 = time%16 = 1
value = S1,9

[State 9005]
type = PlaySnd
triggerall = var(21)=1
trigger1 = time%56 = 1
value = S1,10

[State 9005]
type = DestroySelf
trigger1 = Parent,stateno!=[9001,90044]

;------------------------------------
;Being dizzied. (Self only: The following code can all be omitted if you don't want the character to succumb from Stun Dizzies.)
[Statedef 9010]
type = S
movetype = H
physics = N
ctrl = 0

[State 9010]
type = PlaySnd
trigger1 = Time = 0
value = 1,8

[State 9010,Dizzy Bar Reset]
type=VarSet
trigger1= time=0
v=16
value=0

[State 9010,P1 Stun Power]
type=Explod
triggerall=TeamSide=1
triggerall=var(13)>=1
triggerall=time=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4110
ID=14110
pos=118,48
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State 9010,P1 Stun Power Coop]
type=Explod
triggerall=TeamSide=1
triggerall=var(13)>=1
triggerall=time=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4110
ID=14110
pos=88,68
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State 9010,P1 Alpha Storm Stun text]
type=Explod
triggerall=TeamSide=1
triggerall=var(13)=1
triggerall=time=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4112
ID=4112
pos=95,46
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=0
scale=.5,.5

[State 9010,P1 Alpha Storm Stun text Coop]
type=Explod
triggerall=TeamSide=1
triggerall=var(13)=1
triggerall=time=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4112
ID=4112
pos=65,66
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=0
scale=.5,.5

[State 9010,P1 SF3 Stun text]
type=Explod
triggerall=TeamSide=1
triggerall=var(13)=2
triggerall=time=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4117
ID=4117
pos=95,46
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=0
scale=.5,.5

[State 9010,P1 SF3 Stun text Coop]
type=Explod
triggerall=TeamSide=1
triggerall=var(13)=2
triggerall=time=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4117
ID=4117
pos=65,66
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=0
scale=.5,.5

[State 9010,P2 Stun Power]
type=Explod
triggerall=TeamSide=2
triggerall=var(13)>=1
triggerall=time=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4115
ID=14115
pos=-117,48
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State 9010,P2 Stun Power Coop]
type=Explod
triggerall=TeamSide=2
triggerall=var(13)>=1
triggerall=time=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4115
ID=14115
pos=-87,68
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State 9010,P2 Alpha Storm Stun text]
type=Explod
triggerall=TeamSide=2
triggerall=var(13)=1
triggerall=time=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4114
ID=4114
pos=-155,46
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=0
scale=.5,.5

[State 9010,P2 Alpha Storm Stun text Coop]
type=Explod
triggerall=TeamSide=2
triggerall=var(13)=1
triggerall=time=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4114
ID=4114
pos=-125,66
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=0
scale=.5,.5

[State 9010,P2 SF3 Stun text]
type=Explod
triggerall=TeamSide=2
triggerall=var(13)=2
triggerall=time=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4119
ID=4119
pos=-155,46
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=0
scale=.5,.5

[State 9010,P2 SF3 Stun text Coop]
type=Explod
triggerall=TeamSide=2
triggerall=var(13)=2
triggerall=time=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4119
ID=4119
pos=-125,66
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=0
scale=.5,.5

[State 9010: ChangeState]
type = ChangeState
trigger1 = (HitShakeOver)
value = 9011

;This is the character's state where he/she is being knocked out when the stun meter has reached it's limit.

; DIZZY Going up
[Statedef 9011]
type    = A
movetype= H
anim = 9011
physics = N

[State 9011]
type=ScreenBound
trigger1=Alive
value=0

[State 9011]
type = velset
trigger1 = time = [0,30]
x = -.5
y = -14

[State 9011]
type = velset
trigger1 = time >= 42
x = -.5
y = -2

[State 9011]
type = veladd
trigger1 = time >=0
y = .6

[State 9011]
type = Varset
trigger1 = time = 0
var(8) = 0
persistent = 0
ignorehitpause = 1

[State 9011: ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 9012
ctrl = 0

;This is the character's getting up state when being knocked out. He/She will end up dizzy.
[Statedef 9012]
type = S
movetype = H
physics = S
anim = 9012
ctrl = 0

[State 9012]
type=ScreenBound
trigger1=Alive
value=0

[State 9012]
type = velset
trigger1 = time >=0
y = 20

[State 9012: ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 9001
;================================================================================================
;                                         AI ACTIVATION
;================================================================================================
;---Adapted from Winane's---
[StateDef 9741]
anim=9741
ctrl=0
[State 9741, safety]
type=selfstate
trigger1=!ishelper
value=0
[State 9741, end]
type=destroyself
trigger1=((root,ID)!=(parent,ID))||!(root,alive)
trigger2=roundstate!=2
trigger3=root,var(20)

[State 9741, facing]
type=turn
trigger1=facing!=root,facing
[State 9741, pausecheck]
type=varset
trigger1=(root,movecontact)&&!(root,ctrl)
trigger2=(facing!=root,facing)
var(0)=0

[State 9741, dirturnonAI]
type=parentvarset
triggerall=var(0)
trigger1=(root,command="up")||(root,command="down")||(root,command="back")||(root,command="fwd")
var(20)=20
[State 9741, dirturnoffAI]
type=parentvarset
trigger1=(command="up")&&(root,command="up")
trigger2=(command="down")&&(root,command="down")
trigger3=(command="back")&&(root,command="back")
trigger4=(command="fwd")&&(root,command="fwd")
var(20)=-1
[State 9741, buttonturnonAI]
type=parentvarset
triggerall=var(0)
trigger1=(root,command="a")||(root,command="b")||(root,command="c")||(root,command="x")
trigger2=(root,command="y")||(root,command="z")||(root,command="start")
var(20)=20
[State 9741, buttonturnoffAI]
type=parentvarset
trigger1=(command="a")&&(root,command="a")
trigger2=(command="b")&&(root,command="b")
trigger3=(command="c")&&(root,command="c")
trigger4=(command="x")&&(root,command="x")
trigger5=(command="y")&&(root,command="y")
trigger6=(command="z")&&(root,command="z")
trigger7=(command="start")&&(root,command="start")
var(20)=-1
[State 9741, unpausecheck]
type=varset
trigger1=root,ctrl
var(0)=1
;=============================================================================================
;                         States that are always executed (use statedef -2)
;=============================================================================================

[Statedef -2]

;Debug
[State -2, Debug Flag Display]
type = DisplayToClipboard
trigger1 = 1
text = "AI=%d , P2BodyDist Y: %f , hyper=%d , trip=%d , P2BodyDist X: %f" 
params = var(20) , P2BodyDist Y , var(25) , var(26) , P2Bodydist X

;Danger!
[State -2, Danger]
type = PlaySnd
triggerall = Var(10) = 1
triggerall = (Teamside =1 && IsHomeTeam) || (Teamside =2 && !IsHomeTeam) || (TeamSide=1 && !IsHomeTeam)
trigger1 = Life <= 200
value = 5,0

[State -2, Danger]
type=Explod
trigger1=NumExplod(8000)=0
trigger1=Var(10) = 1
anim=8000
sprpriority=100
postype=Left
pos=ifelse(TeamSide = 2,335,110),55
bindtime=-1
supermove=1
ownpal=1
persistent=0
ignorehitpause = 1
ontop=1
scale=1.5,.8
size.shadowoffset = -9999
id=8000

[State -2, Danger VarAdd]
type = varadd
triggerall = Life <= 200
trigger1 = Var(10) <= 2 
v = 10
value = 1

[State -2, KO]
type = VarSet
trigger1 = alive
var(27) = 0

[State -2, KO]
type = VarSet
trigger1 = alive = 0
trigger1 = var(27) = 0
var(27) = 1
ignorehitpause = 1

[State -2, KO]
type = VarAdd
trigger1 = alive = 0
trigger1 = var(27) >= 1
var(27) = 1

[State -2,KO playsnd]
type = playsnd
trigger1 = RoundState > 2
trigger1 = alive = 0
trigger1 = var(27) = 3
value = 2,ifelse(stateno=5130,99,0)
channel = 1
volume=255

[State -2, KO]
type = VarSet
trigger1 = var(27) = 3
var(27) = -1

[State -2, No Spam]
type=varadd
trigger1=var(31)>0
var(31)=-1

[State -2,remove afterimages]
type=afterimagetime
trigger1=stateno=[5000,5999]
trigger1=animelemtime(1)>0
trigger2=movetype=H
time=0

;<[Parry]=================================================================]]
;This block of code is from Mr. Fong so give him credit for his work
[State -2, Standing Parry]
type = hitoverride
triggerall = ifelse((p2bodydist x < 0), (command = "back"), (command = "fwd"))
triggerall = statetype = S
trigger1 = ctrl
trigger2 = stateno = [120,130]
trigger3 = stateno = [140,151]
attr = SA, AA, AP
stateno = 4000
time = 6

;---------------------------------------------------------------------------
[State -2, Crouching Parry]
type = hitoverride
trigger1 = ctrl
trigger1 = ifelse((p2bodydist x < 0), (command = "back"), (command = "fwd"))
trigger1 = statetype = C
trigger2 = ctrl
trigger2 = command = "down"
trigger2 = statetype = S
trigger3 = command = "fwd"
trigger3 = stateno = 120
trigger4 = command = "fwd"
trigger4 = stateno = 131
trigger5 = command = "fwd"
trigger5 = stateno = 140
trigger6 = command = "fwd"
trigger6 = stateno = [152,153]
attr = C, AA, AP
stateno = 4010
time = 5

;---------------------------------------------------------------------------
[State -2, Aerial Parry]
type = hitoverride
triggerall = ifelse((p2bodydist x < 0), (command = "back"), (command = "fwd"))
triggerall = statetype = A
triggerall = stateno != 52
trigger1 = ctrl
trigger2 = stateno = 120
trigger3 = stateno = 132
trigger4 = stateno = 140
trigger5 = stateno = [154,155]
attr = SCA, AA, AP
stateno = 4020
forceair = 1
time = 7

;================================================================================================
;                                        Remove Explodes
;================================================================================================
[State -2,Dizzy P2] 
type=RemoveExplod
trigger1=p2stateno!=[2003,2004] 
ID=7009

[State -2,Shadow Break Lvl2] 
type=RemoveExplod
trigger1=movetype!=A
ID=6007

[State -2,Shadow Break Lvl2] 
type=RemoveExplod
trigger1=movetype!=A
ID=16007

[State -2,Dizzy P1] 
type=RemoveExplod
trigger1=stateno!=[9001,9004] 
ID=9001

[State -2,Dizzy P1 Stun Power] 
type=RemoveExplod
trigger1=stateno!=[9001,9012]
trigger2=roundstate!=2 
ID=14110

[State -2,Dizzy P2 Stun Power] 
type=RemoveExplod
trigger1=stateno!=[9001,9012] 
trigger2=roundstate!=2
ID=14115

[State -2,Dizzy Alpha Storm P1 Stun Text] 
type=RemoveExplod
trigger1=stateno!=[9001,9012] 
trigger2=roundstate!=2
ID=4112

[State -2,Dizzy Alpha Storm P2 Stun Text] 
type=RemoveExplod
trigger1=stateno!=[9001,9012]
trigger2=roundstate!=2 
ID=4114

[State -2,Dizzy SF3 P1 Stun Text] 
type=RemoveExplod
trigger1=stateno!=[9001,9012]
trigger2=roundstate!=2 
ID=4117

[State -2,Dizzy SF3 P2 Stun Text] 
type=RemoveExplod
trigger1=stateno!=[9001,9012]
trigger2=roundstate!=2 
ID=4119

[State -2, P1 Stun Power] 
type=RemoveExplod
trigger1=roundstate!=2 
ID=4110

[State -2, P2 Stun Power] 
type=RemoveExplod
trigger1=roundstate!=2 
ID=4115

[State -2,Alpha Storm P1 Stun Meter] 
type=RemoveExplod
trigger1=roundstate!=2 
ID=4111

[State -2,SF3 P1 Stun Meter] 
type=RemoveExplod
trigger1=roundstate!=2 
ID=4116

[State -2,Alpha Storm P2 Stun Meter] 
type=RemoveExplod
trigger1=roundstate!=2 
ID=4113

[State -2,SF3 P2 Stun Meter] 
type=RemoveExplod
trigger1=roundstate!=2 
ID=4118

;================================================================================================
;                              Damage Dampener (Combos take less damage)
;================================================================================================

;BASIC ATTACKS
[State -2, Damage based on hits]
type=varset
trigger1=numenemy
fvar(12)=enemynear,gethitvar(hitcount)
ignorehitpause=1

[State -2, Reset var when the opponent recovers]
type=varset
trigger1=numenemy
trigger1=(enemynear,movetype!=H)
trigger2=!numenemy
fvar(12)=1

[State -2, Dampener]
type=varset
trigger1=1
trigger1=stateno!=[3000,3999]
fvar(10)= ifelse(fvar(12)=0, 1, ifelse(fvar(12)=1, .9, .8**fvar(12)))
ignorehitpause=1

[State -2, Dampener itself]
type=attackmulset
trigger1=1
trigger1=stateno!=[3000,3999]
value=fvar(10)
ignorehitpause=1

[State -2, Dampener itself]
type=attackmulset
trigger1=1
trigger1=stateno=[3000,3999]
value=1
ignorehitpause=1

;===============================================================================================
;                                         Dizzy State 
;===============================================================================================
;DIZZY STATES
[State -2]
type = Varset
triggerall = life > 0 && time = 0
triggerall = stateno = [5000,5999]
trigger1 = stateno = [9005,9010]
var(8) = 0
ignorehitpause = 1

;This is used to recover the stun meter when the character is not hit.
[State -2]
type = VarAdd
triggerall = (Var(8) > 0)
trigger1 = 1
v = 8
value = -1
ignorehitpause = 1

[State -2,0 for light]
type = VarAdd
triggerall = life > 0 && time = 0
triggerall = var(8) <= 999
triggerall = gethitvar(animtype) = 0
triggerall = stateno!= [120,155]
trigger1 = stateno = [5000,5999]
trigger1 = Movetype = H
var(8) =ifelse(enemynear,stateno>=3000,0,ifelse(enemynear,stateno>=1000,15,70))
ignorehitpause = 1 

[State -2,1 for medium]
type = VarAdd
triggerall = life > 0 && time = 0
triggerall = var(8) <= 999
triggerall = gethitvar(animtype) = 1
triggerall = stateno!= [120,155]
trigger1 = stateno = [5000,5999]
trigger1 = Movetype = H
var(8) =ifelse(enemynear,stateno>=3000,0,ifelse(enemynear,stateno>=1000,20,100))
ignorehitpause = 1 

[State -2,2 for heavy]
type = VarAdd
triggerall = life > 0 && time = 0
triggerall = var(8) <= 999
triggerall = gethitvar(animtype) = 2
triggerall = stateno!= [120,155]
trigger1 = stateno = [5000,5999]
trigger1 = Movetype = H
var(8) =ifelse(enemynear,stateno>=3000,0,ifelse(enemynear,stateno>=1000,30,130))
ignorehitpause = 1 

[State -2,3 for back]
type = VarAdd
triggerall = life > 0 && time = 0
triggerall = var(8) <= 999
triggerall = gethitvar(animtype) = 3
triggerall = stateno!= [120,155]
trigger1 = stateno = [5000,5999]
trigger1 = Movetype = H 
var(8) =ifelse(enemynear,stateno>=3000,0,ifelse(enemynear,stateno>=1000,25,60))
ignorehitpause = 1 

[State -2, 4 for up]
type = VarAdd
triggerall = life > 0 && time = 0
triggerall = var(8) <= 999
triggerall = gethitvar(animtype) = 4
triggerall = stateno!= [120,155]
trigger1 = stateno = [5000,5999]
trigger1 = Movetype = H
var(8) =ifelse(enemynear,stateno>=3000,0,ifelse(enemynear,stateno>=1000,35,70))
ignorehitpause = 1 

[State -2, 5 for diag-up]
type = VarAdd
triggerall = life > 0 && time = 0
triggerall = var(8) <= 999
triggerall = gethitvar(animtype) = 5
triggerall = stateno!= [120,155]
trigger1 = stateno = [5000,5999]
trigger1 = Movetype = H
var(8) =ifelse(enemynear,stateno>=3000,0,ifelse(enemynear,stateno>=1000,40,80))
;persistent = 0;------persistent does not work in negative states
ignorehitpause = 1

[State -2]
type = ChangeState
triggerall = life > 0
trigger1 = var(8) >= 1000
trigger1 = HitShakeOver
value = 9010
ctrl = 0
ignorehitpause= 1

;================================================================================================
;                                     Alpha Storm/SF3 Dizzy Bar
;================================================================================================
[State -2, P1 Stun Power]
type=Explod
triggerall=TeamSide=1
triggerall=roundstate=2
triggerall=var(13)>=1
triggerall=numexplod(4110)=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4110
ID=4110
pos=118,48
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-3
scale=.5,.5

[State -2, P1 Stun Power Coop]
type=Explod
triggerall=TeamSide=1
triggerall=roundstate=2
triggerall=var(13)>=1
triggerall=numexplod(4110)=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4110
ID=4110
pos=88,68
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-3
scale=.5,.5

[State -2, P2 Stun Power]
type=Explod
triggerall=TeamSide=2
triggerall=roundstate=2
triggerall=var(13)>=1
triggerall= numexplod(4115)=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4115
ID=4115
pos=-117,48
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-3
scale=.5,.5

[State -2, P2 Stun Power Coop]
type=Explod
triggerall=TeamSide=2
triggerall=roundstate=2
triggerall=var(13)>=1
triggerall= numexplod(4115)=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4115
ID=4115
pos=-87,68
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-3
scale=.5,.5

[State -2,Alpha Storm P1 Stun Meter]
type=Explod
triggerall=TeamSide=1
triggerall=roundstate=2
triggerall=var(13)=1
triggerall=numexplod(4111)=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4111
ID=4111
pos=95,46
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State -2,Alpha Storm P1 Stun Meter Coop]
type=Explod
triggerall=TeamSide=1
triggerall=roundstate=2
triggerall=var(13)=1
triggerall=numexplod(4111)=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4111
ID=4111
pos=65,66
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State -2,SF3 P1 Stun Meter]
type=Explod
triggerall=TeamSide=1
triggerall=roundstate=2
triggerall=var(13)=2
triggerall=numexplod(4116)=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4116
ID=4116
pos=95,46
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State -2,SF3 P1 Stun Meter Coop]
type=Explod
triggerall=TeamSide=1
triggerall=roundstate=2
triggerall=var(13)=2
triggerall=numexplod(4116)=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4116
ID=4116
pos=65,66
postype=left
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State -2,Alpha Storm P2 Stun Meter]
type=Explod
triggerall=TeamSide=2
triggerall=roundstate=2
triggerall=var(13)=1
triggerall=numexplod(4113)=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4113
ID=4113
pos=-155,46
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State -2,Alpha Storm P2 Stun Meter Coop]
type=Explod
triggerall=TeamSide=2
triggerall=roundstate=2
triggerall=var(13)=1
triggerall=numexplod(4113)=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4113
ID=4113
pos=-125,66
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State -2,SF3 P2 Stun Meter]
type=Explod
triggerall=TeamSide=2
triggerall=roundstate=2
triggerall=var(13)=2
triggerall=numexplod(4118)=0
trigger1=NumPartner=0
trigger2=NumPartner=1
trigger2=ID<partner,ID
anim=4118
ID=4118
pos=-155,46
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State -2,SF3 P2 Stun Meter Coop]
type=Explod
triggerall=TeamSide=2
triggerall=roundstate=2
triggerall=var(13)=2
triggerall=numexplod(4118)=0
trigger1=NumPartner=1
trigger1=ID>partner,ID
anim=4118
ID=4118
pos=-125,66
postype=right
pausemovetime=-1
supermovetime=-1
bindtime=-1
removetime=-1
ownpal=1
;ontop=1
sprpriority=-2
scale=.5,.5

[State -2, P1 Stun Power]
type=modifyexplod
trigger1=TeamSide=1
scale= ifelse(var(8)<=0, 0, ifelse(var(8)>=1000, 1, (Var(8) / 1000.0))) * 0.5, .5; Ifelses define minimum and maximum scale
ID=4110

[State -2, P2 Stun Power]
type=modifyexplod
trigger1=TeamSide=2
scale= ifelse(var(8)<=0, 0, ifelse(var(8)>=1000, 1, (Var(8) / 1000.0))) * 0.5, .5; Ifelses define minimum and maximum scale
ID=4115

;=============================================================================================
;           States that are executed when in self's state file (use statedef -3)
;=============================================================================================

[Statedef -3]

[State -3, resetAI]
type=varset
trigger1=var(20)&&(!alive||roundstate!=2)
var(20)=0
ignorehitpause=1

[State -3, AIactivation]
type=helper
trigger1=!numhelper(9741)&&roundstate=2&&alive&&!var(20)
helpertype=normal
name="Shadowlady's AI"
stateno=9741
ID=9741
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647

[State -3: ChangeState]
type = ChangeState
triggerall = (Var(20) = 20) && (StateType != A) && (Ctrl) && (EnemyNear, Facing != Facing)
trigger1 = (P2StateType != C) && (P2MoveType = A) && ((InGuardDist) || (EnemyNear, NumProj > 0))
value = 130

[State -3: ChangeState]
type = ChangeState
triggerall = (Var(20) = 20) && (StateType != A) && (Ctrl) && (EnemyNear, Facing != Facing)
trigger1 = (P2StateType = C) && (P2MoveType = A) && ((InGuardDist) || (EnemyNear, NumProj > 0))
value = 131

[State -3: ChangeState]
type = ChangeState
triggerall = (Var(20) = 20) && (StateType = A) && (Ctrl) && (EnemyNear, Facing != Facing)
trigger1 = (P2MoveType = A) && ((InGuardDist) || (EnemyNear, NumProj > 0))
value = 132

;===============================================================================================
;                                          Corner Push 
;===============================================================================================

[State -3, Corner Push1]
type= varset
trigger1= fvar(5)
trigger1= numtarget
trigger1= target,hitover || (target,gethitvar(hitshaketime)>0 && target,time<=0)
fvar(5)= 0

[State -3, Corner Push2]
type= varset
trigger1= movecontact=1 && numtarget
fvar(5)= target,gethitvar(xvel)
ignorehitpause= 1

[State -3, Corner Push4]
type= posadd
triggerall= fvar(5)
triggerall= statetype!=L && numtarget
triggerall= (target,statetype!=L)
triggerall= !hitpausetime && target,gethitvar(hitshaketime)<=0
trigger1= target,frontedgebodydist<=abs(target,vel x)
trigger1= (target,gethitvar(xvel) * target,facing)>0
trigger2= target,backedgebodydist<=abs(target,vel x)
trigger2= (target,gethitvar(xvel) * target,facing)<0
x= ifelse(target,frontedgebodydist<=0, -1, 1) * (target,facing) * fvar(5)

[State -3, Corner Push5]
type= varset
trigger1= numtarget
trigger1= target,gethitvar(hitshaketime)<=0
fvar(5)= fvar(5)*.85

;===============================================================================================
;                                       Variable State Set 
;===============================================================================================
[State -3]
type=VarSet
trigger1=stateno=[5000,5999]
trigger1=var(45)!=0
v=44
value=0

[State -3]
type=VarSet
trigger1=p2stateno!=[5000,5999]
trigger1=var(44)!=0
v=45
value=0

[State -3]
type=VarSet
trigger1=movehit&&stateno=[200,699]
var(24)=1

[State -3]
type=VarSet
trigger1=var(25)<=1
trigger1=movehit&&stateno=[3000,3999]
var(25)=1

[State -3]
type=VarSet
trigger1=stateno=[0,106]
trigger1=stateno!=52
trigger2=p2stateno!=[5000,5999]
var(24)=0

[State -3]
type=VarSet
trigger1=p2stateno!=[5000,5999]
var(25)=0

[State -3]
type=varset
triggerall=stateno<=40
trigger1=var(26)=2
var(26)=0

[State -3]
type=varset
trigger1=P2stateno=[3259,3261]
var(26)=3

[State -3]
type=VarSet
trigger1=P2stateno=3302
v=18
value=1

[State -3]
type=VarSet
trigger1=P2stateno=429&&var(30)=0
var(30)=1

[State -3]
type=VarSet
triggerall=var(18)!=0
trigger1=p2movetype!=H
trigger2=frontedgebodydist>=100
v=18
value=0

[State -3, shell changestate]
type=VarSet
triggerall=Var(22)>=1
trigger1=P2Movetype!=H
v=22
value=0

[State -3,SJump Ctrl Detector]
type=VarSet
trigger1=Statetype!=A
trigger2=Stateno=52
v=16
value=0


;===============================================================================================
;                                   Normal & Special KO States 
;===============================================================================================

[State -3, VarSet]
type=VarSet
trigger1=roundstate=2
var(58)=0

[state -3, VarSet]
type=VarSet
triggerall=var(58)=0
triggerall=winko
trigger1=stateno=[200,661]
var(58)=1
ignorehitpause=1

[state -3, helper]
type=helper
triggerall=NumHelper(4200)=0
triggerall=var(58)=1
triggerall=numenemy=1
trigger1=numtarget
stateno=4200
ID=4200
pos=0,0
postype=p1
helpertype=normal
name="ko-sounds"
pausemovetime=999
supermovetime=999
ignorehitpause = 1
;===============================================================================================
;                                         Hyper KO States 
;===============================================================================================

[State -3, VarSet]
type=VarSet
trigger1=roundstate=2
var(58)=0

[state -3, VarSet]
type=VarSet
triggerall=var(58)=0
triggerall=winko
trigger1=stateno=[3000,3999]
var(58)=2
ignorehitpause=1

[state -3, helper]
type=helper
triggerall=NumHelper(4300)=0
triggerall=var(58)=2
triggerall=numenemy=1
trigger1=numtarget
stateno=4300
ID=4300
pos=0,0
postype=p1
helpertype=normal
name="Hko-sounds"
pausemovetime=999
supermovetime=999
ignorehitpause = 1

;================================================================================================
;                                         GetHit Sounds 
;================================================================================================
[State -3, light]
type = PlaySnd
triggerall = stateno = 5000 && life >= 200
trigger1 = anim = 5000 || anim = 5010 || anim = 5020
trigger1 = time = 1
trigger1 = random < 300
value = 2,2

[State -3, light]
type = PlaySnd
triggerall = stateno = 5020 && life >= 200
trigger1 = anim = 5000 || anim = 5010 || anim = 5020
trigger1 = time = 1
trigger1 = random < 300
value = 2,3

[State -3, medium]
type = PlaySnd
triggerall = stateno = 5000 && life >= 200
trigger1 = random < 300
trigger1 = time = 1
trigger1 = anim = 5001 || anim = 5011 || anim = 5021
value = 2,3

[State -3, medium]
type = PlaySnd
triggerall = stateno = 5020 && life >= 200
trigger1 = anim = 5001 || anim = 5011 || anim = 5021
trigger1 = random < 300
trigger1 = time = 1
value = 2,5

[State -3, heavy]
type = PlaySnd
triggerall = stateno = 5000 && life >= 200
trigger1 = random < 300
trigger1 = time = 1
trigger1 = anim = 5002 || anim = 5012 || anim = 5022
value = 2,4

[State -3, heavy]
type = PlaySnd
triggerall = stateno = 5000 && life >= 200
trigger1 = anim = 5002 || anim = 5012 || anim = 5022
trigger1 = random < 300
trigger1 = time = 1
value = 2,5

;================================================================================================
;                                         COLLAPSE/CHEAP DEATH
;================================================================================================
[State -3, Cheap KO]
type=changestate
trigger1= !alive && (stateno=[5000,5010])
trigger1= (prevstateno=[130,131]) || (prevstateno=[140,141]) || (prevstateno=[150,153])
value=5130
ignorehitpause=1

;================================================================================================
;                                      Variable Selectors
;================================================================================================

[State -3,Missle Dust]
type=VarSet
trigger1=1
v=17
value=0            ;Missle Dust    on = 1, off = 0

[State -3,Hyper Portrait]
type=VarSet
trigger1=1
v=19
value=0            ;Hyper Portrait on = 1, off = 0

[State -3,Stun Meter]
type=VarSet
trigger1=1
v=13
value=1            ;Stun Meter Alpha Storm = 1, SF3 = 2, off = 0


;================================================================================================
;                                          SF3 Lifebars 
;================================================================================================

[State -3]
type=null;helper
;triggerall=var(18)=2
triggerall=roundstate>=2
triggerall=numhelper(4100)=0
trigger1=numpartner=0
trigger2=numpartner
trigger2=id < partner,id
stateno=4100
id=4100
name="lifebar"
pos=0,0
postype=left
helpertype=normal

;===============================================================================================
;                                          VARIABLE LIST                    
;===============================================================================================
; Var(0) 	- AI
; Var(1) 	- Win - Random
; var(2)        - Life Bar Activator 
; Var(3) 	- Intro - Random
; Var(4) 	- Super Jump
; Var(5) 	- Damage Dampener Detector
; Var(6) 	- Taunt - Random
; Var(7) 	- Damage Dampener
; Var(8) 	- Dizzy
; Var(9)        - Dizzy Button Mash
; var(10)       - Guard Push
; var(11)       - Stop Recovery Roll from air throw landing
; var(12)       - Block
; var(13)       - Dizzy Bar Selector
; var(14)       - Normal & Special KO Sounds
; var(15)       - Lifebars
; var(16)       - Super Jump Ctrlset Detector
; var(17)       - Missle Dust
; var(18)       - Lifebar
; var(19)       - MVC Hyper Portrait
; Var(20) 	- A.I.
; Var(21) 	- Randomizer
; Var(22) 	- Sommersault Shell Changestate
; Var(23) 	- A.I.2
; Var(24) 	- Damage Dampener Prevstateno Detector
; Var(25) 	- Damage Dampener Hyper Detector
; Var(26)       - Damage Dampener/trip/launcher
; Var(27) 	- Alive Ko Sound
; Var(28) 	- Hit Ground Roll Activator
; Var(29) 	- Command Velocity VarSet/stand heavy kick
; var(30)       - P2stateno Launcher State
; var(31)       - No Spam
; var(32)       - Throw Tech Hit Activator
; Var(40)       - Command VarSet/Light-medium-heavy
; Var(41)       - Button Mash VarAdd/Shadow Break
; Var(42)       - Hitsparks X Random
; Var(43)       - Hitsparks Y Random
; Var(44)       - Hitstate Detector(5000-5999)
; Var(45)       - P2Hitstate Detector(5000-5999)
; Var(58) 	- Normal & Special KO Sounds