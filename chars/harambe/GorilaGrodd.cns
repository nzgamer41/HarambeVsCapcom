; Gorila Grodd constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
life = 1000
attack = 100
defence = 120
fall.defence_up = 50
liedown.time = 30;60
airjuggle = 15
sparkno = -1;2
guard.sparkno = -1;s5940
KO.echo = 0
;volume = 0
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1           ;Vertical scaling factor.
ground.back = 20     ;Player width (back, ground)
ground.front = 20    ;Player width (front, ground)
air.back = 15        ;Player width (back, air)
air.front = 15       ;Player width (front, air)
height = 60          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 1     ;Set to 1 to scale projectiles too
head.pos = 0, -130   ;Approximate position of head
mid.pos = 0, -80    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y). Recommended 0,0

[Velocity]
walk.fwd  = 2.0      ;Walk forward
walk.back = -2.0     ;Walk backward
run.fwd  = 4.25, -3    ;Run forward (x, y)
run.back = -4.25,-3 ;Hop backward (x, y)
jump.neu = 0,-8.4    ;Neutral jumping velocity (x, y)
jump.back = -2.55    ;Jump back Speed (x, y)
jump.fwd = 2.5       ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 4,-8.1      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.
air.gethit.groundrecover = -.15,-3.5  ;Velocity for ground recovery state (x, y) **MUGEN 1.0**
air.gethit.airrecover.mul = .5,.2     ;Multiplier for air recovery velocity (x, y) **MUGEN 1.0**
air.gethit.airrecover.add = 0,-4.5    ;Velocity offset for air recovery (x, y) **MUGEN 1.0**
air.gethit.airrecover.back = -1       ;Extra x-velocity for holding back during air recovery **MUGEN 1.0**
air.gethit.airrecover.fwd = 0         ;Extra x-velocity for holding forward during air recovery **MUGEN 1.0**
air.gethit.airrecover.up = -2         ;Extra y-velocity for holding up during air recovery **MUGEN 1.0**
air.gethit.airrecover.down = 1.5      ;Extra y-velocity for holding down during air recovery **MUGEN 1.0**

[Movement]
airjump.num = 0       ;Number of air jumps allowed (opt)
airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = 0.45;.44          ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching
stand.friction.threshold = 2          ;If player's speed drops below this threshold while standing, stop his movement **MUGEN 1.0**
crouch.friction.threshold = .05       ;If player's speed drops below this threshold while crouching, stop his movement **MUGEN 1.0**
air.gethit.groundlevel = 25           ;Y-position at which a falling player is considered to hit the ground **MUGEN 1.0**
air.gethit.groundrecover.ground.threshold = -20 ;Y-position below which falling player can use the recovery command **MUGEN 1.0**
air.gethit.groundrecover.groundlevel = 10   ;Y-position at which player in the ground recovery state touches the ground **MUGEN 1.0**
air.gethit.airrecover.threshold = -1  ;Y-velocity above which player may use the air recovery command **MUGEN 1.0**
air.gethit.airrecover.yaccel = .35    ;Vertical acceleration for player in the air recovery state **MUGEN 1.0**
air.gethit.trip.groundlevel = 15      ;Y-position at which player in the tripped state touches the ground **MUGEN 1.0**
down.bounce.offset = 0, 20            ;Offset for player bouncing off the ground (x, y) **MUGEN 1.0**
down.bounce.yaccel = .4               ;Vertical acceleration for player bouncing off the ground **MUGEN 1.0**
down.bounce.groundlevel = 12          ;Y-position at which player bouncing off the ground touches the ground again **MUGEN 1.0**
down.friction.threshold = .05         ;If the player's speed drops below this threshold while lying down, stop his movement **MUGEN 1.0**

[Quotes]
victory1 = "MMV is the best!"
victory2 = "Primitive scum! Tremble before Grodd!"
victory3 = "Ignorant and glorious fools. You know nothing."
victory4 = "Feel the wrath of Grodd!"
victory5 = "Just a small demonstration of my might."
victory6 = "That was for the banana. I *hate* bananas."
victory7 = "My apologies for the hasty exit but, I have a city to destroy."
victory8 = "I'm tired of these unimaginative plans for wealth and power."
victory9 = "I... am... Grodd. Fear... me."
victory10 = "No one uses Gorilla Grodd for a punching bag!"
victory11 = "You are no match for the wrath of Grodd!"
victory12 = "Defy me and I will destroy you. I am Grodd. Destiny is on my side."
victory13 = "You now know the true meaning of Gorilla Warfare!"
victory14 = "I'm far superior than any man."
victory15 = "This is the dawn of a new age! The age of the Ape!"
victory16 = "A bit too easy for my taste."

[ja.Quotes]
victory1 = "MMV is the best!"
victory2 = "Primitive scum! Tremble before Grodd!"
victory3 = "Ignorant and glorious fools. You know nothing."
victory4 = "Feel the wrath of Grodd!"
victory5 = "Just a small demonstration of my might."
victory6 = "That was for the banana. I *hate* bananas."
victory7 = "My apologies for the hasty exit but, I have a city to destroy."
victory8 = "I'm tired of these unimaginative plans for wealth and power."
victory9 = "I... am... Grodd. Fear... me."
victory10 = "No one uses Gorilla Grodd for a punching bag!"
victory11 = "You are no match for the wrath of Grodd!"
victory12 = "Defy me and I will destroy you. I am Grodd. Destiny is on my side."
victory13 = "You now know the true meaning of Gorilla Warfare!"
victory14 = "I'm far superior than any man."
victory15 = "This is the dawn of a new age! The age of the Ape!"
victory16 = "A bit too easy for my taste."

[Statedef 105]
type    = A
movetype = I
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 100, snd]
type = PlaySnd
trigger1 = time = 0
value = 8,0
;volume = 0


[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

[statedef 100]
type    = A
movetype = I
physics = N
ctrl = 0
anim = 100
sprpriority = 1

[State 100, Offset]
type = Offset
trigger1 = Time = [0,5]
x = 0
y = 6
ignorehitpause = 1

[State 100, 1]
type = VelSet
trigger1 = Time = 6
x = const(velocity.run.fwd.x)
y = const(velocity.run.fwd.y)

[State 100, PlaySnd] ; by mouser
type = PlaySnd
trigger1 = Time = 6
value = 100,0

[State 100, PlaySnd] ; by mouser
type = PlaySnd
trigger1 = Time = 1
value = 100,4

[State 100, Gravity]
type = Gravity
trigger1 = Time > 6

[State 100, Explod] ; by mouser
type = Explod
triggerall = Time >= 6
trigger1 = Time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
random = 30,abs(const(size.head.pos.y))
pos = -30,ceil(const(size.head.pos.y)/2)

[State 100, 2]
type = CtrlSet
trigger1 = AnimElemTime(3) >= 0
value = 1

[State 100, snd]
type = Null;PlaySnd
trigger1 = time = 0
value = 420,0

[State 100, 3]
type = null;ChangeState
trigger1 = ctrl = 1
value = 610
ctrl = 0

[State 100, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 170, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
channel = 0
value = 170, 0
volumescale = 500

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = VarRandom
trigger1 = Time = 0
v = 8
range = 0,100

[State 180, 5]
type = ChangeState
trigger1 = Var(8) = [0,100]
value = 181


;---------------------------------------------------------------------------
; Win pose 1 - GRrrrrrr
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 181, 1]
type = playsnd
trigger1 = animelem = 2 || animelem = 4 || animelem = 6 || animelem = 8
trigger2 = animelem = 10 || animelem = 12 || animelem = 14 || animelem = 16
value = s1,1

[State 181, 1]
type = Playsnd
trigger1 = animelem = 1
value = 300,8;7


[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 2 - Brain
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 182, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 182, 1]
type = Null;Playsnd
trigger1 = animelem = 3
value = 300,7;8
channel = 0
volumescale = 500

[State 182, 1]
type = Playsnd
trigger1 = animelem = 3
value = 182,1
channel = 0
volumescale = 500

[State 100, snd]
type = PlaySnd
trigger1 = animelem = 4
value = 420,0

[State 182, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = Time = [0,200]
flag = roundnotover
persistent = 1
ignorehitpause = 1

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, Offset]
type = Offset
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(3) <= 4
trigger2 = AnimElemTime(11) >= 0 && AnimElemTime(13) <= 2
x = 0
y = 6
ignorehitpause = 1

[State 195, Offset]
type = Offset
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(10) <= 3
x = 0
y = -1
ignorehitpause = 1

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 200, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 200, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s5910                     ;Spark anim no (Def: set above)
guard.sparkno = s5940
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
hitsound = s0, 17                  ;Sound to play on hit
guardsound = s0, 16                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 12             ;Time opponent is in hit state
ground.velocity = -5             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15                 ;Time before opponent regains control in air
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = -4
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 3
channel = 0
value = 5, 0
volumescale = 500

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 4
trigger3 = NumTarget(210) || NumTarget(410) || NumTarget(240) || NumTarget(220) || NumTarget(250)
movetype = I
ignorehitpause = 1

[State 200, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing medium punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 210                       ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 210, Width]
type = velset
trigger1 = time = [2,8]
x = 2

[State 210, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 210, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger2 = AnimElem = 3 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 210, Width]
type = Width
trigger1 = AnimElem = 4 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger2 = AnimElem = 5 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 30,10
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 1
volumescale = 500

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
channel = 0
value = 5, 2
volumescale = 500

[State 902, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
priority = 3, Hit              ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
damage    = 57
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF
pausetime = 12,12
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,-70
hitsound   = s0,18
guardsound = s0, 16
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -5.5
air.velocity = -2.5,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ID = 210

[State 210, 3]
type = ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = NumTarget
ignorehitpause = 1
persistent = 0
value = 210
elem = 6
ignorehitpause = 1

[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 6
movetype = I
ignorehitpause = 1

[State 210, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 220                       ;Change animation (Def: no change)
poweradd = 30                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 220, Width]
type = Width
trigger1 = AnimElem = 3 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger2 = AnimElem = 4 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger3 = AnimElem = 5 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
persistent = 1
ignorehitpause = 1

[State 220, Width]
type = Width
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
value = 45,10
persistent = 1
ignorehitpause = 1

[State 220, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 220, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0, 2
volumescale = 500

[State 220, 1]
type = PlaySnd
trigger1 = AnimElem = 6
channel = 0
value = 5, 5
volumescale = 500

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 9
attr = S, NA
animtype  = hard
damage    = 70
priority = 4, Hit 
getpower = 0,5
givepower = 0,5
guardflag = H;A
hitflag = MAF
priority = 7
pausetime = 14,14
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -5,ifelse(P2StateType = A, -100, ifelse(P2StateType = S, -84, -64))
hitsound = s0, 19
guardsound = s0, 16 
ground.type = low
ground.slidetime = 20
ground.hittime  = 25 + (AILevel != 0 * 10)
ground.velocity = -13
air.velocity = -3,10
air.fall = 1
fall.recover = 0
guard.velocity = -12*1.3
airguard.velocity = -8*1.3
ground.cornerpush.veloff = -13*1.3
guard.cornerpush.veloff = -13*1.3
envshake.time = 14
envshake.ampl = 3
envshake.freq = 60

[State 220, EvenShake]
type = EnvShake
trigger1 = MoveGuarded
time = 7
ampl = 3
freq = 60
ignorehitpause = 1

[State 220, 8]
type = EnvShake
trigger1 = MoveHit = 1 ;AnimElem = 8
time = 14

[State 220, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 10
movetype = I
ignorehitpause = 1

[State 220, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 220, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 230                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 230, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 230, Offset]
type = Offset
trigger1 = (AnimElemTime(1) >= 0) && (AnimElemTime(3) < 0)
trigger2 = (AnimElemTime(4) >= 0) && (AnimElemTime(5) < 0)
trigger3 = (AnimElemTime(6) >= 0)
x = 0
y = 6
ignorehitpause = 1

[State 230, Offset]
type = Offset
trigger1 = (AnimElemTime(3) >= 0) && (AnimElemTime(4) < 0)
x = 0
y = -6
ignorehitpause = 1

[State 230, Offset]
type = Offset
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(6) < 0)
x = 0
y = -2
ignorehitpause = 1

[State 230, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0

[State 230, 2]
type = PlaySnd
trigger1 = AnimElem = 2
channel = 0
value = 5, 0
volumescale = 500

[State 230, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 23                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s5910                       ;Spark anim no (Def: set above)
guard.sparkno = s5940
sparkxy = -10, -37               ;X-offset for the "hit spark" rel. to p2,
hitsound = s0, 17                  ;Sound to play on hit
guardsound = s0, 16                ;Sound to play on guard
ground.type = Low               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 12             ;Time opponent is in hit state
ground.velocity = -5             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15                 ;Time before opponent regains control in air
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = -4
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 230, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 4
trigger3 = NumTarget(210) || NumTarget(410) || NumTarget(240) || NumTarget(220) || NumTarget(250)
movetype = I
ignorehitpause = 1

[State 230, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing medium kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 240                       ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 240, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 240, Width]
type = Null;Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 35,0
ignorehitpause = 1

[State 240, Width]
type = Null;Width
trigger1 = AnimElem = 3 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 45,0
ignorehitpause = 1

[State 240, Offset]
type = Offset
trigger1 = (AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
x = 0
y = -10
ignorehitpause = 1

[State 240, Offset]
type = Offset
trigger1 = (AnimElemTime(7) >= 0)
x = 0
y = 6
ignorehitpause = 1

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 1
volumescale = 500

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 3
channel = 0
value = 240, 0 ;5, 2
volumescale = 500

[State 240, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
priority = 3, Hit              ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
damage    = 57
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF
pausetime = 12,12
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,-78
hitsound   = s0,18
guardsound = s0, 16
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -5.5
air.velocity = -2.5,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 240, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 4
movetype = I
ignorehitpause = 1

[State 240, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 240, 3]
type = PosAdd
triggerall = Ceil(P2Dist X) > 85
trigger1 = AnimElem = 1
x = 48

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 7
x = -24

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Standing heavy PUNCH
[Statedef 250]
type = S
movetype= A
physics = N
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 250                       ;Change animation (Def: no change)
poweradd = 30                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 250, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger2 = AnimElem = 3 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger3 = AnimElem = 4 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger4 = AnimElem = 5 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 250, Offset]
type = Offset
trigger1 = (AnimElemTime(6) >= 0) && (AnimElemTime(7) <= 4)
x = 0
y = 9
ignorehitpause = 1

[State 250, Offset]
type = Offset
trigger1 = (AnimElemTime(8) >= 0) && (AnimElemTime(9) <= 3)
x = 0
y = 9
ignorehitpause = 1

[State 250]
type = null;ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = Time = 0 && Anim != 250
value = 250

[State 250, Velset when not chained from dash]
type = null;velset
trigger1 = prevstateno != 100
trigger2 = Time = 12
x = 0

[state 250]
type = null;velmul
trigger1 = Time <= 11
x = .85

[State 220, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2
volumescale = 500

[State 220, 1]
type = PlaySnd
trigger1 = AnimElem = 2
channel = 0
value = 5, 5
volumescale = 500

[State 250]
type = HitDef
triggerall = !NumTarget(250)
trigger1 = AnimElem = 3
attr = S, NA
animtype  = hard
damage    = 70
priority = 4, Hit 
getpower = 0,5
givepower = 0,5
guardflag = MA
hitflag = MAFD
priority = 7
pausetime = 15,16
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -5,-102
hitsound = s0, 19
guardsound = s0, 16 
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -11,-6.8
air.velocity = -12,-6.1
airguard.velocity = -5.5,-2.8 
air.fall = 1
fall = 1
fall.recover = 0
guard.velocity = -12*1.3
airguard.velocity = -8*1.3
ground.cornerpush.veloff = -13*1.3
guard.cornerpush.veloff = -13*1.3
envshake.time = 14
envshake.ampl = 3
envshake.freq = 60
ID = 250

[State 250, EvenShake]
type = EnvShake
trigger1 = MoveGuarded
time = 7
ampl = 3
freq = 60
ignorehitpause = 1

[State 250, 8]
type = Null;EnvShake
trigger1 = MoveHit = 1 ;AnimElem = 8
time = 14

[State 250, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 4
movetype = I
ignorehitpause = 1

[State 250, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 250]
type = Null;HitBy
trigger1 = 1
value = SCA,AP,NA,SA,HA
time = 1

[State 250]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------
;P2 
[Statedef 251]
type = A
movetype = H
physics = N
sprpriority = -1
facep2 = 1

[State 251]
type = VelSet
trigger1 = time = [0,2]
x = -15
y = -3

[State 251]
type = VelSet
trigger1 = time = [5,8] 
x = -1
y = 1

[State 251]
type = VelSet
trigger1 = time >= 9
x = -0
y = 5

[State 251]
type = ChangeAnim2
trigger1 = time = 0
value = 822

[State 251]
type = Gravity
trigger1 = 1

[State 251]
type = TargetLifeAdd
trigger1 = time = 5
value = -30
persistent = 0

[State 251]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;Crouching light punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 400                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 400, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger2 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 400, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
channel = 0
value = 400, 0 ;5, 0
volumescale = 500

[State 400, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA                     ;Attribute: Standing, Normal Attack
damage = 23                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s5910                      ;Spark anim no (Def: set above)
guard.sparkno = s5940
sparkxy = -10, -60              ;X-offset for the "hit spark" rel. to p2,
hitsound = s0, 17                  ;Sound to play on hit
guardsound = s0, 16                ;Sound to play on guard
ground.type = Low              ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 12             ;Time opponent is in hit state
ground.velocity = -5             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
air.hittime = 15                 ;Time before opponent regains control in air
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = -4
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 400, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 4
trigger3 = NumTarget(210) || NumTarget(410) || NumTarget(240) || NumTarget(220) || NumTarget(250)
movetype = I
ignorehitpause = 1

[State 400, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching medium punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 410                       ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 410, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 410, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 30,10
ignorehitpause = 1

[State 410, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 410, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 1
volumescale = 500

[State 410, 1]
type = PlaySnd
trigger1 = AnimElem = 1
channel = 0
value = 5, 2
volumescale = 500

[State 410]
type = null;AssertSpecial
trigger1 = var(10)
flag = Nojugglecheck

[State 410, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype  = Medium
priority = 3, Hit              ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
damage    = 57
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF
pausetime = 12,12
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,-83
hitsound   = s0,18
guardsound = s0, 16
ground.type = Low
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -5.5
air.velocity = -2.5,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 410, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 4
movetype = I
ignorehitpause = 1

[State 410, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching heavy punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 4                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 420                       ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 420, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 420, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 30,10
ignorehitpause = 1

[State 420, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 420, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 1
volumescale = 500

[State 420, 1]
type = PlaySnd
trigger1 = AnimElem = 2
channel = 0
value = 5, 2
volumescale = 500

[State 420]
type = null;AssertSpecial
trigger1 = var(10)
flag = Nojugglecheck

[State 420, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = Up
priority = 4, Hit              ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
damage    = 57
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF
pausetime = 12,12
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,-83
hitsound   = s0,18
guardsound = s0, 16
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -0.025,-17
air.velocity = -0.025,-17
down.velocity = -0.025,-17
guard.velocity = -4.6
airguard.velocity = -3,-2
air.type = High
air.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 420

[State 420, PlaySnd]
type = PlaySnd
trigger1 = NumTarget(420)
trigger1 = P2StateNo = [5000,5999] ;!= [120,155]
trigger1 = !(Target, GetHitVar(hitshaketime))
value = 0,11
persistent = 0
ignorehitpause = 1

[State 420, Explod]
type = Explod
trigger1 = NumTarget(420)
trigger1 = P2StateNo = [5000,5999] ;!= [120,155]
;trigger1 = !(Target, GetHitVar(hitshaketime))
anim = 8020
ontop = 1
pos = 45,-60
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 1.1,1.0
ownpal = 1

[State 420, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 5
movetype = I
ignorehitpause = 1

[State 420, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 10
poweradd= 0
ctrl = 0
anim = 400
facep2 = 1

[State 400]
type = PlaySnd
trigger1 = Animelem = 1
value = 0,0
channel = 1

[State 400]
type = PlaySnd
trigger1 = Animelem = 1
value = 5,0
channel = 1

[State 430, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = ifelse(prevstateno != 400,30,15)
getpower = 30,20
givepower = 15,10
animtype  = Light
guardflag = MA
hitflag = MAF
priority = 4
pausetime = 8,8
sparkno = s80
guard.sparkno = s5940
sparkxy = -30,-50
hitsound = s5,1
guardsound = s0, 16
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5;ifelse(prevstateno != 400,-4,-6)
air.velocity = -5,-4
guard.velocity = -6*1.3
airguard.velocity = -4*1.3
ground.cornerpush.veloff = ifelse(prevstateno != 400,-6,-7)
guard.cornerpush.veloff = ifelse(prevstateno != 400,-6,-7)

[State 430, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching medium kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 15
poweradd= 20
ctrl = 0
anim = 410
facep2 = 1

[State 400]
type = PlaySnd
trigger1 = Animelem = 1
value = 0,4
channel = 1

[State 400]
type = PlaySnd
trigger1 = Animelem = 1
value = 5,2
channel = 1

[State 440, snd]
type = PlaySnd
trigger1 = Animelem = 2
value = 1,16
channel = 1

[State 440]
type = AssertSpecial
trigger1 = var(10)
flag = Nojugglecheck

[State 440, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 100
getpower = 90,46
givepower = 45,20
animtype  = Medium
guardflag = MA
hitflag = MAF
priority = 5
pausetime = 12,12
sparkno = s81
guard.sparkno = s5940
sparkxy = -10,-55
hitsound = s0,18
guardsound = s0, 16
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -9
guard.hittime = 15
air.velocity = -5,-4
guard.velocity = -8*1.3
airguard.velocity = -4*1.3
ground.cornerpush.veloff = -9*1.3
guard.cornerpush.veloff = -9*1.3

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[Statedef 510] ;Recovery Roll forward;
type = C
movetype= H
physics = N
anim = 510
ctrl = 0
poweradd = 0
velset = 8,0
sprpriority = 0
facep2 = 1

[State 510, Posset]
type = Posset
trigger1 = 1
y = 0

[State 510, NotHitby]
type = NotHitby
trigger1 = 1
value = SCA

[State 510, HitBy]  ; The greatest hits of character feedback by PotS - but this is MvsC so...
type= Null;hitby
trigger1= animelemtime(6) < 0; Depending on your animation, of course
value= SCA, AT
time= 1

[State 510, Width]
type = Width
trigger1 = 1
value = 0,0

[State 510, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 510, VelSet]
type = VelSet
trigger1 = Time >= 22
x = 0
y = 0

[State 510, Telequinesis]
type = null;ChangeState
value = 4100
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1500
triggerall = NumEnemy
;triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
;triggerall = !(EnemyNear, StateNo = [2000,3999])
trigger1 = Time >= 24
trigger1 = ceil(p2dist x) = [70,179]
;trigger1 = Life <= 0.36*LifeMax 
Trigger1 = random <= 175

[State 510, Telequinesis]
type = null;ChangeState
value = 4200
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 2000
triggerall = NumEnemy
triggerall = P2StateNo != [5100,5110]
trigger1 = Time >= 24
trigger1 = ceil(p2dist x) = [0,100]
trigger1 = P2StateNo = 1028
Trigger1 = random <= 695
trigger1 = AnimTime = 0
trigger2 = ceil(p2dist x) = [0,90]
trigger2 = P2StateNo = [53000,53002]
Trigger2 = random <= 195

[State 510, ChangeState]
type = ChangeState
value = 850
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = stateno != [850,860]
triggerall = prevstateno != [850,860]
triggerall = prevstateno != [52,53]
triggerall = p2stateno != [5000,5120]
triggerall = ceil(p2dist x) = [40,95]
triggerall = NumEnemy
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
trigger1 = Time >= 24
trigger1 = EnemyNear, StateType != A && P2StateType != A
Trigger1 = !(EnemyNear, StateNo = [40,49])
trigger1 = P2StateNo != [40,49]
trigger1 = Random <= 25

[State 510, ChangeState]
type = ChangeState
value = 40150
triggerall = Var(59) > 0 && RoundState = 2 && StateType != A && MoveType != H
triggerall = NumEnemy
triggerall = StateNo != [120,155]
triggerall = StateNo != 40150
triggerall = PrevStateNo != 40150
triggerall = P2StateType != A
triggerall = !EnemyNear, StateType = A
triggerall = P2StateNo != [40,49]
triggerall = !(EnemyNear, StateNo = [40,49])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = P2StateNo != [2000,3999]
triggerall = !(EnemyNear, StateNo = [2000,3999])
triggerall = !NumTarget(420)
;triggerall = !NumTarget(630)
triggerall = !NumTarget(640)
triggerall = !NumTarget(60049)
triggerall = !NumTarget(610)
triggerall = !NumTarget(4200)
triggerall = Ceil(P2Dist X) = [5,95]
triggerall = Time >= 24
trigger1 = (!EnemyNear, Ctrl && EnemyNear, AnimTime > -10) || (EnemyNear, AnimTime < 10)
trigger1 = !(EnemyNear, MoveType = A) && P2MoveType != A
trigger1 = !EnemyNear, NumProj && Var(16) = 0
trigger1 = IfElse(Life <= 0.36*LifeMax, Random <= 999, Random <= 999)

[State 510, ChangeState]
type = ChangeState
trigger1 = Time >= 24
value = 12
ctrl = 1

[Statedef 511] ;Recovery Roll backward;
type = C
movetype= H
physics = N
anim = 511
ctrl = 0
poweradd = 0
velset = -8,0
sprpriority = 0
facep2 = 1

[State 511, Posset]
type = Posset
trigger1 = 1
y = 0

[State 511, NotHitby]
type = NotHitby
trigger1 = 1
value = SCA

[State 511, HitBy]  ; The greatest hits of character feedback by PotS - but this is MvsC so...
type= Null;hitby
trigger1= animelemtime(6) < 0; Depending on your animation, of course
value= SCA, AT
time= 1

[State 511, Width]
type = Width
trigger1 = 1
value = 0,0

[State 510, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 511, VelSet]
type = VelSet
trigger1 = Time >= 22
x = 0
y = 0

[State 511, Telequinesis]
type = null;ChangeState
value = 4100
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1500
triggerall = NumEnemy
;triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5110]
;triggerall = !(EnemyNear, StateNo = [2000,3999])
trigger1 = Time >= 24
trigger1 = ceil(p2dist x) = [70,179]
;trigger1 = Life <= 0.36*LifeMax 
Trigger1 = random <= 175

[State 511, Telequinesis]
type = null;ChangeState
value = 4200
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 2000
triggerall = NumEnemy
;triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5110]
;triggerall = !(EnemyNear, StateNo = [2000,3999])
trigger1 = Time >= 24
trigger1 = ceil(p2dist x) = [0,100]
trigger1 = P2StateNo = 1028
Trigger1 = random <= 695
trigger1 = AnimTime = 0
trigger2 = ceil(p2dist x) = [0,90]
trigger2 = P2StateNo = [53000,53002]
Trigger2 = random <= 195

[State 511, ChangeState]
type = ChangeState
value = 850
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = stateno != [850,860]
triggerall = prevstateno != [850,860]
triggerall = prevstateno != [52,53]
triggerall = p2stateno != [5000,5120]
triggerall = ceil(p2dist x) = [40,95]
triggerall = NumEnemy
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
trigger1 = Time >= 24
trigger1 = EnemyNear, StateType != A && P2StateType != A
Trigger1 = !(EnemyNear, StateNo = [40,49])
trigger1 = P2StateNo != [40,49]
trigger1 = Random <= 25
[State 511, ChangeState]
type = ChangeState
trigger1 = Time >= 24
value = 12
ctrl = 1

[State 511, ChangeState]
type = ChangeState
value = 40150
triggerall = Var(59) > 0 && RoundState = 2 && StateType != A && MoveType != H
triggerall = NumEnemy
triggerall = StateNo != [120,155]
triggerall = StateNo != 40150
triggerall = PrevStateNo != 40150
triggerall = P2StateType != A
triggerall = !EnemyNear, StateType = A
triggerall = P2StateNo != [40,49]
triggerall = !(EnemyNear, StateNo = [40,49])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = P2StateNo != [2000,3999]
triggerall = !(EnemyNear, StateNo = [2000,3999])
triggerall = !NumTarget(420)
;triggerall = !NumTarget(630)
triggerall = !NumTarget(640)
triggerall = !NumTarget(60049)
triggerall = !NumTarget(610)
triggerall = !NumTarget(4200)
triggerall = Ceil(P2Dist X) = [5,95]
triggerall = Time >= 24
trigger1 = (!EnemyNear, Ctrl && EnemyNear, AnimTime > -10) || (EnemyNear, AnimTime < 10)
trigger1 = !(EnemyNear, MoveType = A) && P2MoveType != A
trigger1 = !EnemyNear, NumProj && Var(16) = 0
trigger1 = IfElse(Life <= 0.36*LifeMax, Random <= 999, Random <= 999)

[State 511, ChangeState]
type = ChangeState
trigger1 = Time >= 24
value = 12
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 4                      ;Number of air juggle points move takes
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 600                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 600, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 600, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 30,10
ignorehitpause = 1

[State 600, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 600, 2]
type = PlaySnd
trigger1 = AnimElem = 2
channel = 0
value = 600, 0 ;5, 0
volumescale = 500

[State 600, 2]
type = HitDef
trigger1 = !var(31) && AnimElem = 2
attr = A, NA                     ;Attribute: Standing, Normal Attack
damage = 23                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = HA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s5910                       ;Spark anim no (Def: set above)
guard.sparkno = s5940
sparkxy = -10, -86               ;X-offset for the "hit spark" rel. to p2,
hitsound = s0, 17                  ;Sound to play on hit
guardsound = s0, 16                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 18             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-5           ;X-velocity at which opponent is pushed,
air.hittime = 18                 ;Time before opponent regains control in air
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ID = 600

[State 600, 2]
type = HitDef
trigger1 = var(31) && AnimElem = 2
attr = A, NA                     ;Attribute: Standing, Normal Attack
damage = 23                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = HA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s5910                       ;Spark anim no (Def: set above)
guard.sparkno = s5940
sparkxy = -10, -86               ;X-offset for the "hit spark" rel. to p2,
hitsound = s0, 17                  ;Sound to play on hit
guardsound = s0, 16                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 18             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,ifelse(vel y<-4,vel y,-4)           ;X-velocity at which opponent is pushed,
air.hittime = 18                 ;Time before opponent regains control in air
yaccel = ifelse(vel y<-4,.82,.53)
fall.xvelocity = 0
fall.yvelocity = -2
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ID = 600

[State 600, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 3
movetype = I
ignorehitpause = 1

[State 600, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 600, 3]
type = Null;CtrlSet
trigger1 = Time = 17
value = 1

;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 1                      ;Number of air juggle points move takes
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 610                       ;Change animation (Def: no change)
poweradd = 30                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
;hitdefpersist = 1
;movehitpersist = 1
;hitcountpersist = 1
facep2 = 1

[State 610, ChangeAnim]
type = ChangeAnim
triggerall = Var(59) > 0
trigger1 = Anim = 610
trigger1 = Var(31) != 0
trigger1 = Time = 0
trigger1 = Anim != 611
value = 611
ignorehitpause = 1

[State 610, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10

[State 610, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 30,10

[State 610, Width]
type = Width
trigger1 = AnimElem = 3 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 35,10

[State 610, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2
volumescale = 500

[State 610, 1]
type = PlaySnd
trigger1 = AnimElem = 1
channel = 0
value = 610, 0 ;5, 5
volumescale = 500

[State 610, 3]
type = HitDef
trigger1 = !var(31) && AnimElem = 3
trigger2 = var(31) && var(17) < 2 && AnimElem = 3
attr = A, NA
animtype  = hard
damage    = 70
priority = 4, Hit 
getpower = 0,5
givepower = 0,5
guardflag = HA
hitflag = MAFD
priority = 7
pausetime = 15,16
guard.pausetime = 15,ifelse(P2StateType = A, 16, 6)
guard.slidetime = ifelse(P2StateType = A, 16, 6)
guard.hittime = ifelse(P2StateType = A, 16, 6)
guard.ctrltime = ifelse(P2StateType = A, 16, 6)
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,-102
hitsound = s0, 19
guardsound = s0, 16 
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -11,-6.8
air.velocity = -12,-6.1
airguard.velocity = -5.5,-2.8 
air.fall = 1
fall = 1
fall.recover = 0
guard.velocity = -12*1.3
airguard.velocity = -8*1.3
ground.cornerpush.veloff = -13*1.3
guard.cornerpush.veloff = -13*1.3
envshake.time = 14
envshake.ampl = 3
envshake.freq = 60
ID = 610

[State 610, 3]
type = HitDef
trigger1 = var(31) && var(17) >= 2 && AnimElem = 3
attr = A, NA
animtype  = hard
damage    = 70
priority = 4, Hit 
getpower = 0,5
givepower = 0,5
guardflag = HA
hitflag = MAFD
priority = 7
pausetime = 15,16
guard.pausetime = 15,ifelse(P2StateType = A, 16, 6)
guard.slidetime = ifelse(P2StateType = A, 16, 6)
guard.hittime = ifelse(P2StateType = A, 16, 6)
guard.ctrltime = ifelse(P2StateType = A, 16, 6)
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,-102
hitsound = s0, 19
guardsound = s0, 16 
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -11,-6.8
air.velocity = -20,12
airguard.velocity = -5.5,-2.8 
air.fall = 1
fall = 1
fall.recover = 0
guard.velocity = 0
airguard.velocity = -6,-2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
fall.xvelocity = 0
fall.yvelocity = -2
envshake.time = 14
envshake.ampl = 3
envshake.freq = 60
yaccel = .82
ID = 610

[State 610, EvenShake]
type = EnvShake
trigger1 = MoveGuarded
time = 7
ampl = 3
freq = 60
ignorehitpause = 1

[State 610, VelAdd]
type = VelAdd
triggerall = !Var(31)
triggerall = !NumTarget(610)
trigger1 = PrevStateNo = 100
x = 0.25
ignorehitpause = 1

[State 610, VelAdd]
type = VelAdd
triggerall = !Var(31)
triggerall = FrontEdgeBodyDist <= 160
trigger1 = NumTarget(610)
trigger1 = P2StateNo = [5000,5050]
x = -0.20 * Target, GetHitVar(hitcount)
ignorehitpause = 1

[State 610, DisplayToClipboard]
type = null;DisplayToClipboard
trigger1 = 1
text = "MoveHit = %d, TGetHitVar(hitcount) = %d, hitcount = %d"
params = MoveHit, Target, GetHitVar(hitcount), hitcount
ignorehitpause = 1

[State 610, TargetDrop]
type = Null;TargetDrop
trigger1 = Time = 0
keepone = 1
ignorehitpause = 1

[State 610, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 4
trigger3 = Var(31) = 0
trigger3 = Var(17) >= 2
movetype = I
ignorehitpause = 1

[State 610, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 610, ScreenBound]
type = ScreenBound
triggerall = var(31) && Var(17) >= 2
trigger1 = NumTarget
trigger1 = Target, StateNo != [120,155]
value = 0

[State 610, ChangeState]
type = ChangeState
triggerall = var(31) && Var(17) >= 2
trigger1 = NumTarget
trigger1 = BackEdgeDist <= -1
value = 740
ctrl = 0

;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 4                      ;Number of air juggle points move takes
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 630                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 630, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10
ignorehitpause = 1

[State 630, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 30,10
ignorehitpause = 1

[State 630, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0

[State 630, 2]
type = PlaySnd
trigger1 = AnimElem = 2
channel = 0
value = 630, 0 ;5, 0
volumescale = 500

[State 630, 2]
type = HitDef
trigger1 = !var(31) && AnimElem = 3
attr = A, NA                     ;Attribute: Standing, Normal Attack
damage = 23                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = HA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s5910                       ;Spark anim no (Def: set above)
guard.sparkno = s5940
sparkxy = -10, -60               ;X-offset for the "hit spark" rel. to p2,
hitsound = s0, 17                  ;Sound to play on hit
guardsound = s0, 16                ;Sound to play on guard
ground.type = Low              ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 18 + (5 * AILevel)            ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-5           ;X-velocity at which opponent is pushed,
air.hittime = 18                 ;Time before opponent regains control in air
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ID = 630

[State 630, 2]
type = HitDef
trigger1 = var(31) && AnimElem = 3
attr = A, NA                     ;Attribute: Standing, Normal Attack
damage = 23                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = HA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
getpower = 0,5
givepower = 0,5
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = s5910                       ;Spark anim no (Def: set above)
guard.sparkno = s5940
sparkxy = -10, -60  
hitsound = s0, 17                  ;Sound to play on hit
guardsound = s0, 16                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 18             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = 0,ifelse(vel y<-4,vel y,-4)           ;X-velocity at which opponent is pushed,
air.hittime = 18                 ;Time before opponent regains control in air
yaccel = ifelse(vel y<-4,.82,.53)
fall.xvelocity = 0
fall.yvelocity = -2
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ID = 630

[State 630, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 4
movetype = I
ignorehitpause = 1

[State 630, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1


;---------------------------------------------------------------------------
;Jump Strong Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 5
poweradd= 30
ctrl = 0
anim = 640
sprpriority = 2
facep2 = 1

[State 640, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,10

[State 640, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 30,10

[State 640, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2
volumescale = 500

[State 640, 1]
type = PlaySnd
trigger1 = AnimElem = 1
channel = 0
value = 610, 0 ;5, 5
volumescale = 500

[State 640, 3]
type = HitDef
trigger1 = !var(31) && AnimElem = 2
trigger2 = var(31) && var(17) < 2 && AnimElem = 2
attr = A, NA
animtype  = hard
damage    = 70
priority = 4, Hit 
getpower = 0,5
givepower = 0,5
guardflag = HA
hitflag = MAFD
priority = 7
pausetime = 15,16
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,-60
hitsound = s0, 19
guardsound = s0, 16 
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -3,10
air.velocity = -3,10
airguard.velocity = -5.5,-2.8 
air.fall = 1
fall = 1
fall.recover = 0
guard.velocity = -12*1.3
airguard.velocity = -8*1.3
ground.cornerpush.veloff = -13*1.3
guard.cornerpush.veloff = -13*1.3
envshake.time = 14
envshake.ampl = 3
envshake.freq = 60
fall.envshake.time = ifelse(Var(1) = 1, 10, 0)
ID = 640

[State 640, 3]
type = HitDef
trigger1 = var(31) && var(17) >= 2 &&AnimElem = 2
attr = A, NA
animtype  = hard
damage    = 70
priority = 4, Hit 
getpower = 0,5
givepower = 0,5
guardflag = HA
hitflag = MAFD
priority = 7
pausetime = 15,16
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,-60
hitsound = s0, 19
guardsound = s0, 16 
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -3,10
air.velocity = -20,12
airguard.velocity = -5.5,-2.8 
air.fall = 1
fall = 1
fall.recover = 0
guard.velocity = 0
airguard.velocity = -6,-2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
fall.xvelocity = 0
fall.yvelocity = -2
envshake.time = 14
envshake.ampl = 3
envshake.freq = 60
yaccel = .82
ID = 640

[State 640, EvenShake]
type = EnvShake
trigger1 = MoveGuarded
time = 7
ampl = 3
freq = 60
ignorehitpause = 1

[State 640, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 3
movetype = I
ignorehitpause = 1

[State 640, MoveHitReset]
type = Null;MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 640, ScreenBound]
type = ScreenBound
triggerall = var(31) && Var(17) >= 2
trigger1 = NumTarget
trigger1 = Target, StateNo != [120,155]
value = 0

[State 640, ChangeState]
type = ChangeState
triggerall = var(31) && Var(17) >= 2
trigger1 = NumTarget
trigger1 = BackEdgeDist <= -1
value = 740
ctrl = 0

;---------------------------------------------------------------------------
;Kung Fu Throw - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 810, Width 2-11]
type = Width
trigger1 = Time = 0
value = 60,10

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = 0     ;Draw p1's sprite in front of p2
p2sprpriority = 1
                      ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = ifelse(FrontEdgeBodyDist <= 20,811,810)      ;On success, KFM changes to state 810
p2stateno = 820       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down

[State 800, targetstate]
type= null;targetstate
trigger1= !time && numtarget
value= 820

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 888]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 888, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 888, Width 2-11]
type = Width
trigger1 = Time = 0
value = 60,10

[State 888, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M+          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
p1sprpriority = 0     ;Draw p1's sprite in front of p2
p2sprpriority = 1
                      ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = ifelse(FrontEdgeBodyDist <= 20,811,810)      ;On success, KFM changes to state 810
p2stateno = 820       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down

[State 888, targetstate]
type= null;targetstate
trigger1= !time && numtarget
value= 820

[State 888, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Throw - Throwing the opponent
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 0

[State 810, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 810, Holding fwd?]
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdback"

[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 1

[State 810, Throw Sound]
type = PlaySnd
trigger1 = AnimElem = 6
value = 800, 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
channel = 0
value = 100, 3
volumescale = 500

[State 810, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(7) < 0
value = 0

[State 810, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 75, 0

[State 810, Width 2-11]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(7) < 0
value = 70,10

[State 810, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 25, -30

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 0, -95

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = -8, -103

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = -8, -190

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 95, -40

[State 810, holdfwd - Turn 6] ;If was holding fwd before, turn now
type = Turn
trigger1 = var(2)
trigger1 = AnimElem = 4

[State 810, holdfwd - Pos 6] ;If was holding fwd before, move a little
type = Null;PosAdd
trigger1 = var(2)
trigger1 = AnimElem = 6
x = -37

[State 810, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = var(2)
trigger1 = AnimElem = 4
value = -1

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 7
value = -98

[State 810, Throw 11]
type = TargetState
trigger1 = AnimElem = 7
value = 821

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 811]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 0

[State 811, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 811, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 1

[State 810, Throw Sound]
type = PlaySnd
trigger1 = AnimElem = 6
value = 800, 1

[State 811, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
channel = 0
value = 100, 3
volumescale = 500

[State 811, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(7) < 0
value = 0

[State 811, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 811, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 75, 0

[State 811, Width 2-11]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(7) < 0
value = 70,10

[State 811, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 25, -30

[State 811, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 0, -95

[State 811, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = -8, -103

[State 811, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = -8, -190

[State 811, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 95, -40

[State 811, holdfwd - Turn 6] ;If was holding fwd before, turn now
type = Turn
trigger1 = AnimElem = 4

[State 811, holdfwd - Pos 6] ;If was holding fwd before, move a little
type = Null;PosAdd
trigger1 = var(2)
trigger1 = AnimElem = 6
x = -37

[State 811, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = AnimElem = 4
value = -1

[State 811, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 7
value = -80;98

[State 811, Throw 11]
type = TargetState
trigger1 = AnimElem = 7
value = 821

[State 811, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Thrown by Kung Fu Throw
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 810, SprPriority]
type = SprPriority
trigger1 = 1
value = 1

[State 820, Turn]
type = Turn
Trigger1 = AnimElem = 6

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;In case attacker loses binding on player for any reason, this controller
;guarantees that the player will never get stuck in this thrown state.
[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Thrown by Kung Fu Throw - thrown into the air
[Statedef 821]
type    = A
movetype= H
physics = N
velset = 3.8,-6
poweradd = 40

[State 821, 1] ;PosAdd
type = PosAdd
Trigger1 = Time = 0
y = 10

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 821, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

[Statedef 850] ; JeanGrey_AvX by Topper
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 850
sprpriority = 2

[State 850, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 850, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
channel = 0
value = 850, 1 ;5, 2
volumescale = 500

[State 850, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 0,4
;volumescale = 150

[State 850, HitDef]
type = HitDef
triggerall = P2StateNo != [53000,53002]
triggerall = Var(59) <= 0
;triggerall = ceil(p2dist x) = [0,75]
triggerall = P2MoveType != H
trigger1 = Time = 0
attr = S, ST
hitflag = M-;AF-
;guardflag = MA
numhits = 0
priority = 1, Miss
sparkno = -1
sprpriority = 2
;p1facing = ifelse(command="holdfwd",1,-1)
p1stateno = 851
p2stateno = 861
guard.dist = 0
p2facing = 1
fall.xvelocity = 0
fall.yvelocity = 0
fall = 1
fall.recover = 0
fall.damage = 88;123

[State 850, HitDef]
type = HitDef
triggerall = P2StateNo != [53000,53002]
triggerall = Var(59) > 0
;triggerall = ceil(p2dist x) = [50,60]
triggerall = P2MoveType != H
trigger1 = Time = 0
attr = S, ST
hitflag = M-;AF-
;guardflag = MA
numhits = 0
priority = 1, Miss
sparkno = -1
sprpriority = 2
;p1facing = ifelse(command="holdfwd",1,-1)
p1stateno = 851
p2stateno = 861
guard.dist = 0
fall.xvelocity = 0
fall.yvelocity = 0
fall = 1
fall.recover = 0
fall.damage = 88;123

[State 850, HitDef]
type = HitDef
triggerall = P2StateNo = [53000,53002]
triggerall = Var(59) <= 0
;triggerall = ceil(p2dist x) = [0,75]
triggerall = P2MoveType = H
trigger1 = Time = 0
attr = S, ST
hitflag = M;AF-
;guardflag = MA
numhits = 0
priority = 1, Miss
sparkno = -1
sprpriority = 2
;p1facing = ifelse(command="holdfwd",1,-1)
p1stateno = 851
p2stateno = 861
guard.dist = 0
fall.xvelocity = 0
fall.yvelocity = 0
fall = 1
fall.recover = 0
fall.damage = 88;123

[State 850, HitDef]
type = HitDef
triggerall = P2StateNo = [53000,53002]
triggerall = Var(59) > 0
;triggerall = ceil(p2dist x) = [50,60]
triggerall = P2MoveType = H
trigger1 = Time = 0
attr = S, ST
hitflag = M;AF-
;guardflag = MA
numhits = 0
priority = 1, Miss
sparkno = -1
sprpriority = 2
;p1facing = ifelse(command="holdfwd",1,-1)
p1stateno = 851
p2stateno = 861
guard.dist = 0
fall.xvelocity = 0
fall.yvelocity = 0
fall = 1
fall.recover = 0
fall.damage = 88;123

[State 850, targetstate]
type= null;targetstate
trigger1= !time && numtarget
value= 861

[State 850, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 899] ; JeanGrey_AvX by Topper
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 850
sprpriority = 2

[State 899, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 899, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 850,0

[State 899, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NT
hitflag = M+
priority = 1, Miss
sparkno = -1
sprpriority = 2
;p1facing = ifelse(command="holdfwd",1,-1)
p1stateno = 851
p2stateno = 861
guard.dist = 0
fall.xvelocity = 0
fall.yvelocity = 0
fall = 1
fall.recover = 0
fall.damage = 100

[State 899, targetstate]
type= null;targetstate
trigger1= !time && numtarget
value= 861

[State 899, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

; out of screen state by mouser
[Statedef 740]
type    = S
movetype = A
physics = S
anim = 9889
sprpriority = 1
velset = 0,0
ctrl = 0

[State 740, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 740, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 740, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 740, VarSet]
type = Null;VarSet
trigger1 = time = 0
var(4) = 0

[State 740, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100

[Statedef 851] ; JeanGrey_AvX by Topper
type    = S
movetype= A
physics = N
anim = 851
sprpriority = 0

[State 851, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 851, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 850,0
channel = 4
volumescale = 150

[State 851, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 851,0
channel = 0
volumescale = 500

[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 1
channel = 5

[state 851, Explod]
type = Explod
triggerall = NumExplod(808) = 0
trigger1 = AnimElem = 2
anim = 808
id = 808
pos = 20,-120
postype = p1
sprpriority = 1
bindtime = 1
scale = 0.3,0.3
removetime = 37
ownpal = 1

[State 851, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 851, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 851, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 1
id = -1
pos = 30,-30

[State 851, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 2
value = -7
kill = 0

[State 851, TargetState]
type = TargetState
trigger1 = time = 40
value = 860

[State 851, ChangeState]
type = ChangeState
trigger1 = time = 40
value = 852
ctrl = 0

[Statedef 852] ; JeanGrey_AvX by Topper
type    = S
movetype= I
physics = S
velset = 0,0
anim = 852
sprpriority = 0

[State 852, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[state 852, Explod]
type = Explod
triggerall = NumExplod(808) = 0
trigger1 = AnimElem = 3
anim = 808
id = 808
pos = -20,-120
postype = p1
sprpriority = 1
bindtime = 1
scale = 0.3,0.3
removetime = 7
ownpal = 1

[State 852, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 852, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 852, snd]
type = PlaySnd
trigger1 = animelem = 6
value = 300,1
channel = 4

[State 852, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 300,0
channel = 5
volumescale = 75

[State 852, Turn]
type = Turn
triggerall = Facing != EnemyNear, Facing
trigger1 = animtime = 0

[State 852, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 861] ; JeanGrey_AvX by Topper
type    = A
movetype= H
physics = N
velset = 0,-0.8;-1.1
sprpriority = 2

[State 861, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 861

[State 861, PosAdd]
type = PosAdd
trigger1 = Time = 0
y = -50

[State 861, HitFallSet]
type = HitFallSet
trigger1 = Time >= 0
value = 1
yvel = -2

[State 861, HitFallVel]
type = null;HitFallVel
trigger1 = Time >= 0

[State 861, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 861, SelfState]
type = SelfState
trigger1 = Time > 100
value = 5050
ctrl = 0

[Statedef 860] ; JeanGrey_AvX by Topper
type    = A
movetype= H
physics = N
velset = 0,0 ;17,-3
poweradd = 50
sprpriority = 2
facep2 = 1

[State 860, ScreenBound]
type = ScreenBound
trigger1 = Time < 10
value = 0
movecamera = 0,0

[State 860, PosAdd]
type = Null;PosAdd
trigger1 = Time = 9
y = -50

[State 860, VelSet]
type = VelSet
trigger1 = Time = 10
x = 17
y = 1;-3

[State 860, ChangeAnim2]
type = ChangeAnim2
trigger1 = (Time = 10)
value = 860

[State 860, PosAdd]
type = Null;PosAdd
trigger1 = Time = 10
Y = 45

[State 860, VelAdd]
type = VelAdd
trigger1 = Time >= 11
Y = 0.5

[State 860, SelfState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100
ctrl = 0

;-------------------------------------------------------------------------------
;Onda Psiquica
[Statedef 900]
type = S
movetype = A
physics = S
juggle = 4
ctrl = 0
velset = 0,0
poweradd = 35
anim = 900
facep2 = 1

[State 900, Width]
type = Width
trigger1 = 1;AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 25,0
persistent = 1
ignorehitpause = 1

[State 900, Width]
type = Width
trigger1 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 45,0
persistent = 1
ignorehitpause = 1

[State 900, Width]
type = Width
trigger1 = AnimElem = 3 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 65,0
persistent = 1
ignorehitpause = 1

[State 900, Width]
type = Width
trigger1 = AnimElem = 4 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 85,0
persistent = 1
ignorehitpause = 1

[State 900, Width]
type = Width
trigger1 = AnimElem = 5 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 115,0
persistent = 1
ignorehitpause = 1

[State 900, EvenShake]
type = EnvShake
trigger1 = Time = 0
time = 51
ampl = -3
freq = 90

[State 1000, telepat]
type = Explod
trigger1 = time=4
anim = 927
id= 927
pos= 15,-39
removetime = 58;34
ontop=1
removeongethit = 1
removetime=14

[State 900, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = 100,1
channel = 0
volumescale = 500

[State 900, PlaySnd]
type = Null;PlaySnd
trigger1 =  AnimElem = 2
value = s40,1


[State 1000,helper]
type = Helper
trigger1 = time = 4
ID =3061
pos = 50,-40
stateno = 3061
helpertype = normal
name = "telepat"
removetime = 7

keyctrl = 0
ownpal = 1

[State 1000,helper]
type = Helper
trigger1 = time = 10
ID =3061
pos = 50,-40
stateno = 3061
helpertype = normal
name = "telepat"
removetime = 7

keyctrl = 0
ownpal = 1

[State 1000,helper]
type = Helper
trigger1 = time = 16
ID =3061
pos = 50,-40
stateno = 3061
helpertype = normal
name = "telepat"
removetime = 7
keyctrl = 0
ownpal = 1

[State 1000,helper]
type = Helper
trigger1 = time = 22
ID =3061
pos = 50,-40
stateno = 3061
helpertype = normal
name = "telepat"
removetime = 7
keyctrl = 0
ownpal = 1

[State 1000,helper]
type = Helper
trigger1 = time = 28
ID =3061
pos = 50,-40
stateno = 3061
helpertype = normal
name = "telepat"
removetime = 7
keyctrl = 0
ownpal = 1

[State 1000,helper]
type = Helper
trigger1 = time = 34
ID =3061
pos = 50,-40
stateno = 3061
helpertype = normal
name = "telepat"
removetime = 7
keyctrl = 0
ownpal = 1

[State 1000,helper]
type = Helper
trigger1 = time = 40
ID =3061
pos = 50,-40
stateno = 3061
helpertype = normal
name = "telepat"
removetime = 7
keyctrl = 0
ownpal = 1

[State 900, StateTypeSet]
type = StateTypeSet
trigger1 = NumHelper(3061) > 2
trigger1 = Helper(3061), MoveContact
trigger2 = AnimElem = 15
movetype = I
ignorehitpause = 1

[State 900, MoveHitReset]
type = MoveHitReset
trigger1 = NumHelper(3061) > 2
trigger1 = Helper(3061), MoveContact || Helper(3061), NumTarget
persistent = 1
ignorehitpause = 1

[State 900, 2]
type = ChangeState
trigger1= AnimTime = 0
value = 0
ctrl = 1

[statedef 3061]
type = S
movetype = A
physics = N
ctrl = 0
anim = 925
velset = 3,0
sprpriority = 6

[State 3061]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 3061, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 3061
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 3061, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 3061
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 3061, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 3061
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 3061, shadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000,sound]
type = Playsnd
trigger1 = time = 1
value = 90,0

[state 1001, hit]
type = HitDef
trigger1 = time = 0
attr = S, SA
damage = 15,3 ;30,5
hitflag= MAFD
hitsound = s0, 19
guardsound = s0, 16
sparkno = s5920
guard.sparkno = s5940
sparkxy = -8, -50;IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+15, EnemyNear, Const(size.mid.pos.y)+15)
guardflag = MA
pausetime = 0,9
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -2
air.animtype = Back
air.velocity = -2.5,-5
getpower  = 50,25
givepower = 30,15
persistent = 1
p2facing = Facing*ifelse((P2StateNo = [1025,1028]),1,-1)*EnemyNear, Facing
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 3061, StateTypeSet]
type = StateTypeSet
trigger1 = time = 90;60
trigger2 = movecontact
trigger3 = root, stateno != 900
movetype = I
ignorehitpause = 1

[State 3061, MoveHitReset]
type = MoveHitReset
trigger1 = time = 90;60
trigger2 = movecontact
trigger3 = root, stateno != 900
persistent = 1
ignorehitpause = 1

[state 3061, destroy]
type = Destroyself
trigger1 = time = 90;60
trigger2 = movecontact || numtarget
trigger3 = root, stateno != 900


[Statedef 901]
type = C
movetype = A
physics = C
juggle = 4
ctrl = 0
anim = 1001

[State 901, Shake]
type = EnvShake
trigger1 = Time = 0
time = 51
ampl = -3
freq = 90

[State 901, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = 100,1

[State 901, 1]
type = Projectile
trigger1 = AnimElem = 1
projanim = 925
projhitanim = 926
projhits = 5
offset = 12, -60
velocity = 2.2,0
attr = C, SP
damage = 12,4
getpower = 60
givepower = 40
guardflag = MA
pausetime = 0,12
sparkno = 3
guard.sparkno = s5940
sparkxy = 82, 0
hitsound = s0, 20
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -8
airguard.velocity = -3.5,-2.75
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1

[State 901, 2]
type = ChangeState
trigger1= AnimTime = 0
value = 12
ctrl = 1

;---------------------------------------------------------------------
;Onda Psiquica
[Statedef 902]
type = C
movetype = A
physics = S
juggle = 4
ctrl = 0
velset = 0,0
poweradd = 35
anim = 902

[State 902, DisplayToClipboard]
type = null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 902, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = !NumTarget(902)
;trigger1 = EnemyNear, BackEdgeDist > 10
x = 12
ignorehitpause = 1

[State 902, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = NumTarget(902)
trigger1 = P2StateNo != [120,155]
trigger1 = EnemyNear, BackEdgeDist <= 10
x = -6
ignorehitpause = 1

[State 902, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = NumTarget
trigger1 = EnemyNear, BackEdgeDist > 10
x = 8
ignorehitpause = 1

[State 902, EvenShake]
type = velset
trigger1 = AnimElemTime(13) >= 0
x = 0
ignorehitpause = 1

[state 1001, hit]
type = HitDef
trigger1 = time = 0
attr = S, SA
damage = 100,15
hitflag= MAFD
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -5,ifelse(P2StateType = A, -60, -25)
hitsound = s0, 19
guardsound = s0, 16
guardflag = MA
pausetime = 9,9
guard.pausetime = 6,3
ground.type = Low
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = ifelse(EnemyNear, BackEdgeDist > 10, 0.6, -0.6),-9
down.velocity = ifelse(EnemyNear, BackEdgeDist > 10, 0.6, -0.6),-9
guard.velocity = -3.5
air.animtype = Back
air.velocity = -2.0,-5
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -10
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower  = 50,25
givepower = 30,15
p2facing = ifelse(EnemyNear, BackEdgeDist > 10, -1, 0)
persistent = 1
ID = 902

[State 902, EvenShake]
type = EnvShake
trigger1 = AnimElem = 2
time = 28
ampl = -3
freq = 90

[State 902, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300,0

[State 902, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 14
movetype = I
ignorehitpause = 1

[State 902, MoveHitReset]
type = MoveHitReset
trigger1 = AnimElem = 14
persistent = 1
ignorehitpause = 1

[State 902, 2]
type = ChangeState
trigger1= AnimTime = 0
value = 0
ctrl = 1

;Onda Psiquica
[Statedef 912]
type = C
movetype = A
physics = S
juggle = 4
ctrl = 0
velset = 0,0
poweradd = 35
anim = 902

[State 912, DisplayToClipboard]
type = null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 912, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = !NumTarget(912)
;trigger1 = EnemyNear, BackEdgeDist > 10
x = 12-4
ignorehitpause = 1

[State 912, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = NumTarget(912)
trigger1 = P2StateNo != [120,155]
trigger1 = EnemyNear, BackEdgeDist <= 10
x = -6+1
ignorehitpause = 1

[State 912, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = NumTarget
trigger1 = EnemyNear, BackEdgeDist > 10
x = 8
ignorehitpause = 1

[State 912, EvenShake]
type = velset
trigger1 = AnimElemTime(13) >= 0
x = 0
ignorehitpause = 1

[state 1001, hit]
type = HitDef
trigger1 = time = 0
attr = S, SA
damage = 100,15
hitflag= MAFD
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -5,ifelse(P2StateType = A, -60, -25)
hitsound = s0, 19
guardsound = s0, 16
guardflag = MA
pausetime = 9,9
guard.pausetime = 6,3
ground.type = Low
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = ifelse(EnemyNear, BackEdgeDist > 10, 0.6, -0.6),-9
down.velocity = ifelse(EnemyNear, BackEdgeDist > 10, 0.6, -0.6),-9
guard.velocity = -3.5
air.animtype = Back
air.velocity = -2.0,-5
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -10
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower  = 50,25
givepower = 30,15
p2facing = ifelse(EnemyNear, BackEdgeDist > 10, -1, 0)
persistent = 1
ID = 912

[State 912, EvenShake]
type = EnvShake
trigger1 = AnimElem = 2
time = 28
ampl = -3
freq = 90

[State 912, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300,0

[State 912, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 14
movetype = I
ignorehitpause = 1

[State 912, MoveHitReset]
type = MoveHitReset
trigger1 = AnimElem = 14
persistent = 1
ignorehitpause = 1

[State 912, 2]
type = ChangeState
trigger1= AnimTime = 0
value = 0
ctrl = 1

;Onda Psiquica
[Statedef 922]
type = C
movetype = A
physics = S
juggle = 4
ctrl = 0
velset = 0,0
poweradd = 35
anim = 902

[State 922, DisplayToClipboard]
type = null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 922, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = !NumTarget(912)
;trigger1 = EnemyNear, BackEdgeDist > 10
x = 12-6
ignorehitpause = 1

[State 922, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = NumTarget(912)
trigger1 = P2StateNo != [120,155]
trigger1 = EnemyNear, BackEdgeDist <= 10
x = -6+2
ignorehitpause = 1

[State 922, EvenShake]
type = velset
trigger1 = Time = [2,26]
trigger1 = NumTarget
trigger1 = EnemyNear, BackEdgeDist > 10
x = 8
ignorehitpause = 1

[State 922, EvenShake]
type = velset
trigger1 = AnimElemTime(13) >= 0
x = 0
ignorehitpause = 1

[state 1001, hit]
type = HitDef
trigger1 = time = 0
attr = S, SA
damage = 100,15
hitflag= MAFD
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -5,ifelse(P2StateType = A, -60, -25)
hitsound = s0, 19
guardsound = s0, 16
guardflag = MA
pausetime = 9,9
guard.pausetime = 6,3
ground.type = Low
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = ifelse(EnemyNear, BackEdgeDist > 10, 0.6, -0.6),-9
down.velocity = ifelse(EnemyNear, BackEdgeDist > 10, 0.6, -0.6),-9
guard.velocity = -3.5
air.animtype = Back
air.velocity = -2.0,-5
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -10
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower  = 50,25
givepower = 30,15
p2facing = ifelse(EnemyNear, BackEdgeDist > 10, -1, 0)
persistent = 1
ID = 912

[State 922, EvenShake]
type = EnvShake
trigger1 = AnimElem = 2
time = 28
ampl = -3
freq = 90

[State 922, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300,0

[State 922, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 14
movetype = I
ignorehitpause = 1

[State 922, MoveHitReset]
type = MoveHitReset
trigger1 = AnimElem = 14
persistent = 1
ignorehitpause = 1

[State 922, 2]
type = ChangeState
trigger1= AnimTime = 0
value = 0
ctrl = 1


[Statedef 903]
type = C
movetype = A
physics = C
juggle = 4
ctrl = 0
anim = 1001

[State 903, Shake]
type = EnvShake
trigger1 = Time = 0
time = 51
ampl = -3
freq = 90

[State 903, Snd]
type = PlaySnd
trigger1 =  AnimElem = 1
value = 100,1

[State 903, 1]
type = Projectile
trigger1 = AnimElem = 1
projanim = 927
;projhitanim = 926
projhits = 5
offset = 12, -60
velocity = 2.2,0
attr = C, SP
damage = 12,4
getpower = 60
givepower = 40
guardflag = MA
pausetime = 0,12
sparkno = 3
guard.sparkno = s5940
sparkxy = 82, 0
hitsound = 5,4
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -8
airguard.velocity = -3.5,-2.75
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1

[State 903, 2]
type = ChangeState
trigger1= AnimTime = 0
value = 12
ctrl = 1

;---------------------------------------------------------------------------
;Super Jump locator
[Statedef 910]
type    = A
physics = N
ctrl = 0
sprpriority = 2

[State 910, arrow]
type = ChangeAnim
trigger1 = IsHelper(0)
value = 910

[State 910, destroyself]
type = DestroySelf
triggerall = IsHelper(0)
trigger1 = RootDist Y > 0

;-------------------------------------------------------------------------------
;Golpe de Gorila
[Statedef 1000]
type = S
movetype = A
physics = S
juggle = 6
ctrl = 0
velset = 0,0
poweradd = 35
anim = 1000
facep2 = 1

[State 1000, Offset]
type = Offset
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(6) < 0)
x = 0
y = -4
ignorehitpause = 1

[State 1000, Offset]
type = Offset
trigger1 = (AnimElemTime(6) >= 0) && (AnimElemTime(7) <= 5)
x = 0
y = 4
ignorehitpause = 1

[State 1000, ReversalDef]
type = ReversalDef
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(3) <= 0
reversal.attr = SCA, NA, SA, HA, NP, SP, HP
numhits = 0
pausetime = 7,15
sparkno = -1
sparkxy = -1;0,0;-10,-100
hitsound = -1;s0, 19
guardsound = -1;s0, 16
p1stateno = 1001
;p2stateno = ifelse(P2StateType = A, 1025, 53000)
ignorehitpause = 1
persistent = 1

[State 1000, snd]
type = PlaySnd
triggerall = EnemyNear, MoveReversed
trigger1 = AnimElem = 3
value = s0, 19
ignorehitpause = 1
persistent = 0

[State 1000, Explod]
type = Explod
triggerall = EnemyNear, MoveReversed
trigger1 = AnimElem = 3
anim = F1
ID = 10000
pos = 75,-100
sprpriority = 3
ignorehitpause = 1
persistent = 0

[State 1000,Shake]
type = EnvShake
triggerall = EnemyNear, MoveReversed
trigger1 = AnimElem = 3
persistent = 0
time = 30
ignorehitpause = 1

[State 1000, snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 100,2

[State 1000, snd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
channel = 0
volumescale = 500

[State 1000,Position]
type = Velset
trigger1 = Time = [0,10]
x = 4

[State 1000, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger2 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger3 = AnimElem = 3 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger4 = AnimElem = 4 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 35,10
ignorehitpause = 1

[State 1020, 6]
type = Null;HitDef
triggerall = P2StateNo != 1025
trigger1 = Var(9) != 0 ;P2StateNo = [53000,53002]
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Hard
damage    = 50,20;144,27
getpower  = 50,25
givepower = 30,15
priority  = 5, Hit
hitflag= MAFD
guardflag = MA
pausetime = 10,10
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -10,-100
hitsound = s0, 19
guardsound = s0, 16
ground.type = High
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
;p2getp1state = ifelse(!EnemyNear, Alive || P2Life <= 150, 0, 1)
p2facing = 1        ;Force to face p1
ID = 18501

[State 1020, targetstate]
type= null;targetstate
triggerall = P2StateNo != [1025,1028]
trigger1= !time && numtarget(18501)
value= 1025

[State 1000,Attack]
type = HitDef
triggerall = P2StateNo != 1025 && P2StateNo != 1028
;trigger1 = Var(9) = 0 ;P2StateNo = [53000,53002]
trigger1 = AnimElem = 3
attr = S, SA
damage   = 100,15
animtype = Hard
priority  = 5, Hit
getpower  = 50,25
givepower = 30,15
hitflag = MAFD
guardflag = MA
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -10,-100
hitsound = s0, 19
guardsound = s0, 16
pausetime = 32,3
guard.pausetime = 15,25
guard.slidetime = 17
guard.ctrltime = 17
guard.velocity = -6
airguard.velocity = -6, -5
guard.hittime = 20
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -8, -7 ;ifelse(P2StateType != A, -6, -8),ifelse(P2StateType != A, -3.0, -7)
air.velocity = -8, -7 ;ifelse(P2StateType != A, -5.2, -8),ifelse(P2StateType != A, -2.5, -7)
fall = 0
forcestand = 1
forcenofall = 1
p2stateno = 1025 ;ifelse(P2StateType != A, 53000, 1025)    ;Make p2 go to state 1025 on hit
;p2getp1state = ifelse(!EnemyNear, Alive || P2Life <= 150, 0, 1)
p2facing = 1        ;Force to face p1
ID = 18502

[State 1020, targetstate]
type= null;targetstate
triggerall = P2StateNo != [1025,1028]
trigger1= !time && numtarget(18502)
value= 1025 ;ifelse(P2StateType != A, 53000, 1025)

[State 1000,Shake]
type = EnvShake
trigger1 = MoveContact ;MoveHit = 1
trigger1 = !EnemyNear, MoveReversed
persistent = 0
time = 30
ignorehitpause = 1

[State 1000, Playsnd]
type = Playsnd
triggerall = P2Name = "Gorila Grodd"
triggerall = P2StateNo = 53000
trigger1 = EnemyNear, Time = 1
value = 300,9
channel = 5
ignorehitpause = 1

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
trigger2 = movecontact
movetype = I
ignorehitpause = 1

[State 1000, MoveHitReset]
type = MoveHitReset
trigger1 = movecontact
persistent = 1
ignorehitpause = 1

[State 1000,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 1001]
type = S
movetype = A
physics = S
juggle = 6
ctrl = 0
velset = 0,0
poweradd = 35
anim = 10000

[State 1001, Offset]
type = Offset
trigger1 = (AnimElemTime(1) >= 0) && (AnimElemTime(5) < 0)
x = 0
y = -4
ignorehitpause = 1

[State 1001, Offset]
type = Offset
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(6) <= 4)
x = 0
y = 4
ignorehitpause = 1

[State 1000,LifeAdd]
type = LifeAdd
triggerall = EnemyNear, NumHelper > 0
trigger1 = Time = 0
value = -1
persistent = 1
ignorehitpause = 1

[State 1000,LifeAdd]
type = LifeAdd
triggerall = EnemyNear, HitDefAttr = SCA, NA, NP
trigger1 = Time = 0
value = -1
persistent = 1
ignorehitpause = 1

[State 1000,LifeAdd]
type = LifeAdd
triggerall = EnemyNear, HitDefAttr = SCA, SA, SP
trigger1 = Time = 0
value = -2
persistent = 1
ignorehitpause = 1

[State 1000,LifeAdd]
type = LifeAdd
triggerall = EnemyNear, HitDefAttr = SCA, HA, HP
trigger1 = Time = 0
value = -3
persistent = 1
ignorehitpause = 1

[State 1000, ReversalDef]
type = Null;ReversalDef
trigger1 = AnimElem = 2
reversal.attr = SCA, NA, SA, HA, NP, SP, HP
numhits = 0
pausetime = 1,1
sparkno = -1
sparkxy = -1;0,0;-10,-100
hitsound = -1;s0, 19
guardsound = -1;s300,4
;p1stateno = 1001
;p2stateno = ifelse(P2StateType = A, 1025, 53000)
ignorehitpause = 1
persistent = 1

[State 1001, snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 100,2

[State 1001, snd]
type = Null;PlaySnd
trigger1 = AnimElem = 1
value = 100,3
channel = 0
volumescale = 500

[State 1001,Position]
type = Velset
trigger1 = Time = [0,6]
x = 4

[State 1001, Width]
type = Width
trigger1 = AnimElem = 1 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger2 = AnimElem = 2 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger3 = AnimElem = 3 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
trigger4 = AnimElem = 4 ;(AnimElemTime(1) >= 0) && (AnimElemTime(7) < 0)
value = 35,10
ignorehitpause = 1

[State 1001, 6]
type = HitDef
triggerall = P2StateNo != 1025
trigger1 = Var(9) != 0 ;P2StateNo = [53000,53002]
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Hard
damage    = 50,20;144,27
getpower  = 50,25
givepower = 30,15
priority  = 5, Hit
hitflag= MAFD
guardflag = MA
pausetime = 10,10
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -10,-100
hitsound = s0, 19
guardsound = s0, 16
ground.type = High
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025    ;Make p2 go to state 1025 on hit
;p2getp1state = ifelse(!EnemyNear, Alive || P2Life <= 150, 0, 1)
p2facing = 1        ;Force to face p1
ID = 18511

[State 1020, targetstate]
type= null;targetstate
triggerall = P2StateNo != [1025,1028]
trigger1= !time && numtarget(18511)
value= 1025

[State 1001,Attack]
type = HitDef
triggerall = P2StateNo != 1028
trigger1 = Var(9) = 0 ;P2StateNo = [53000,53002]
trigger1 = AnimElem = 2
attr = S, SA
damage   = 144,27
animtype = Hard
priority  = 5, Hit
getpower  = 50,25
givepower = 30,15
hitflag = MAFD
guardflag = MA
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -10,-100
hitsound = s0, 19
guardsound = s0, 16
pausetime = 32,3
guard.pausetime = 15,5
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = ifelse(P2StateType != A, -6, -8),ifelse(P2StateType != A, -3.0, -7)
air.velocity = ifelse(P2StateType != A, -5.2, -8),ifelse(P2StateType != A, -2.5, -7)
fall = 0
forcestand = 1
forcenofall = 1
p2stateno = ifelse(P2StateType != A, 53000, 1025)    ;Make p2 go to state 1025 on hit
;p2getp1state = ifelse(!EnemyNear, Alive || P2Life <= 150, 0, 1)
p2facing = 1        ;Force to face p1
ID = 18512

[State 1020, targetstate]
type= null;targetstate
triggerall = P2StateNo != [1025,1028]
trigger1= !time && numtarget(18512)
value= 1025 ;ifelse(P2StateType != A, 53000, 1025) 

[State 1001,Shake]
type = EnvShake
trigger1 = MoveContact ;MoveHit = 1
trigger1 = !EnemyNear, MoveReversed
persistent = 0
time = 30
ignorehitpause = 1

[State 1001, Playsnd]
type = Playsnd
triggerall = P2Name = "Gorila Grodd"
triggerall = P2StateNo = 53000
trigger1 = EnemyNear, Time = 1
value = 300,9
channel = 5
ignorehitpause = 1

[State 1001, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
trigger2 = movecontact
movetype = I
ignorehitpause = 1

[State 1000, MoveHitReset]
type = MoveHitReset
trigger1 = movecontact
persistent = 1
ignorehitpause = 1

[State 1001,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = Null;Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, Sound]
type = Null;PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, 1]
type = NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

[Statedef 53000]
type    = S
movetype= H
physics = S
velset = 0,0

[State 53000, StateTypeSet]
type = StateTypeSet
trigger1 = 1
statetype = S
movetype= H
physics = S

[State 53000, Sick Color]
type = null
trigger1 = time = 0
time = 10
add = 100,100,100
mul = 256,256,256
sinadd = -80,-80,-80,10
invertall = 1
color = 0

[State 4050,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5012

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3009, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5000, 5]
type = StateTypeSet
trigger1 = Pos Y != 0
statetype = A

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 53001 ;HITG_SLIDE

[State 5000, 6]
type = SelfState
trigger1 = !Alive || Life = 0
trigger1 = Time >= 10
value = 5050

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 53001]
type    = S
movetype= H
physics = S

[State 53001, StateTypeSet]
type = StateTypeSet
trigger1 = 1
statetype = S
movetype= H
physics = S

[State 4050,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5000, 5]
type = StateTypeSet
trigger1 = Pos Y != 0
statetype = A

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger2 = anim != 5017 && Time >= 10
value = 5017

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= 12
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 53002

[State 5001, 6]
type = SelfState
trigger1 = !Alive || Life = 0
trigger1 = Time >= 10
value = 5050

;------------------- 3
[Statedef 53002]
type    = S
movetype= H
physics = S
ctrl = 0
velset = 0,0

[State 53002, StateTypeSet]
type = StateTypeSet
trigger1 = 1
statetype = S
movetype= H
physics = S

[State 5000, 5]
type = StateTypeSet
trigger1 = Pos Y != 0
statetype = A

[State 3005, 1] ;Dizzy animation while stunned
type = ChangeAnim
trigger1 = Pos Y = 0
trigger2 = Pos Y > 0
value = 5300 ;Hit ground
persistent = 0

[State 3005, 2] ;Airborne opponents fall to ground
type = PosAdd
trigger1 = Pos Y < 0
Y = 3

;[State 810,TargetLifeAdd]
;type = LifeAdd
;trigger1 = (var(4) % 26) = 1
;value = -IfElse((Time = 0),56,23)

;[State 3112, HitAdd]
;type = HitAdd
;trigger1 = (var(4) % 26) = 1
;value = 1


[State 5001, 6]
type = SelfState
triggerall = !Alive || Life <= 150
trigger1 = Time >= 1
value = 5050

[State 5001, 6]
type = ChangeState
triggerall = Alive && Life > 150
trigger1 = Time >= 120;140
value = 50003

;----------------------------------
[Statedef 50003]
type    = U;A
movetype= U;H
physics = U;N
velset = 0,0

[State 50003, SelfState]
type = SelfState
trigger1 = 1
value = 0
ctrl = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 5050, 3]
type = VelAdd
trigger1 = 1
y = .45

[State 5300, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5050, 6]
type = SelfState
trigger1 = Time > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;HIT_BOUNCE


;---------------------------------------------------------------------------
;Ataque Psiquico a
[Statedef 1060]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0,0
anim = 1060
ctrl = 0
sprpriority = 2

[State 1060, 3]
type = Projectile
trigger1 = AnimElem = 2
attr = S, SP
projID = 1061
projanim = 1061
projhitanim = 1061
projshadow = 68,68,68
projremovetime = 10
projheightbound = -300, 0
offset = 80,-98
velocity = 0,0
damage = 20,10
animtype = Hard
guardflag = MA
pausetime = 0,9
sparkno = -1
guard.sparkno = s5940
guard.sparkno = -1
hitsound   = 5,4
guardsound = s0, 16
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -10, -1
air.animtype = Back
air.velocity = -2.5,-5
fall = 1

[State 1060, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
;Ataque Psiquico b
[Statedef 1070]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0,0
anim = 1060
ctrl = 0
sprpriority = 2

[State 1070, 3]
type = Projectile
trigger1 = AnimElem = 2
attr = S, SP
projID = 1061
projanim = 1061
projhitanim = 1061
projshadow = 68,68,68
projremovetime = 10
projheightbound = -300, 0
offset = 80,-98
velocity = 0,0
damage = 30,10
animtype = Hard
guardflag = MA
pausetime = 0,9
sparkno = -1
guard.sparkno = s5940
guard.sparkno = -1
hitsound   = 5,4
guardsound = s0, 16
ground.type = High
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -10, -1
air.animtype = Back
air.velocity = -2.5,-5
fall = 1

[State 1070, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------
; Telequinesis
[Statedef 1400]
type    = S
movetype= A
physics = S
juggle = 4
ctrl = 0
velset = 0,0
poweradd = 35
anim = 1400
facep2 = 1

[State 1400, snd]
type = PlaySnd
trigger1 = Animelem = 5
value = 5, 4
channel = 0
volumescale = 500

[State 1400, 1]
type = Null;PlaySnd
trigger1 = AnimElem = 6
value = 0, 2
;volumescale = 500

[State 1400, 1]
type = PlaySnd
trigger1 = AnimElem = 6
channel = 0
value = 1400, 0
volumescale = 500

[State 1400, skull]
type = Explod
triggerall = NumExplod(2113) = 0
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
anim = 2113
ID = 2113
pos = -65,-65
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1400, skull]
type = Explod
triggerall = NumExplod(2114) = 0
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
anim = 2113
ID = 2114
pos = -50,-92
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1400, skull]
type = Explod
triggerall = NumExplod(2115) = 0
trigger1 = AnimElem = 5
anim = 2114
ID = 2115
pos = 59, -100
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1400,4]
type = Projectile
trigger1 = Animelem = 6
ProjID = 2001
ProjAnim = 2111;2001
projhitanim = 2112
offset = 120, -77
velocity = 4, 1.6
accel = 0,0.03
attr = S, SP
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF
damage    = 90,10
animtype  = Medium
sparkno = S5920
guard.sparkno = s5940
sparkxy = 0, 0
getpower  = 50,25
givepower = 30,15
pausetime = 0,12
hitsound = s0, 19
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-5.5
air.juggle = 3
p2facing = Facing*ifelse((P2StateNo = [1025,1028]),1,-1)*EnemyNear, Facing

[State 1400, StateTypeSet]
type = StateTypeSet
trigger1 = ProjContactTime(2001) != -1 && ProjContactTime(2001) < 20
trigger2 = AnimElem = 7
movetype = I
ignorehitpause = 1

[State 1400, MoveHitReset]
type = MoveHitReset
trigger1 = ProjContactTime(2001) != -1 && ProjContactTime(2001) < 20
persistent = 1
ignorehitpause = 1

[State 1400, changestate]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Telequinesis
[Statedef 1401]
type    = S
movetype= A
physics = S
juggle = 4
ctrl = 0
velset = 0,0
poweradd = 35
anim = 1400
facep2 = 1

[State 1401, snd]
type = PlaySnd
trigger1 = Animelem = 5
value = 5, 4
channel = 0
volumescale = 500

[State 1401, 1]
type = Null;PlaySnd
trigger1 = AnimElem = 6
value = 0, 2
;volumescale = 500

[State 1401, 1]
type = PlaySnd
trigger1 = AnimElem = 6
channel = 0
value = 1400, 0
volumescale = 500

[State 1401, skull]
type = Explod
triggerall = NumExplod(2113) = 0
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
anim = 2113
ID = 2113
pos = -65,-65
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1401, skull]
type = Explod
triggerall = NumExplod(2114) = 0
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
anim = 2113
ID = 2114
pos = -50,-92
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1401, skull]
type = Explod
triggerall = NumExplod(2115) = 0
trigger1 = AnimElem = 5
anim = 2114
ID = 2115
pos = 59, -100
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1401,4]
type = Projectile
trigger1 = Animelem = 6
ProjID = 2001
ProjAnim = 2111;2001
projhitanim = 2112
offset = 120, -77
velocity = 4, 0
accel = 0,0
attr = S, SP
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF
damage    = 90,10
animtype  = Medium
sparkno = S5920
guard.sparkno = s5940
sparkxy = 0, 0
getpower  = 50,25
givepower = 30,15
pausetime = 0,12
hitsound = s0, 19
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-5.5
air.juggle = 3
p2facing = Facing*ifelse((P2StateNo = [1025,1028]),1,-1)*EnemyNear, Facing

[State 1401, StateTypeSet]
type = StateTypeSet
trigger1 = ProjContactTime(2001) != -1 && ProjContactTime(2001) < 20
trigger2 = AnimElem = 7
movetype = I
ignorehitpause = 1

[State 1401, MoveHitReset]
type = MoveHitReset
trigger1 = ProjContactTime(2001) != -1 && ProjContactTime(2001) < 20
persistent = 1
ignorehitpause = 1

[State 1401, changestate]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Telequinesis
[Statedef 1402]
type    = S
movetype= A
physics = S
juggle = 4
ctrl = 0
velset = 0,0
poweradd = 35
anim = 1400
facep2 = 1

[State 1402, snd]
type = PlaySnd
trigger1 = Animelem = 5
value = 5, 4
channel = 0
volumescale = 500

[State 1402, 1]
type = Null;PlaySnd
trigger1 = AnimElem = 6
value = 0, 2
;volumescale = 500

[State 1402, 1]
type = PlaySnd
trigger1 = AnimElem = 6
channel = 0
value = 1400, 0
volumescale = 500

[State 1402, skull]
type = Explod
triggerall = NumExplod(2113) = 0
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
anim = 2113
ID = 2113
pos = -65,-65
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1402, skull]
type = Explod
triggerall = NumExplod(2114) = 0
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
anim = 2113
ID = 2114
pos = -50,-92
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1402, skull]
type = Explod
triggerall = NumExplod(2115) = 0
trigger1 = AnimElem = 5
anim = 2114
ID = 2115
pos = 59, -100
postype = p1
bindtime = 4
removetime = 4
supermovetime = 999
pausemovetime = 999
sprpriority = -1
ownpal = 1
scale = 1,1

[State 1402,4]
type = Projectile
trigger1 = Animelem = 6
ProjID = 2001
ProjAnim = 2111;2001
projhitanim = 2112
offset = 120, -77
velocity = 4, -1.6
accel = 0,-0.03
attr = S, SP
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF
damage    = 90,10
animtype  = Medium
sparkno = S5920
guard.sparkno = s5940
sparkxy = 0, 0
getpower  = 50,25
givepower = 30,15
pausetime = 0,12
hitsound = s0, 19
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-5.5
air.juggle = 3
p2facing = Facing*ifelse((P2StateNo = [1025,1028]),1,-1)*EnemyNear, Facing

[State 1402, StateTypeSet]
type = StateTypeSet
trigger1 = ProjContactTime(2001) != -1 && ProjContactTime(2001) < 20
trigger2 = AnimElem = 7
movetype = I
ignorehitpause = 1

[State 1402, MoveHitReset]
type = MoveHitReset
trigger1 = ProjContactTime(2001) != -1 && ProjContactTime(2001) < 20
persistent = 1
ignorehitpause = 1

[State 1402, changestate]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Hyper Telequinesis
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 3000
poweradd = 43

[State 3000, snd]
type = PlaySnd
trigger1 = Time = 2
value = 5, 0

[State 3000, 1]
type = PowerAdd
trigger1 = Animelem = 8
value = -1000

[State 3000, 1]
type = Superpause
trigger1 = Animelem = 8
anim = -1
time = 32

[State 1400,4]
type = Projectile
trigger1 = Animelem = 17
trigger2 = Animelem = 26
trigger3 = Animelem = 35
trigger4 = Animelem = 44
trigger5 = Animelem = 53
ProjAnim = 2008
offset = 32, -58 ;Con este se controla la posicion inicial del misil
velocity = 5.5, -2.3 ;Con este se controla la direccion del misil 
accel = 0,0.06
attr = S, HP
damage    = 20,2
animtype  = Medium
sparkno = S4044
guard.sparkno = s5940
getpower  = 5,10
givepower = 30
guardflag = MA
pausetime = 0,12
hitsound   = S8,0
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -4,-5
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-1.5
air.juggle = 3

[State 1400,4]
type = Projectile
trigger1 = Animelem = 15
trigger2 = Animelem = 24
trigger3 = Animelem = 33
trigger4 = Animelem = 42
trigger5 = Animelem = 51
ProjAnim = 2006
offset = 32, -58
velocity = 5.5, 1.1
accel = 0,0.005
attr = S, HP
damage    = 8,2
animtype  = Medium
sparkno = S4044
guard.sparkno = s5940
getpower  = 5,10
givepower = 30
guardflag = MA
pausetime = 0,12
hitsound   = S8,0
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -4,-5
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-1.5
air.juggle = 3

[State 1400,4]
type = Projectile
trigger1 = Animelem = 13
trigger2 = Animelem = 22
trigger3 = Animelem = 31
trigger4 = Animelem = 40
trigger5 = Animelem = 49
ProjAnim = 2004
offset = 32, -58
velocity = 5.5, -1.6
accel = 0,0.03
attr = S, HP
damage    = 20,2
animtype  = Medium
sparkno = S4044
guard.sparkno = s5940
getpower  = 5,10
givepower = 30
guardflag = MA
pausetime = 0,12
hitsound   = S8,0
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -4,-5
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-1.5
air.juggle = 3

[State 1400,4]
type = Projectile
trigger1 = Animelem = 12
trigger2 = Animelem = 21
trigger3 = Animelem = 30
trigger4 = Animelem = 39
trigger5 = Animelem = 48
ProjAnim = 2003
offset = 32, -61
velocity = 5.5, -1.3
accel = 0,-0.01
attr = S, HP
damage    = 8,2
animtype  = Medium
sparkno = S4044
guard.sparkno = s5940
getpower  = 5,10
givepower = 30
guardflag = MA
pausetime = 0,12
hitsound   = S8,0
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -4,-5
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-1.5
air.juggle = 3

[State 1400,4]
type = Projectile
trigger1 = Animelem = 11
trigger2 = Animelem = 20
trigger3 = Animelem = 29
trigger4 = Animelem = 38
trigger5 = Animelem = 47
ProjAnim = 2002
offset = 32, -63
velocity = 5.5, 0.5
accel = 0,0.01
attr = S, HP
damage    = 20,2
animtype  = Medium
sparkno = S4044
guard.sparkno = s5940
getpower  = 5,10
givepower = 30
guardflag = MA
pausetime = 0,12
hitsound   = S8,0
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -4,-5
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-1.5
air.juggle = 3

[State 1400,4]
type = Projectile
trigger1 = Animelem = 10
trigger2 = Animelem = 19
trigger3 = Animelem = 28
trigger4 = Animelem = 37
trigger4 = Animelem = 46
trigger5 = Animelem = 55
ProjAnim = 2001
offset = 32, -60
velocity = 5.5, -1.8
accel = 0,0.06
attr = S, HP
damage    = 20,2
animtype  = Medium
sparkno = S4044
guard.sparkno = s5940
getpower  = 5,10
givepower = 30
guardflag = MA
pausetime = 0,12
hitsound   = S8,0
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -4,-5
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-1.5
air.juggle = 3

[State 1400,4]
type = Projectile
trigger1 = Animelem = 9
trigger2 = Animelem = 18
trigger3 = Animelem = 27
trigger4 = Animelem = 36
trigger5 = Animelem = 45
trigger5 = Animelem = 54
ProjAnim = 2000
offset = 29, -62
velocity = 5.5, -2.8
accel = 0,0.02
attr = S, HP
damage    = 8,2
animtype  = Medium
sparkno = S4044
guard.sparkno = s5940
getpower  = 5,10
givepower = 30
guardflag = MA
pausetime = 0,12
hitsound   = S8,0
guardsound = s0, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -4,-5
airguard.velocity = -3.5      
air.type = Low
air.velocity = -2.5,-1.5
air.juggle = 3

[State 3000, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------
[statedef 4000]
type = S
movetype = I
physics = S
anim = 4000
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4000, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 4000, Playsnd]
type = Playsnd
trigger1 = animelem = 1
value = 4000,0;300,7;8
channel = 0
volumescale = 700

; DCvM hyper portrait/BG
[State 3000, superportrait]
type = Explod
trigger1 = Time = 0
anim = 11111
ID = 11111
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1
scale = 1,1


[State 3000, superBG]
type = Helper
trigger1 = time = 1
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 3000, 1]
type = SuperPause
trigger1 = AnimElem = 1,1
pos = -10, -80
anim = s8500
sound = s20, 0
poweradd = -1000

[State 4000, Width]
type = Width
triggerall = P2StateType != L
trigger1 = EnemyNear, BackEdgeDist <= 10
trigger1 = Ceil(P2Dist X) < 130
value = 130,10
ignorehitpause = 1

[State 4000, Advanced Guard by mouser]
type = Helper
triggerall = P2StateType != L
trigger1 = Facing = 1
trigger1 = Ceil(P2Dist X) < 130
stateno = 8061
postype = p2
pos = 20*(-EnemyNear,Facing),0
id = 8061
ignorehitpause = 1

[State 4000, Advanced Guard by mouser]
type = Helper
triggerall = P2StateType != L
trigger1 = Facing = -1
trigger1 = Ceil(P2Dist X) < 130
stateno = 8061
postype = p2
pos = 20*(EnemyNear,Facing),0
id = 8061
ignorehitpause = 1

[State 4000, Width]
type = null;Width
triggerall = P2StateType != L
triggerall = Ceil(P2Dist X) < 45
trigger1 = AnimElem = 2
value = 75,0
ignorehitpause = 1

[State 4000, Width]
type = null;Width
triggerall = P2StateType != L
triggerall = Ceil(P2Dist X) < 55
trigger1 = AnimElem = 3
value = 95,0
ignorehitpause = 1

[State 4000, Width]
type = null;Width
triggerall = P2StateType != L
triggerall = Ceil(P2Dist X) < 95
trigger1 = AnimElem = 4
value = 135,0
ignorehitpause = 1

[State 4000, Width]
type = null;Width
triggerall = P2StateType != L
triggerall = Ceil(P2Dist X) < 135
trigger1 = AnimElem = 5
value = 165,0
ignorehitpause = 1

[State 4000, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 4000, 2]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "Rayo" ; "tela"
ID = 4001
pos = 153,-15
postype = p1
facing = 1
stateno = 4001
ownpal = 1
ontop = 1
keyctrl = 0
scale = .5,.5
sprpriority = 3

[State 3000, superportrait]
type = Explod
trigger1 = animelem = 5
anim = 4002
ID = 4002
pos = 203,-15
postype = p1
removetime = 30
sprpriority = 3
ownpal = 1

[State 4000, snd]
type = PlaySnd
trigger1 = animelem = 1
value = 4000,0
channel = 0
volumescale = 500

[State 4000, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[statedef 4500]
type = S
movetype = I
physics = S
anim = 4000
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4500, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 4500, Playsnd]
type = Playsnd
trigger1 = animelem = 1
value = 4000,0;300,7;8
channel = 0
volumescale = 700

; DCvM hyper portrait/BG
[State 3000, superportrait]
type = Explod
trigger1 = Time = 0
anim = 11111
ID = 11111
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1
scale = 1,1


[State 3000, superBG]
type = Helper
trigger1 = time = 1
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 3000, 1]
type = SuperPause
trigger1 = AnimElem = 1,1
pos = -10, -80
anim = s8500
sound = s20, 0
poweradd = -1000

[State 4500, Width]
type = Width
triggerall = P2StateType != L
trigger1 = EnemyNear, BackEdgeDist <= 10
trigger1 = Ceil(P2Dist X) < 130
value = 130,10
ignorehitpause = 1

[State 4500, Advanced Guard by mouser]
type = Helper
triggerall = P2StateType != L
trigger1 = Facing = 1
trigger1 = Ceil(P2Dist X) < 130
stateno = 8061
postype = p2
pos = 20*(-EnemyNear,Facing),0
id = 8061
ignorehitpause = 1

[State 4500, Advanced Guard by mouser]
type = Helper
triggerall = P2StateType != L
trigger1 = Facing = -1
trigger1 = Ceil(P2Dist X) < 130
stateno = 8061
postype = p2
pos = 20*(EnemyNear,Facing),0
id = 8061
ignorehitpause = 1

[State 4500, Width]
type = null;Width
triggerall = P2StateType != L
triggerall = Ceil(P2Dist X) < 45
trigger1 = AnimElem = 2
value = 75,0
ignorehitpause = 1

[State 4500, Width]
type = null;Width
triggerall = P2StateType != L
triggerall = Ceil(P2Dist X) < 55
trigger1 = AnimElem = 3
value = 95,0
ignorehitpause = 1

[State 4500, Width]
type = null;Width
triggerall = P2StateType != L
triggerall = Ceil(P2Dist X) < 95
trigger1 = AnimElem = 4
value = 135,0
ignorehitpause = 1

[State 4500, Width]
type = null;Width
triggerall = P2StateType != L
triggerall = Ceil(P2Dist X) < 135
trigger1 = AnimElem = 5
value = 165,0
ignorehitpause = 1

[State 4500, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 4500, 2]
type = Helper
triggerall = animelem = 5
trigger1 = NumEnemy
trigger1 = Enemy, StateNo != 456852
trigger1 = P2StateNo != 456852
trigger1 = Enemy, StateNo != [5020,5199]
trigger1 = P2StateNo != [5020,5199]
helpertype = normal
name = "Rayo" ; "tela"
ID = 4501
pos = 135,-60
postype = p1
facing = 1
stateno = 4501
ownpal = 1
ontop = 1
keyctrl = 0
scale = .5,.5
sprpriority = 3

[State 4500, 2]
type = Helper
triggerall = animelem = 5
trigger1 = NumEnemy
trigger1 = Enemy, StateNo = 456852
trigger2 = P2StateNo = 456852
trigger3 = NumEnemy
trigger3 = Enemy, StateNo = [5020,5199]
trigger4 = P2StateNo = [5020,5199]
helpertype = normal
name = "Rayo" ; "tela"
ID = 4502
pos = 135,-60
postype = p1
facing = 1
stateno = 4502
ownpal = 1
ontop = 1
keyctrl = 0
scale = .5,.5
sprpriority = 3

[State 3000, superportrait]
type = Null;Explod
trigger1 = animelem = 5
anim = 4002
ID = 4002
pos = 203,-15
postype = p1
removetime = 30
sprpriority = 3
ownpal = 1

[State 4500, snd]
type = PlaySnd
trigger1 = animelem = 1
value = 4000,0
channel = 0
volumescale = 500

[State 4500, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[statedef 4300]
type = S
movetype = I
physics = S
anim = 19202 ;1060
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4300, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 4300, Offset]
type = Offset
trigger1 = 1;AnimElemTime(2) < 0
x = 0
y = 6
ignorehitpause = 1

[State 4300, PosAdd]
type = PosAdd
trigger1 = Time > 135 && Time <= 185
x = 0
y = -5
ignorehitpause = 1
persistent = 3

[State 4300, PosAdd]
type = PosAdd
trigger1 = Time > 185
x = 0
y = 4
ignorehitpause = 1
persistent = 3

[State 4300, StateTypeSet]
type = Null;StateTypeSet
trigger1 = AnimElemTime(2) = 0
physics = N
persistent = 0

[State 4300, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 2
value = 4300,0
channel = 0
volumescale = 500

[State 4300, snd]
type = PlaySnd
trigger1 = animelem = 11
value = 4300,1
channel = 0
volumescale = 500

; DCvM hyper portrait/BG
[State 4300, superportrait]
type = Explod
trigger1 = Time = 0
anim = 11111
ID = 11111
pos = 0,0
postype = back
bindtime = 999
removetime = 130;40
supermovetime = 130;40
pausemovetime = 130;40
sprpriority = -1
ownpal = 1
scale = 1,1

[State 4300, superBG]
type = Helper
trigger1 = time = 1
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 4300, 1]
type = SuperPause
trigger1 = AnimElem = 1,1
pos = 13, -90
anim = s8500
sound = s20, 0
time = 130
movetime = 130
poweradd = -1000


[State 4300, 2]
type = Null;Helper
trigger1 = animelem = 4;7
helpertype = normal
name = "Bicho" ; "tela"
ID = 4333
pos = 03,-15
facing = 1
postype = back
stateno = 4333
ownpal = 1
keyctrl = 0
scale = .5,.5
sprpriority = -3

[State 4300, 2]
type = Helper
triggerall = NumHelper(4334) = 0
trigger1 = animelem = 2;7
helpertype = normal
name = "Bicho" ; "tela"
ID = 4334
pos = 0,250
facing = 1
postype = p1
stateno = 4334
ownpal = 1
keyctrl = 0
scale = .5,.5
sprpriority = -3

[State 4300, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 5035
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = 14
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4300, 3]
type = ChangeState
triggerall = AnimElemTime(3) >= 0
trigger1 = NumHelper(4334) = 0
value = 5050
ctrl = 0

[State 4300, 3]
type = ChangeState
triggerall = NumHelper(4334) != 0
trigger1 = Helper(4334), RootDist Y >= -70
value = 4301
ctrl = 0

[statedef 4301]
type = A
movetype = I
physics = N
anim = 4301 ;1060
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4301, Turn]
type = Turn
triggerall = FrontEdgeDist >= 0
triggerall = Facing = Enemy, Facing
trigger1 = Floor(P2BodyDist X) <= 0
persistent = 4

[State 4301, Offset]
type = Offset
triggerall = NumHelper(4334) != 0
trigger1 = Helper(4334), Time < 149;500
x = 0
y = 60
ignorehitpause = 1

[State 4301, Offset]
type = Offset
triggerall = NumHelper(4334) != 0
trigger1 = Helper(4334), Time >= 149;500
x = 0
y = 60
ignorehitpause = 1

[State 4301, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4301
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4301, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4301
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4301, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4301
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4301, snd]
type = PlaySnd
trigger1 = animelem = 3
value = s0,0

[State 4301, snd]
type = PlaySnd
trigger1 = animelem = 5
value = s0,4

[State 4301, VelSet]
type = VelSet
;triggerall = Ceil(Pos Y) < 55
trigger1 = command = "holdfwd"
trigger1 = command != "holdup"
x = ifelse(FrontEdgeDist < 0, 0, 3)
y = 0

[State 4301, VelSet]
type = VelSet
;triggerall = Ceil(Pos Y) < 55
trigger1 = command = "holdfwd"
trigger1 = command = "holdup"
x = ifelse(FrontEdgeDist < 0, 0, 3)
y = -3

[State 4301, VelSet]
type = VelSet
;triggerall = Ceil(Pos Y) < 55
trigger1 = command = "holdback"
trigger1 = command != "holdup"
x = ifelse(BackEdgeDist < 0, 0, -3)
y = 0

[State 4301, VelSet]
type = VelSet
;triggerall = Ceil(Pos Y) < 55
trigger1 = command = "holdback"
trigger1 = command = "holdup"
x = ifelse(BackEdgeDist < 0, 0, -3)
y = -3

[State 4301, VelSet]
type = VelSet
;triggerall = Ceil(Pos Y) < 55
trigger1 = command = "holdup"
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0
y = -3

[State 4301, VelSet]
type = VelSet
;triggerall = Ceil(Pos Y) < 55
trigger1 = command = "holddown"
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0
y = 3

[State 4301, VelSet]
type = VelSet
;triggerall = Ceil(Pos Y) < 55
trigger1 = command = "holddown"
trigger1 = command = "holdback"
x = ifelse(BackEdgeDist < 0, 0, -3)
y = 3

[State 4301, VelSet]
type = VelSet
;triggerall = Ceil(Pos Y) < 55
trigger1 = command = "holddown"
trigger1 = command = "holdfwd"
x = ifelse(FrontEdgeDist < 0, 0, 3)
y = 3

[State 4301, VelSet]
type = VelSet
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0
y = 0

[State 4301, VelSet]
type = VelSet
triggerall = Ceil(Pos Y) > -100
trigger1 = command = "holddown"
y = 0

[State 4301, VelSet]
type = VelSet
triggerall = Ceil(Pos Y - ScreenPos Y) >= -Floor(GameHeight - ScreenPos Y)
trigger1 = command = "holdup"
y = 0

[State 4301, ChangeState]
type = ChangeState
triggerall = AnimElemTime(5) < 0
triggerall = NumHelper(4334) != 0
trigger1 = Helper(4334), NumHelper(1330) = 0
trigger1 = Command = "a" || Command = "b" || Command = "c"
value = 4302
ctrl = 0

[State 4301, ChangeState]
type = ChangeState
triggerall = AnimElemTime(5) >= 0
triggerall = NumHelper(4334) != 0
trigger1 = Helper(4334), NumHelper(1330) = 0
trigger1 = Command = "a" || Command = "b" || Command = "c"
value = 4303
ctrl = 0

[State 4301, StateTypeSet]
type = StateTypeSet
trigger1 = 1
type = A
movetype = I
physics = N
ignorehitpause = 1

[State 4301, VarSet]
type = Null;VarSet
trigger1 = Time = 0
v = 43
value = 0
ignorehitpause = 1

[State 4301, VarAdd]
type = VarAdd
trigger1 = Time >= 0
v = 43
value = 1
ignorehitpause = 1

[State 4301, ChangeState]
type = ChangeState
trigger1 = Var(43) >= 550
trigger2 = MoveType = H
trigger3 = RoundState != 2 || RoundState != 2
trigger4 = Win
trigger5 = Lose
trigger6 = DrawGame
trigger7 = StateNo = 54
trigger8 = NumEnemy
trigger8 = Enemy, Alive = 0 || Enemy, Life = 0 || Enemy, Lose || Enemy, StateNo = 5150
trigger9 = P2Life = 0
trigger10 = P2StateNo = 5150
value = 54
ctrl = 0

[statedef 4302]
type = S
movetype = I
physics = S
anim = 4302 ;1060
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4302, Turn]
type = Turn
triggerall = FrontEdgeDist >= 0
triggerall = Facing = Enemy, Facing
trigger1 = Floor(P2BodyDist X) <= 0
persistent = 4

[State 4302, Offset]
type = Offset
trigger1 = 1;AnimElemTime(2) < 0
x = 0
y = 60
ignorehitpause = 1

[State 4302, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4302
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4302, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4302
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4302, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4302
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4302, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 4302, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 2
value = 4301,0
channel = 0
volumescale = 500

[State 4302, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 9
value = 4334,0
channel = -1
volumescale = 1000

[State 4302, Helper] ; credit:  Lord Sinistro
type = Helper
triggerall = NumHelper(1330) = 0
trigger1 = AnimElemTime(2) = 0
ID = 1330
pos = 90,90  
postype = p1
stateno = 1330
helpertype = normal
name = "ahau"
keyctrl = 0
ownpal = 1

[State 4302, VarAdd]
type = VarAdd
trigger1 = Time >= 0
v = 43
value = 1
ignorehitpause = 1

[State 4302, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 4301
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[statedef 4303]
type = S
movetype = I
physics = S
anim = 4303 ;1060
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4303, Turn]
type = Turn
triggerall = FrontEdgeDist >= 0
triggerall = Facing = Enemy, Facing
trigger1 = Floor(P2BodyDist X) <= 0
persistent = 4

[State 4303, Offset]
type = Offset
trigger1 = 1;AnimElemTime(2) < 0
x = 0
y = 60
ignorehitpause = 1

[State 4303, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4303
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4303, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4303
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4303, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4303
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4303, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 4303, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 2
value = 4301,0
channel = 0
volumescale = 500

[State 4303, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 9
value = 4334,0
channel = -1
volumescale = 1000

[State 4303, VarAdd]
type = VarAdd
trigger1 = Time >= 0
v = 43
value = 1
ignorehitpause = 1

[State 4303, Helper] ; credit:  Lord Sinistro
type = Helper
triggerall = NumHelper(1330) = 0
trigger1 = AnimElemTime(2) = 0
ID = 1330
pos = 90,90 
postype = p1
stateno = 1330
helpertype = normal
name = "ahau"
keyctrl = 0
ownpal = 1

[State 4303, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 4301
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[statedef 4400]
type = S
movetype = I
physics = S
anim = 4400
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4400, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 4400, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 2
value = 850,0
volumescale = 300
channel = -1

[State 4400, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 0,4
;volumescale = 150
channel = -1

[State 4400, snd]
type = PlaySnd
trigger1 = animelem = 7
value = 300,1
channel = -1

[state 4400, Explod]
type = Explod
triggerall = NumExplod(808) = 0
trigger1 = AnimElem = 2
anim = 808
id = 808
pos = 20,-120
postype = p1
sprpriority = 1
bindtime = 1
scale = 0.3,0.3
removetime = 45
ownpal = 1

; DCvM hyper portrait/BG
[State 3000, superportrait]
type = Explod
trigger1 = Time = 0
anim = 11111
ID = 11111
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1
scale = 1,1


[State 3400, superBG]
type = Helper
trigger1 = time = 1
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 3400, 1]
type = SuperPause
trigger1 = AnimElem = 1,1
pos = 14, -84
anim = s8500
sound = s20, 0
poweradd = -1000


[state 4400,helper]
type = helper
trigger1 = time%1 = 0 && time < 10
stateno = 4401
id = 4405
postype = back
pos = 70+random%240,random%50
supermovetime = 0;999999
pausemovetime = 0;999999
ownpal = 1

[State 4400, VarRandom]
type = VarRandom
trigger1 = 1
v = 44
range = 0,3
ignorehitpause = 1
persistent = 1

[State 4400, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[statedef 4401]
type = a
movetype = i
physics = n
;anim = 2003+parent,var(44)
ctrl = 0
sprpriority = 3
velset = 0,-3-random%4
hitcountpersist = 1

[State 4401]
type = ChangeAnim
trigger1 = Time = 0
value = 2003+parent,var(44)
ignorehitpause = 1

[State 4401]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4401, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4401
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4401, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4401
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4401, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4401
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4401, snd]
type = PlaySnd
trigger1 = AnimElem = 2 ;&& time%1 = 0
value = s0,2
channel = 1 + parent,var(44)
persistent = 1
ignorehitpause = 1

[state 4401]
type = velset
trigger1 = screenpos y < 0
x = (p2dist x)*0.03
y = (p2dist y)*0.03
persistent = 0

[state 4401]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 4401]
type = statetypeset
trigger1 = vel x != 0
movetype = a
persistent = 0

[state 4401]
type = Null;assertspecial
trigger1 = 1
flag = noshadow

[state 4401]
type = null;hitby
trigger1 = 1
value = sca,ap

[State 4401, 8]
type = HitDef
trigger1 = Time = 0
attr = S,HA
hitflag = MAFD
guardflag = MA
animtype = hard
ground.type = low
air.type = low
priority = 5,Hit
damage = 24,8;10
pausetime = 1,5
guard.pausetime = 2,3
sparkno = -1
guard.sparkno = -1;40
;sparkxy = -5,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+20, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
ground.velocity = -1
guard.velocity = -3
air.velocity = -1,4
down.velocity = -1,4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
getpower  = 0,0
givepower = 5,5

[State 4401, spark]
type = explod
trigger1 = movehit = 1
anim = 5920
postype = p2
facing = -1
pos = const(size.mid.pos.x)+0, const(size.mid.pos.y)+ifelse(p2statetype = C, 30, 0)
;vel = 2,-12
;accel = 0,1
;random = 20,40
;scale = 0.75, 0.75
sprpriority = 4
removetime = -2;30
ownpal = 1
ignorehitpause = 1
;persistent = 1

[State 4401, spark]
type = explod
trigger1 = moveguarded = 1
anim = 5940
postype = p2
facing = -1
pos = const(size.mid.pos.x)+5, const(size.mid.pos.y)+ifelse(p2statetype = C, 30, 0)
;vel = 2,-12
;accel = 0,1
;random = 20,40
;scale = 0.75, 0.75
sprpriority = 4
removetime = -2;30
ownpal = 1
ignorehitpause = 1
;persistent = 1

[state 4401]
type = Destroyself
trigger1 = 1=0;movecontact
trigger2 = vel y > 0 && pos y > 25;0
trigger3 = time = 240


[statedef 4100]
type = S
movetype = A
physics = S
anim = 2100
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4100, ReversalDef]
type = ReversalDef
triggerall = AILevel = 0
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(14) <= 5
reversal.attr = SCA, NA, SA, HA, NP, SP, HP
numhits = 0
pausetime = 10,15
sparkno = -1;S9999
hitsound = -1;S0,0

[State 4100, ReversalDef]
type = ReversalDef
triggerall = AILevel != 0 && RoundState = 2 && Alive
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(15) < 0
reversal.attr = SCA, NA, SA, HA, NP, SP, HP
numhits = 0
pausetime = 10,15
sparkno = -1;S9999
hitsound = -1;S0,0

[State 4100, NotHitBy]
type = NotHitBy
triggerall = AILevel = 0
trigger1 = AnimElemTime(5) < 0
value = SCA
ignorehitpause = 1

[State 4100, NotHitBy]
type = NotHitBy
triggerall = AILevel != 0 && RoundState = 2 && Alive
trigger1 = AnimElemTime(15) < 0
value = SCA
ignorehitpause = 1

[State 4100, Width]
type = Width
trigger1 = 1
value = 25,10
ignorehitpause = 1

[State 1000, snd]
type = PlaySnd
trigger1 = Time = 20
value = s300,5
volumescale = 500

[State 1000, snd]
type = null;PlaySnd
trigger1 = animelem = 4
value = s300,6
channel = 0
volumescale = 500

[State 4100, Playsnd]
type = Playsnd
trigger1 = animelem = 4
value = 300,7;8
channel = 0
volumescale = 500

; DCvM hyper portrait/BG
[State 3000, superportrait]
type = Explod
trigger1 = Time = 0
anim = 11111
ID = 11111
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1
scale = 1,1


[State 3000, superBG]
type = Helper
trigger1 = time = 1
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 3000, 1]
type = SuperPause
trigger1 = AnimElem = 3,1
pos = 12, -75
anim = s8500
sound = s20, 0
poweradd = -1000


[State 4000, 1]
type = velset
trigger1 = time = [20,100]
x = 12

[State 1000, telepat]
type = Explod
trigger1 = animelem = 5
anim = 5656
id= 5656
pos= 20,-120
removetime = 100
bindtime = -1
ontop=1
removeongethit = 1

[State 1000, telepat]
type = Explod
trigger1 = animelem = 5
sprpriority = -2
anim = 5555
id= 5555
pos= -90,-13
removetime = 100
bindtime = -1
removeongethit = 1

[State 1000, telepat]
type = Explod
trigger1 = animelem = 5
anim = 1234
id= 1234
pos= -1,-1
removetime = 100
ontop = 1
bindtime = -1
removeongethit = 1

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
trigger5 = AnimElem = 9
trigger6 = AnimElem = 10
trigger7 = AnimElem = 11
trigger8 = AnimElem = 12
trigger9 = AnimElem = 13
attr = S, HA
damage = 56, 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 5,Hit
pausetime = 5, 5
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+15, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
air.velocity = -1.4,-0.88
airguard.velocity = -1.9,-.8
air.type = High
air.hittime = 12
getpower  = 0,0
givepower = 5,5
kill = 1
guard.kill = 1
fall.kill = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ID = 4100

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 14
attr = S, HA
damage = 58, 5
animtype = back
guardflag = MA
hitflag = MAF
priority = 5,Hit
pausetime = 5, 5
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -5,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+15, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -7,-7
air.velocity = -7,-7
airguard.velocity = -1.9,-.8
air.type = High
air.hittime = 12
getpower  = 0,0
givepower = 5,5
fall = 1
fall.recover = 0
kill = 1
guard.kill = 1
fall.kill = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ID = 4100


[State 3075,AfterImage]
type = AfterImage
trigger1 = Time = 20
time = 24
length = 15
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 100,100,220
palpostbright = 0, 0, 0
paladd = 10,10,45
palmul = .65,.65,.85
timegap = 2
framegap = 2
trans = add1

[State 4100, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact = 10
trigger2 = AnimElem = 15
movetype = I
ignorehitpause = 1

[State 4100, MoveHitReset]
type = MoveHitReset
trigger1 = MoveContact = 10
persistent = 1
ignorehitpause = 1

[State 4100, Offset]
type = Offset
trigger1 = AnimElemTime(16) >= 0 && AnimElemTime(18) <= 5
x = 0
y = 6
ignorehitpause = 1

[State 4000, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


[statedef 4200]
type = S
movetype = A
physics = S
anim = 1001
poweradd = 0
velset = 0,0
ctrl = 0
facep2 = 1

[State 4200, Offset]
type = Offset
trigger1 = 1
x = 0
y = 6
ignorehitpause = 1

[State 4200, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA
ignorehitpause = 1

[State 4200, Width]
type = Width
trigger1 = 1
value = 45,10
ignorehitpause = 1

; DCvM hyper portrait/BG
[State 3000, superportrait]
type = Explod
trigger1 = Time = 0
anim = 11111
ID = 11111
pos = 0,0
postype = back
bindtime = 999
removetime = 40
supermovetime = 40
pausemovetime = 40
sprpriority = -1
ownpal = 1
scale = 1,1

[State 3000, superBG]
type = Helper
trigger1 = time = 1
name = "Super BG"
ID = 8005
stateno = 8005
postype = back
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 3000, 1]
type = SuperPause
trigger1 = AnimElem = 3,1
pos = 40, -86
anim = s8500
sound = s20, 0
poweradd = -1000


[State 1000, telepat]
type = Explod
trigger1 = animelem = 4
anim = 1111
id= 1111
pos= 64,-51
removetime = 20
ontop = 1
bindtime = -1
removeongethit = 1

[State 1000, telepat]
type = Explod
trigger1 = animelem = 4
anim = 222
id= 222
pos= 84,-57
removetime = 9
sprpriority = -3
bindtime = -1
removeongethit = 1

[State 1000,Shake]
type = EnvShake
trigger1 = Animelem = 4
persistent = 0
time = 30
ignorehitpause = 1


[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = 250, 50
animtype = up
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 5, 5
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -5,ifelse(P2StateType = A, -80, -55)
hitsound = s0, 19
guardsound = s0, 16
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -0.025,-18
air.velocity = -0.025,-18
down.velocity = -0.025,-18
airguard.velocity = -1.9,-.8
air.type = High
air.hittime = 12
getpower  = 0,0
givepower = 30,15
fall = 1
fall.recover = 0
kill = 1
guard.kill = 1
fall.kill = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ID = 4200

[State 1000, snd]
type = PlaySnd
trigger1 = animelem = 1;2
value = s300,3
channel = 0
volumescale = 500

[State 4200, snd]
type = PlaySnd
trigger1 = animelem = 4
value = s300,4

[State 4200, StateTypeSet]
type = StateTypeSet
trigger1 = MoveContact
trigger2 = AnimElem = 5
movetype = I
ignorehitpause = 1

[State 4200, MoveHitReset]
type = MoveHitReset
trigger1 = MoveContact
persistent = 1
ignorehitpause = 1

[State 4200, PlaySnd]
type = PlaySnd
trigger1 = numtarget(4200)
trigger1 = p2stateno = [5000,5999] ;!= [120,155]
trigger1 = enemynear, gethitvar(hitshaketime) = 0
value = 0,11
persistent = 0
ignorehitpause = 1

[State 4200, Explod]
type = Explod
trigger1 = numtarget(4200)
trigger1 = p2stateno = [5000,5999] ;!= [120,155]
;trigger1 = enemynear, gethitvar(hitshaketime) = 0
anim = 8020
ontop = 1
pos = 45,-60
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 1.1,1.0
ownpal = 1

[State 4200, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


[Statedef 4001]
type = S
movetype = A
physics = N
ctrl = 0
anim = 4001
velset = 0,0
sprpriority = 5

[State 1000, snd]
type = PlaySnd
trigger1 = Time = 0
value = 1050,0

[State 4001, Width]
type = Width
trigger1 = 1
value = 0,0
ignorehitpause = 1

[State 4001, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1010]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4001, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4001
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4001, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4001
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4001, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4001
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4001, 8]
type = HitDef
trigger1 = Time > 0 && Time < 24
attr = S,HA
hitflag = MAFD
guardflag = MA 
animtype = hard
ground.type = low
air.type = low
priority = 5,Hit
damage = 10,3;10
pausetime = 0,5
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = -1
sparkxy = 20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+15, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
ground.velocity = -4
guard.velocity = -3
air.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
getpower  = 0,0
givepower = 2,2

[State 4001, 8]
type = HitDef
trigger1 = Time >= 24
attr = S,HA
hitflag = MAFD
guardflag = MA 
animtype = back
ground.type = low
air.type = low
priority = 5,Hit
damage = 10,3;10
pausetime = 0,5
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = -1
sparkxy = 20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+15, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16 
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
ground.velocity = -7,-7
guard.velocity = -3
air.velocity = -7,-7
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
getpower  = 0,0
givepower = 2,2

[State 4001 hyperBG2]
type = Explod
trigger1 = MoveHit && time%3=0
anim = 8003
ID = 8003
supermovetime = 999999
pausemovetime = 999999
;removeongethit = 1
;removetime = -1
vel = 0, 0
postype = p2
pos = -20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+10, EnemyNear, Const(size.mid.pos.y)+10)
sprpriority = 9
;bindtime = -1
ownpal = 1

[State 4001 hyperBG2]
type = Explod
trigger1 = MoveGuarded && time%3=0
anim = 5940
ID = 5940
supermovetime = 999999
pausemovetime = 999999
;removeongethit = 1
;removetime = -1
vel = 0, 0
postype = p2
pos = -20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+10, EnemyNear, Const(size.mid.pos.y)+10)
sprpriority = 9
;bindtime = -1
ownpal = 1

[State 4001, 10]
type = DestroySelf
trigger1 = time = 25

[Statedef 4501]
type = S
movetype = A
physics = N
ctrl = 0
anim = 926
velset = 2.8,0
sprpriority = 6

[State 1000, snd]
type = PlaySnd
trigger1 = Time = 0
value = 1050,0

[State 4501, Width]
type = Width
trigger1 = 1
value = 0,0
ignorehitpause = 1

[State 4501, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1010]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4501, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4501
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4501, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4501
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4501, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4501
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4501, 8]
type = HitDef
triggerall = !MoveHit && !MoveReversed
triggerall = NumEnemy
trigger1 = Time % 3 = 0
attr = S,HA
hitflag = MAFD
guardflag = MA 
animtype = hard
ground.type = High
air.type = High
priority = 7,Hit
damage = 150,15
pausetime = 0,5
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = -1
sparkxy = 20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+15, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
ground.velocity = -4
guard.velocity = -3
air.velocity = -4
p1sprpriority = 5
p2sprpriority = 0
p2stateno = 456852  ; credit: "R marker"
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
getpower  = 0,0
givepower = 2,2
ID = 4501

[State 4501, Explod] ; credit: "R marker"
type = Explod
triggerall = NumEnemy
trigger1 = Enemy, Name != "Gorilla Grodd"
trigger1 = Movehit = 1
pos = 0, 10
postype = p2
anim = 4602
sprpriority = 6
bindtime = 1
ignorehitpause = 1

[State 4501, Helper]
type = Helper
triggerall = NumEnemy
trigger1 = Enemy, Name != "Gorilla Grodd"
trigger1 = Movehit = 1
ID = 4553
stateno = 4553
postype = p2
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 4501 hyperBG2]
type = Null;Explod
trigger1 = MoveHit && time%3=0
anim = 8003
ID = 8003
supermovetime = 999999
pausemovetime = 999999
;removeongethit = 1
;removetime = -1
vel = 0, 0
postype = p2
pos = -20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+10, EnemyNear, Const(size.mid.pos.y)+10)
sprpriority = 9
;bindtime = -1
ownpal = 1

[State 4501 hyperBG2]
type = Explod
trigger1 = MoveGuarded && time%3=0
anim = 5940
ID = 5940
supermovetime = 999999
pausemovetime = 999999
;removeongethit = 1
;removetime = -1
vel = 0, 0
postype = p2
pos = -20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+10, EnemyNear, Const(size.mid.pos.y)+10)
sprpriority = 9
;bindtime = -1
ownpal = 1

[State 4501, 10]
type = DestroySelf
trigger1 = time = 25

[Statedef 4502]
type = S
movetype = A
physics = N
ctrl = 0
anim = 926
velset = 2.8,0
sprpriority = 6

[State 1000, snd]
type = PlaySnd
trigger1 = Time = 0
value = 1050,0

[State 4502, Width]
type = Width
trigger1 = 1
value = 0,0
ignorehitpause = 1

[State 4502, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1010]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4502, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4502
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4502, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4502
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4502, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4502
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4502, 8]
type = HitDef
triggerall = !MoveHit && !MoveReversed
trigger1 = Time % 3 = 0
attr = S,HA
hitflag = MAFD
guardflag = MA 
animtype = hard
ground.type = High
air.type = High
priority = 7,Hit
damage = 150,15
pausetime = 0,5
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = -1
sparkxy = 20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+15, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
ground.velocity = -4
guard.velocity = -3
air.velocity = -4
p1sprpriority = 5
p2sprpriority = 0
;p2stateno = 456852  ; credit: "R marker"
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
getpower  = 0,0
givepower = 2,2
ID = 4502

[State 4502, Explod] ; credit: "R marker"
type = Null;Explod
triggerall = NumEnemy
trigger1 = Enemy, Name != "Gorilla Grodd"
trigger1 = Movehit = 1
pos = 0, 10
postype = p2
anim = 4602
sprpriority = 6
bindtime = 1
ignorehitpause = 1

[State 4502, Helper]
type = Null;Helper
triggerall = NumEnemy
trigger1 = Enemy, Name != "Gorilla Grodd"
trigger1 = Movehit = 1
ID = 4553
stateno = 4553
postype = p2
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[State 4502 hyperBG2]
type = Explod
trigger1 = MoveHit && time%3=0
anim = 8003
ID = 8003
supermovetime = 999999
pausemovetime = 999999
;removeongethit = 1
;removetime = -1
vel = 0, 0
postype = p2
pos = -20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+10, EnemyNear, Const(size.mid.pos.y)+10)
sprpriority = 9
;bindtime = -1
ownpal = 1

[State 4502 hyperBG2]
type = Explod
trigger1 = MoveGuarded && time%3=0
anim = 5940
ID = 5940
supermovetime = 999999
pausemovetime = 999999
;removeongethit = 1
;removetime = -1
vel = 0, 0
postype = p2
pos = -20,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+10, EnemyNear, Const(size.mid.pos.y)+10)
sprpriority = 9
;bindtime = -1
ownpal = 1

[State 4502, 10]
type = DestroySelf
trigger1 = time = 25

[Statedef 4553]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 4553, BindToTarget]
type = Null;BindToTarget
trigger1 = NumTarget
time = 1
ID = 4501
pos = Target, Pos X, Target, Pos Y

[State 4553, PosSet]
type = PosSet
trigger1 = NumEnemy
trigger1 = Enemy, StateNo = 456852
trigger2 = P2StateNo = 456852
x = Enemy, Pos X
y = Enemy, Pos Y

[State 4553, Turn]
type = Turn
triggerall = Facing = Root, Facing
trigger1 = Floor(RootDist X) <= 0
persistent = 4

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Superman"
trigger1 = Time = 0
value = 4660

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Flash" || Enemy, Name = "Wally West"
trigger1 = Time = 0
value = 4661

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Batman" || Enemy, Name = "CN_Batman" || Enemy, Name = "Goddamn_Batman" || Enemy, Name = "Normal_Batman" || Enemy, Name = "Batman_West" || Enemy, Name = "DKR Batman"
trigger1 = Time = 0
value = 4662

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Black Adam"
trigger1 = Time = 0
value = 4663

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Martian Manhunter"
trigger1 = Time = 0
value = 4664

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Supergirl"
trigger1 = Time = 0
value = 4665

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Wonder Woman"
trigger1 = Time = 0
value = 4666

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Elongated Man" || Enemy, Name = "ElongatedMan"
trigger1 = Time = 0
value = 4667

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Vixen"
trigger1 = Time = 0
value = 4668

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Metallo"
trigger1 = Time = 0
value = 4669

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Red Tornado"
trigger1 = Time = 0
value = 4670

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Green Lantern" || Enemy, Name = "Kyle Rayner" || Enemy, Name = "Green Lantern Hal Jordan" || Enemy, Name = "John Stewart" || Enemy, Name = "Blackest Night Hal Jordan" || Enemy, Name = "John_StewartGL"
trigger1 = Time = 0
value = 4671

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Aquaman"
trigger1 = Time = 0
value = 4672

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Amazo"
trigger1 = Time = 0
value = 4673

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Fire"
trigger1 = Time = 0
value = 4674

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Felix Faust"
trigger1 = Time = 0
value = 4675

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name = "Orion" || Enemy, Name = "Orion" || Enemy, Name = "Orion"
trigger1 = Time = 0
value = 4676

[State 4553, ChangeAnim]
type = ChangeAnim
triggerall = NumEnemy
triggerall = Enemy, Name != "Felix Faust"
triggerall = Enemy, Name != "Fire"
triggerall = Enemy, Name != "Amazo"
triggerall = Enemy, Name != "Aquaman"
triggerall = Enemy, Name != "John_StewartGL"
triggerall = Enemy, Name != "Blackest Night Hal Jordan"
triggerall = Enemy, Name != "John Stewart"
triggerall = Enemy, Name != "Kyle Rayner"
triggerall = Enemy, Name != "Green Lantern"
triggerall = Enemy, Name != "Red Tornado"
triggerall = Enemy, Name != "Metallo"
triggerall = Enemy, Name != "Vixen"
triggerall = Enemy, Name != "ElongatedMan"
triggerall = Enemy, Name != "Elongated Man"
triggerall = Enemy, Name != "Wonder Woman"
triggerall = Enemy, Name != "Supergirl"
triggerall = Enemy, Name != "Martian Manhunter"
triggerall = Enemy, Name != "Black Adam"
triggerall = Enemy, Name != "DKR Batman"
triggerall = Enemy, Name != "Batman_West"
triggerall = Enemy, Name != "Normal_Batman"
triggerall = Enemy, Name != "Goddamn_Batman"
triggerall = Enemy, Name != "CN_Batman"
triggerall = Enemy, Name != "Batman"
triggerall = Enemy, Name != "Wally West"
triggerall = Enemy, Name != "Flash"
triggerall = Enemy, Name != "Superman"
triggerall = Enemy, Name != "Orion"
triggerall = Enemy, Name != "Orion"
triggerall = Enemy, Name != "Orion"
;triggerall = Enemy, Name != "Fire"
trigger1 = Time = 0
value = 4685

[State 4553, snd]
type = PlaySnd
trigger1 = Time = 0
value = 4602,0
volumescale = 1000

[State 4553, Width]
type = Width
trigger1 = 1
value = 0,0
ignorehitpause = 1

[State 4553, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1010]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4553, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4553
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4553, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4553
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4553, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4553
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4553, Explod] ; credit: "R marker"
type = Explod
triggerall = NumEnemy
trigger1 = EnemyNear, StateNo = 456852
trigger1 = EnemyNear, Time = 288
pos = 0, 10
postype = p2
anim = 4602
sprpriority = 6
bindtime = 1
ignorehitpause = 1
persistent = 0

[State 4553, PlaySnd]
type = PlaySnd
triggerall = NumEnemy
trigger1 = EnemyNear, StateNo = 456852
trigger1 = EnemyNear, Time = 288
value = 4602,0
volumescale = 1000
ignorehitpause = 1
persistent = 0

[State 4553, DestroySelf]
type = DestroySelf
trigger1 = NumEnemy
trigger1 = Enemy, StateNo != 456852
trigger2 = P2StateNo != 456852

[Statedef 4333]
type = S
movetype = A
physics = N
ctrl = 0
anim = 6789
velset = 7,0
sprpriority = -5

[State 4333]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4333, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4333
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4333, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4333
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4333, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4333
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 1000, snd]
type = Posset
trigger1 = time = 0
value = -290,0

[State 4333, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 1000, snd]
type = PlaySnd
trigger1 = animelem = 4
value = s0,0

[State 1000, snd]
type = PlaySnd
trigger1 = animelem = 10
value = s0,4

[State 4001, 8]
type = HitDef
trigger1 = Time > 0 && Ceil(P2Dist X) >= -10
attr = S,HA
hitflag = MAF;D
guardflag = MA
animtype = hard
ground.type = low
air.type = low
priority = 5,Hit
damage = 9,4;10
pausetime = 1,5
guard.pausetime = 2,3
sparkno = s5920 
guard.sparkno = s5940
sparkxy = -5,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+20, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
ground.velocity = -1
guard.velocity = -3
air.velocity = -1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
getpower  = 0,0
givepower = 5,5

[State 4001, 8]
type = HitDef
trigger1 = Time > 0 && Ceil(P2Dist X) < -10
attr = S,HA
hitflag = MAF;D
guardflag = MA
animtype = back
ground.type = low
air.type = low
priority = 5,Hit
damage = 9,4;10
pausetime = 1,5
guard.pausetime = 2,3
sparkno = s5930 
guard.sparkno = s5940
sparkxy = -5,IfElse(P2StateType != C, EnemyNear, Const(size.head.pos.y)+20, EnemyNear, Const(size.mid.pos.y)+15)
hitsound = s0, 19
guardsound = s0, 16
ground.slidetime = 25
guard.slidetime = 25
ground.hittime = 25
guard.hittime = 25
air.hittime = 25
ground.velocity = -7,-7
guard.velocity = -3
air.velocity =  -7,-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
getpower  = 0,0
givepower = 5,5
fall = 1
fall.recover = 0

[State 4001, 10]
type = DestroySelf
trigger1 = time = 150

[Statedef 4334]
type = S
movetype = I
physics = N
ctrl = 0
anim = 19204;6789
velset = 0,-4.3
sprpriority = -5

[State 4334, BindToRoot]
type = BindToRoot
trigger1 = Time = 0
pos = 0,250

[State 4334]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4334, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4334
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4334, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4334
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4334, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4334
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4334, snd]
type = Null;Posset
trigger1 = time = 0
value = -290,0

[State 4334, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 4334, snd]
type = PlaySnd
trigger1 = Root, StateNo != [4301,4303]
trigger1 = animelem = 6
trigger1 = RootDist Y < -70
value = s0,0

[State 4334, snd]
type = PlaySnd
trigger1 = Root, StateNo != [4301,4303]
trigger1 = animelem = 2
trigger1 = RootDist Y < -70
value = s0,4

[State 4334, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 4334, AssertSpecial]
type = AssertSpecial
trigger1 = Root, StateNo = 4300
trigger1 = Root, AnimElemTime(8) <= 4
trigger2 = Root, StateNo = [4301,4303]
flag = invisible
;flag2 = noshadow
;flag3 = noautoturn

[State 4334, AssertSpecial]
type = AssertSpecial
trigger1 = RootDist Y >= -70
trigger2 = Root, StateNo = 4301
flag = invisible
;flag2 = noshadow
flag2 = noautoturn

[State 4334, VelSet]
type = VelSet
trigger1 = RootDist Y >= -70
trigger2 = Root, StateNo = 4301
x = 0
y = 0

[State 4334, ChangeState]
type = ChangeState 
triggerall = Root, StateNo = 4300 || Root, StateNo >= 5000
trigger1 = Root, MoveType = H
trigger2 = Root, RoundState != 2 || RoundState != 2
trigger3 = Root, Win
trigger4 = Root, Lose
trigger5 = Root, DrawGame
value = 4335
ctrl = 0

[State 4334, ChangeState]
type = ChangeState 
trigger1 = Root, StateNo = 4301
trigger1 = Root, Var(43) >= 548
trigger2 = Root, MoveType = H
trigger3 = Root, RoundState != 2 || RoundState != 2
trigger4 = Root, Win
trigger5 = Root, Lose
trigger6 = Root, DrawGame
trigger7 = Root, StateNo = 54
trigger8 = NumEnemy
trigger8 = Enemy, Alive = 0 || Enemy, Life = 0 || Enemy, Lose || Enemy, StateNo = 5150
trigger9 = P2Life = 0
trigger10 = P2StateNo = 5150
value = 4336
ctrl = 0

[State 4334, ChangeState]
type = Null;ChangeState 
triggerall = (Root, StateNo != [4300,4303]) || Root, StateNo >= 5000
trigger1 = Root, MoveType = H
trigger2 = Root, RoundState != 2 || RoundState != 2
trigger3 = Root, Win
trigger4 = Root, Lose
trigger5 = Root, DrawGame
trigger6 = Root, StateNo = 54
value = 4336
ctrl = 0

[Statedef 4335]
type = S
movetype = I
physics = N
ctrl = 0
anim = 19303;6789
velset = 0,2.5
sprpriority = -5

[State 4333, BindToRoot]
type = Null;BindToRoot
trigger1 = Time = 0
facing = 1
pos = 0,250

[State 4335, Offset]
type = Offset
trigger1 = 1;AnimElemTime(2) < 0
x = 34
y = 45
ignorehitpause = 1

[State 4335]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4335, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4335
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4335, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4335
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4335, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4335
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4335, snd]
type = Null;Posset
trigger1 = time = 0
value = -290,0

[State 4335, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 4335, AssertSpecial]
type = AssertSpecial
trigger1 = Root, StateNo = [4301,4303]
flag = invisible
flag2 = noshadow
;flag3 = noautoturn

[State 4335, snd]
type = PlaySnd
trigger1 = Root, StateNo != [4301,4303]
trigger1 = animelem = 3
trigger2 = animelem = 7
value = s0,0

[State 4335, snd]
type = PlaySnd
trigger1 = Root, StateNo != [4301,4303]
trigger1 = animelem = 5
trigger2 = animelem = 9
value = s0,4

[State 4335, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 2.5

[State 4335, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 4335, DestroySelf]
type = DestroySelf
trigger1 = Time >= 1000
trigger2 = FrontEdgeDist <= -80
trigger3 = Pos Y >= 220

[Statedef 4336]
type = S
movetype = I
physics = N
ctrl = 0
anim = 19303;6789
velset = 0,-2.5
sprpriority = -2

[State 4336, BindToRoot]
type = BindToRoot
trigger1 = Time = 0 ;1
facing = 1
pos = 37,106

[State 4336, Offset]
type = Null;Offset
trigger1 = 1;AnimElemTime(2) < 0
x = 34
y = 45
ignorehitpause = 1

[State 4336]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4336, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 4336
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4336, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 4336
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4336, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 4336
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 4336, snd]
type = Null;Posset
trigger1 = time = 0
value = -290,0

[State 4336, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = 1
text = "FrontEdgeDist = %d, P2DistX = %d"
params = FrontEdgeDist, Ceil(P2Dist X)
ignorehitpause = 1

[State 4336, AssertSpecial]
type = AssertSpecial
trigger1 = Root, StateNo = [4301,4303]
flag = invisible
flag2 = noshadow
;flag3 = noautoturn

[State 4336, snd]
type = PlaySnd
triggerall = Root, StateNo != [4301,4303]
trigger1 = animelem = 3
trigger2 = animelem = 7
value = s0,0

[State 4336, snd]
type = PlaySnd
triggerall = Root, StateNo != [4301,4303]
trigger1 = animelem = 5
trigger2 = animelem = 9
value = s0,4

[State 4336, VelSet]
type = VelSet
trigger1 = 1
x = 3
y = -3

[State 4336, DestroySelf]
type = DestroySelf
trigger1 = Time >= 1000
trigger2 = FrontEdgeDist <= -80

[Statedef 4002]
type = S
movetype = I
physics = S
ctrl = 0
anim = 4002
velset = 0,0
sprpriority = 5

[State 4002, 1]
type = AfterImageTime
trigger1 = time = 0
time = 10

[State 4002, 2]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype=H

[Statedef 4003]
type = S
movetype = I
physics = S
ctrl = 0
anim = 4003
velset = 0,0
sprpriority = 5

[State 4003, 1]
type = Gravity
trigger1 = time <=10 && statetype = A

[State 4003, 2]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 4003, 3]
type = StateTypeSet
trigger1 = time = 0
trigger1 = pos y >= 0
statetype = S
physics = S

[State 4003, 4]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State 4003, 5]
type = BindToTarget
trigger1 = time >= 0
time = 1
pos = 0,0,foot

[State 4003, 6]
type = ChangeState
trigger1 = statetype = S
trigger1 = time = 80
trigger2 = p2stateno != 4005
trigger3 = statetype = A
trigger3 = pos y >= -5
value = 4004

[Statedef 4004]
type = S
movetype = I
physics = S
ctrl = 0
anim = 4004
sprpriority = 5

[State 4004, 1]
type = PosSet
trigger1 = stateno = 4004
y = 0

[State 4004, 2]
type = AfterImage
trigger1 = time = 0
time = 999
length = 3
framegap = 1
palcolor = 38
trans = Add

[State 4004, 3]
type = DestroySelf
trigger1 = animtime = 0

[Statedef 4005]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
anim = 5000
sprpriority = 0

[State 4005, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 4005

[State 4005, 2]
type = StateTypeSet
trigger1 = time = 0
trigger1 = pos y >= 0
statetype = S
physics = S

[State 4005, 3]
type = PosSet
trigger1 = time >= 0
trigger1 = statetype = S
y = 0

[State 4005, 4]
type = selfstate
trigger1 = Time >= 40
trigger1 = Life <= 0
trigger2 = HitCount = 1
value = 5000
ctrl = 0

[State 4005, 5]
type = selfstate
triggerall = Life > 0
trigger1 = Time >= 40
trigger1 = Pos Y = 0
trigger2 = statetype = A
trigger2 = pos y >= -5
anim = 5200
value = 5200
ctrl = 1

[State 4005, 6]
type = selfstate
trigger1 = Time >= 40
trigger1 = Life > 0
trigger1 = Pos Y <= 0
value = 51
ctrl = 1

; Advanced Guard by mouser (Helper) 
[Statedef 8060]
type = A
physics = N
anim = 8061
velset = -14,0
ctrl = 0

[State 8060, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 300,4

[State 8060, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 8060, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 8060, DestroySelf]
type = DestroySelf
trigger1 = time = 16;24

[Statedef 8061]
type = A
physics = N
anim = 8061
velset = -14,0
ctrl = 0

[State 8061, PlaySnd]
type = Null;PlaySnd
trigger1 = time = 0
value = 300,4

[State 8061, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 8061, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 8061, DestroySelf]
type = DestroySelf
trigger1 = time = 6;24
trigger2 = root, stateno = 4000
trigger2 = root, animelem = 4
trigger3 = Root, Ceil(P2Dist X) >= 130
;trigger4 = p2stateno = [1025,1028]

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
;[Statedef -2]

; Level-up sounds
[State -2, levelup var 0]
type = NULL;VarSet
trigger1 = power < 1000
v =  1
value = 0

[State -2, levelup snd 1]
type = NULL;PlaySnd
trigger1 = (power >= 1000) && (power < 2000) && (var(1) < 1) && (RoundState = 2)
value = 12,0

[State -2, levelup var 1]
type = NULL;VarSet
trigger1 = (power >= 1000) && (power < 2000)
v =  1
value = 1

[State -2, levelup snd 2]
type = NULL;PlaySnd
trigger1 = (power >= 2000) && (power < 3000) && (var(1) < 2) && (RoundState = 2)
value = 12,1

[State -2, levelup var 2]
type = NULL;VarSet
trigger1 = (power >= 2000) && (power < 3000)
v =  1
value = 2

[State -2, levelup snd 3]
type = NULL;PlaySnd
trigger1 = (power >= 3000) && (var(1) < 3) && (RoundState = 2)
value = 12,2

[State -2, levelup var 3]
type = NULL;VarSet
trigger1 = (power >= 3000)
v =  1
value = 3

;-------------------------------------------------------------
;Super BG
;-------------------------------------------------------------
[Statedef 8005]
type = A
physics  = N
sprpriority = 5

[State 8018]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noFG

[State 8018, muteki]
type = NotHitBy
trigger1 = 1
value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
time = -1

[State 8018, 3]
type = PosSet
trigger1 = 1
y = 0
x = -160

[State 0, ]
type = EnvColor
trigger1 = timemod = 10,1
value = ceil (random/1),0,ceil (random/1)
time = 10
under = 1
ignorehitpause = 1

[State 8005, hyperBG2]
type = Explod
trigger1 = Time = 0
anim = 9999
ID = 9999
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = ifelse(Root, StateNo = 4300, 130, -1)
vel = 0, 0
postype = back
pos = 0, 0
sprpriority = -999995
bindtime = -1
ownpal = 1

[State 8018,1]
type = Explod
trigger1 = time= 1
anim = 110
ID = 110
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = -1
vel = 0, 0
postype = p1
pos = 0, 0
sprpriority = -999998
bindtime = -1
ownpal = 0
scale = 2,1

[State 8018,1]
type = Explod
trigger1 = time= 1
anim = 115
ID = 110
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = -1
vel = 0, 0
postype = back
pos = 0, 0
sprpriority = -999999
bindtime = -1
ownpal = 0
scale = 1.0,1.0

[State 8018, Assert]
type = assertspecial
trigger1 = Animtime != 0
flag = noshadow

[State 8018, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(9999)
trigger1 = root,winko || roundstate > 2
trigger2 = root, stateno = [180,189]
trigger3 = root, NumHelper(8510) != 0
trigger4 = P2Life = 0 || EnemyNear, Alive = 0
id = 9999
ignorehitpause = 1

[State 8018, DestroySelf]
type = DestroySelf
trigger1 = root,winko || roundstate > 2
trigger2 = root, stateno = [180,189]
trigger3 = root,numhelper(8510)
trigger4 = P2Life = 0 || EnemyNear, Alive = 0

[State 8018, 6]
type = ChangeState
Trigger1 = Time = ifelse(Root, StateNo = 4300, 130, 20)
value = 8006
ctrl = 0

[Statedef 8006]
type = A
physics  = N
sprpriority = 5

[State 80180]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noBG
flag3 = noFG

[State 80180, 3]
type = posset
trigger1 = 1
y = 0
x = -160

[State 0, ]
type = EnvColor
trigger1 = timemod = 10,1
value = ceil (random/1),0,ceil (random/1)
time = 10
under = 1
ignorehitpause = 1

[State 8018,1]
type = Explod
trigger1 = timemod = 4,1 && numexplod(111) <= 20
anim = 111
ID = 111
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = 60
vel = -10-ceil(random/20), 0
postype = p1
pos = 320, 0
random = 20,500
ontop = 1
bindtime = 1
ownpal = 1

[State 8018,1]
type = Explod
trigger1 = timemod = 4,1 && numexplod(112) <= 20
anim = 112
ID = 112
supermovetime = 999999
pausemovetime = 999999
removeongethit = 1
removetime = 60
vel = -10-ceil(random/20), 0
postype = p1
pos = 320, 0
random = 20,500
ontop = 1
bindtime = 1
ownpal = 1

[State 80180, muteki]
type = NotHitBy
trigger1 = Time = 0
value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
time = -1

[State 80180, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(9999)
trigger1 = root,winko || roundstate > 2
trigger2 = root, stateno = [180,189]
trigger3 = root, NumHelper(8510) != 0
trigger4 = P2Life = 0 || EnemyNear, Alive = 0
id = 9999
ignorehitpause = 1

[State 80180, Assert]
type = assertspecial
trigger1 = Animtime != 0
flag = noshadow

[State 80180, DestroySelf]
type = DestroySelf
trigger1 = root,winko || roundstate > 2
trigger2 = root, stateno = [180,189]
trigger3 = root,numhelper(8510)
trigger4 = P2Life = 0 || EnemyNear, Alive = 0

[State 80180, ChangeState] ; hyper finish bg by mouser
type = Null;ChangeState
trigger1 = time >= 37 && roundstate > 2
trigger2 = root, winko
value = 8510

[State 80180, 6]
type = ChangeState
Trigger1 = parent,movetype != A
value = 8007
ctrl = 0

[Statedef 8007]
type = A
physics  = N
sprpriority = 5

[State 80181]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 80181, 3]
type = PosSet
trigger1 = 1
y = 0
x = -160

[State 80181, Assert]
type = assertspecial
trigger1 = Animtime != 0
flag = noshadow

[State 80181, muteki]
type = NotHitBy
trigger1 = Time = 0
value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
time = -1

[State 0, ]
type = RemoveExplod
trigger1 = time >= 10
trigger2 = root,movetype = H
ID = 110
ignorehitpause = 1

[State 0, ]
type = RemoveExplod
trigger1 = time >= 10
trigger2 = root,movetype = H
ID = 111
ignorehitpause = 1

[State 0, ]
type = RemoveExplod
trigger1 = time >= 10
trigger2 = root,movetype = H
ID = 112
ignorehitpause = 1

[State 0, ]
type = RemoveExplod
trigger1 = time >= 10
trigger2 = root,movetype = H
ID = 9999
ignorehitpause = 1

[State 8018, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(9999)
trigger1 = root,winko || roundstate > 2
trigger2 = root, stateno = [180,189]
trigger3 = root, NumHelper(8510) != 0
trigger4 = P2Life = 0 || EnemyNear, Alive = 0
id = 9999
ignorehitpause = 1

[State 80181, ChangeState] ; hyper finish bg by mouser
type = Null;ChangeState
trigger1 = time >= 37 && roundstate > 2
trigger2 = root, winko
value = 8510

[State 80181, 7]
type = DestroySelf
Trigger1 = Time = 20
trigger2 = root,movetype = H
trigger3 = root,numhelper(8510)
trigger4 = P2Life = 0 || EnemyNear, Alive = 0

[Statedef 8510] 
type = A
physics = N
anim = 9889
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 8510,0

[State 8510, PlaySnd]
type = null;PlaySnd
trigger1 = time = 0
value = 2,12

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, ParentVarSet]
type = ParentVarSet
trigger1 = 1
v = 46
value = 1
ignorehitpause = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)
trigger2 = root, stateno = [180,189]

[Statedef 8200] ; landing dust by mouser
type = A
movetype = H
physics = N
anim = 9889

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

[Statedef -2]

[State 902, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "P2DistY = %d, P2DistX = %d, var(17) = %d, Var(44) = %d, Var(43) = %d, posy = %d"
params = Ceil(P2Dist Y), Ceil(P2Dist X), var(17), Var(44), Var(43), pos y
ignorehitpause = 1

[State -2, Damage Dampener]; Scaling in action Marvel vs Capcom's system by PotS
type= attackmulset
trigger1= numenemy
value= ifelse(enemynear, gethitvar(hitcount) = 0, 1, ifelse(enemynear, gethitvar(hitcount) = 1, 0.9, 0.8**enemynear, gethitvar(hitcount)))
ignorehitpause= 1

[State -2, Damage Dampener]; Full damage Marvel vs Capcom's system by PotS
type= attackmulset
trigger1= numenemy
trigger1= enemynear,movetype!=H || (enemynear,stateno=[120,155])
value= 1.0
ignorehitpause= 1

[state -2, VarRandom]
type = VarRandom
;triggreall = AILevel != 0
trigger1 = 0 + 1;NumEnemy
v = 58
range = 1,50
ignorehitpause = 1

[State -2, PowerAdd]
type = PowerAdd
triggerall = AILevel != 0
trigger1 = Power <= PowerMax
trigger1 = MoveType = A
trigger1 = Time = [0,10]
trigger1 = StateNo != [2000,4999]
trigger2 = Power <= PowerMax
trigger2 = MoveType = H
trigger2 = StateNo = [5000,9999]
trigger2 = Time = [0,10]
value = ifelse((StateNo = [5000,9999]), 10, 5)
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1
persistent = 1

[State -2, PowerAdd]
type = PowerAdd
triggerall = AILevel != 0
trigger1 = Power <= PowerMax
trigger1 = MoveType != A
trigger1 = Time = [0,5]
trigger1 = StateNo = [150,155]
value = 5
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1
persistent = 1

[State -2, removeexplod]
type = removeexplod
trigger1 = movetype = H
id = 11111
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 54
trigger2 = StateNo != [4301,4303]
v = 43
value = 0
ignorehitpause = 1

[State -2, TargetState] ; by mouser 
type = TargetState
triggerall = NumTarget(420)
triggerall = !HitPauseTime
triggerall = !(Target, StateNo = 5080)
trigger1 = Target, GetHitVar(chainid) & 420
trigger1 = Target, StateNo != [120,155]
trigger1 = Target, HitOver && Target, Alive && Target, HitShakeOver
trigger1 = Target, StateType = A && Target, StateNo != 9900
value = 9900

; Advanced Guard by mouser 
[State -2, Advanced Guard by mouser]
type = Helper
trigger1 = var(11)
stateno = 8060
postype = p2
pos = 20,0
id = 8060
supermovetime = 9999999
pausemovetime = 9999999
ignorehitpause = 1

[State -2, Advanced Guard by mouser]
type = PosFreeze
trigger1 = numhelper(8060)
ignorehitpause = 1

[State -2, Advanced Guard by mouser]
type = VelAdd
trigger1 = numhelper(8060)
trigger1 = statetype = A
y = -gethitvar(yaccel)
ignorehitpause = 1

[State -2, Advanced Guard by mouser]
type = Explod
trigger1 = var(11)
anim = 8060
id = 8060
pos = 15,ifelse(StateType = C, -65, -85)
ontop = 1
ignorehitpause = 1

[State -2, Advanced Guard by mouser]
type = VarSet
trigger1 = var(11)
var(11) = 0
ignorehitpause = 1

; -[ Super Jump Control ]- by davidgee
[State -2, VarSet]
type = VarSet
triggerall = StateType != A
trigger1 = StateNo != 41
var(31) = 0
ignorehitpause = 1

;----- MoveHit -----
[State -2, VarSet]
type = VarSet
trigger1 = !NumTarget
ignorehitpause = 1
v = 18
value = 0

[State -2, VarSet]
type = VarSet
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, StateType != A
ignorehitpause = 1
v = 17
value = 0

[State -2, VarAdd]
type = VarSet
triggerall = StateType != A
trigger1 = NumTarget
ignorehitpause = 1
v = 18
value = Target, GetHitVar(hitcount)

[State -2, VarAdd]
type = VarSet
triggerall = StateType = A
trigger1 = NumTarget(600) || NumTarget(630) || NumTarget(610) || NumTarget(640) 
trigger1 = Target, StateType = A
ignorehitpause = 1
v = 17
value = Target, GetHitVar(hitcount)

[State -2, TargetDrop]
type = Null;TargetDrop
triggerall = NumTarget
trigger1 = P2StateNo = 1028
ignorehitpause = 1
;--------------------

; Super Jump Locator P2 ; by mouser
[State -2, Explod] ; by mouser
type = Explod
triggerall = numenemy = 1
;triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 910;909+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),235
scale = 1,1
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 910

[State -2, Explod] ; by mouser
type = Explod
triggerall = numenemy = 1
;triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 910;909+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),45
scale = 1,1
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 910

[State -2, VarSet]
type = VarSet
trigger1 = P2StateNo = [53000,53002]
v = 9
value = 1
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = P2StateNo != [53000,53002]
trigger1 = Var(18) = 0
trigger2 = P2MoveType = I
v = 9
value = 0
ignorehitpause = 1

[State -2, stopsnd]
type = stopsnd
triggerall = P2Name = "Gorila Grodd"
triggerall = P2StateNo != [53000,53002]
trigger1 = 1
channel = 5
ignorehitpause = 1

[State -2, return]
type = removeexplod
trigger1 = movetype = H
id = 808
ignorehitpause = 1

[State -2, return]
type = removeexplod
trigger1 = movetype = H
id = 4002
ignorehitpause = 1

[State -2, Explod]
type = Explod
triggerall = NumExplod(8015) = 0
triggerall = P2StateNo = 1027
trigger1 = EnemyNear, Time = 1
id = 8015
anim = 8015
postype = P2
pos = -30,0
facing = -1
sprpriority = 3
ignorehitpause = 1

[State -2, Sound]
type = PlaySnd
triggerall = P2StateNo = 1027
trigger1 = EnemyNear, Time = 1
value = s0,8
ignorehitpause = 1
persistent = 0
 
[State -2, Helper] ; hyper finish Helper by mouser
type = Helper
;triggerall = NumHelper(8005) = 0
triggerall = NumHelper(8510) = 0
triggerall = var(46) = 0
triggerall = winko || P2Life = 0 || EnemyNear, Alive = 0
trigger1 = NumTarget(4100)
trigger2 = NumHelper(4001) != 0
trigger2 = Helper(4001), MoveHit
trigger3 = NumTarget(4200)
trigger4 = NumHelper(4333) != 0
trigger4 = Helper(4333), MoveHit
trigger5 = NumHelper(4405) != 0
trigger5 = Helper(4405), MoveHit
trigger6 = StateNo = [4000,4500]
stateno = 8510
supermovetime = 99999999
ownpal = 1
id = 8510
ignorehitpause = 1

[State 8018, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(9999)
trigger1 = winko || roundstate > 2
trigger2 = stateno = [180,189]
trigger3 = P2Life = 0 || EnemyNear, Alive = 0
id = 9999
ignorehitpause = 1

[Statedef 1330] ; credit:  Lord Sinistro
type = S
movetype = I
physics = N
anim = 1301
velset = 4,6 
ctrl = 0
sprpriority = 0
facep2 = 0

[State 1330, SprPriority]
type = SprPriority
trigger1 = Anim = 1301
value = 0
ignorehitpause = 1

[State 1330, SprPriority]
type = SprPriority
trigger1 = Anim = 1302
trigger2 = Anim = 1303
value = 6
ignorehitpause = 1

[State 1330, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 1330, HitOverride]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 1330
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = -1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 1330, ChangeState]
type = ChangeState
trigger1 = MoveReversed
value = 1330
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 1330, SelfState]
type = SelfState
trigger1 = MoveReversed
value = 1330
ctrl = 0 
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 1330, 2]
type = velset
trigger1 = pos Y >= 10
Y = 0
x = 0

[State 1330 , 0]
type = PlaySnd 
trigger1 = time = 20
value = 1330,0

[State 1330, 0]
Type = AssertSpecial
trigger1 = time >= 0
flag = noshadow 

[State 1330, 1]
type = changeanim
trigger1 = anim = 1301
trigger1 = pos Y >= 10
value = 1302

[State 1330, 2]
type = velset
trigger1 = anim = 1302
trigger1 = time >= 41
Y = -9
x = 0

[State 1330, 4] 
type = HitDef
triggerall = !movehit && !movereversed
trigger1 = time = 30
trigger2 = time = 40
trigger3 = time = 50
trigger4 = time = 60
attr = S, SP
animtype  = high
damage    = 100, 15
hitflag = MAFD
guardflag = MA
pausetime = 0,0
sparkxy = 0,-55
sparkno = -1
guard.sparkno = s5940
hitsound  = s1330,1
guardsound = s0, 16 
ground.type = low
ground.slidetime = 2 ;15
ground.hittime  = 20
ground.velocity = -2,-6
air.velocity = -1,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
fall = 1
fall.recover = 0
palfx.time = 50
palfx.add = 180,70, -50
palfx.sinadd = -100,-100,-100,10

[State 1330, 5]
type = explod
trigger1 = pos Y >= 10 && numexplod(1303) = 0
persitent = 0
anim = 1303
ID = 1303
pos = 0,0
postype = p1
ontop = 1

[State 1330, 6]
type = explod
trigger1 = movehit && numexplod(920) = 0
persitent = 0
anim = 920
ID = 920
pos = 20,-30
postype = p2
bindtime = -1
removetime = 55
ontop = 1

[State 1330, 6]
type = explod
trigger1 = movehit && numexplod(922) = 0
persitent = 0
anim = 922
ID = 922
pos = -40,-35
postype = p2
bindtime = -1
removetime = 60
ontop = 1

[State 1330, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1302
movetype = A
ignorehitpause = 1

[State 1330, 7]
type = DestroySelf
trigger1 = time = 80

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------
[Statedef -3]

[State -3, PosSet]
type = PosSet
trigger1 = StateNo = [200,4999]
trigger1 = StateNo != [4300,4305]
trigger1 = StateNo != [600,699]
y = 0
ignorehitpause = 1
persistent = 1

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 52,0 ;40, 0
ignorehitpause = 1

[State -3, PlaySnd]
type = PlaySnd
triggerall = Life != 0 && Alive = 1
triggerall = GetHitVar(animtype) = 0
triggerall = Time = 1
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020
value = 5000,0
volumescale = 500
channel = 0
lowpriority = 0
freqmul = 1.0
loop = 0
pan = 0
abspan = 0
pausemovetime = 2147483647
supermovetime = 2147483647
ignorehitpause = 1
persistent = 0

[State -3, PlaySnd]
type = PlaySnd
triggerall = Life != 0 && Alive = 1
triggerall = GetHitVar(animtype) = 1
triggerall = Time = 1
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020
value = 5000,1
volumescale = 500
channel = 0
lowpriority = 0
freqmul = 1.0
loop = 0
pan = 0
abspan = 0
pausemovetime = 2147483647
supermovetime = 2147483647
ignorehitpause = 1
persistent = 0

[State -3, PlaySnd]
type = PlaySnd
triggerall = Life != 0 && Alive = 1
triggerall = GetHitVar(animtype) = 2
triggerall = Time = 1
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020
value = 5000,2
volumescale = 500
channel = 0
lowpriority = 0
freqmul = 1.0
loop = 0
pan = 0
abspan = 0
pausemovetime = 2147483647
supermovetime = 2147483647
ignorehitpause = 1
persistent = 0

[State -3, PlaySnd]
type = PlaySnd
triggerall = Life != 0 && Alive = 1
triggerall = GetHitVar(animtype) = [1,5]
triggerall = Time = 1
trigger1 = StateNo = 5070
value = 5070,0
volumescale = 500
channel = 0
lowpriority = 0
freqmul = 1.0
loop = 0
pan = 0
abspan = 0
pausemovetime = 2147483647
supermovetime = 2147483647
ignorehitpause = 1
persistent = 0

[State -3, PlaySnd]
type = PlaySnd
triggerall = Life != 0 && Alive = 1
triggerall = GetHitVar(animtype) = [3,5]
triggerall = Time = 1
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020
value = 5000,3
volumescale = 500
channel = 0
lowpriority = 0
freqmul = 1.0
loop = 0
pan = 0
abspan = 0
pausemovetime = 2147483647
supermovetime = 2147483647
ignorehitpause = 1
persistent = 0

[State -3, Explod] ; credit: "R marker"
type = Null;Explod
trigger1 = NumEnemy
trigger1 = Enemy, PrevStateNo = [456852,4554]
pos = 0, 10
postype = p2
anim = 4602
sprpriority = 6
bindtime = 1
ignorehitpause = 0
persistent = 0

[State -3, Offset]
type = Offset
triggerall = StateType != A
trigger1 = StateNo = [120,155]
x = 0
y = 6
ignorehitpause = 1

[State -3, ScreenBound]
type = ScreenBound
triggerall = NumEnemy
trigger1 = NumHelper(4334) != 0
value = 1*(Ceil(Pos Y - ScreenPos Y) >= -Floor(GameHeight - ScreenPos Y))
movecamera = 1,0;1*(Ceil(Pos Y - ScreenPos Y) >= -Floor(GameHeight - ScreenPos Y))
ignorehitpause = 1

; Corner Push - The greatest hits of character feedback by PotS - start

;ground.cornerpush.veloff = 0
;guard.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;airguard.cornerpush.veloff = 0
;down.cornerpush.veloff = 0

[State -3, Corner Push]; Reset
type= varset
trigger1= fvar(5)
trigger1= numtarget
trigger1= (target, hitover) || (target, gethitvar(hitshaketime) > 0 && target, time <= 0)
fvar(5)= 0

[State -3, Corner Push]; Get initial velocity
type= varset
trigger1= movecontact=1 && numtarget
fvar(5)= (target, gethitvar(xvel))
ignorehitpause= 1

[State -3, Corner Push]; Apply corner push
type= posadd
triggerall = StateNo != 220
triggerall = StateNo != 250
triggerall = StateNo != 610
triggerall = StateNo != 640
triggerall = StateNo != 902
triggerall= fvar(5)
triggerall= (statetype = S || statetype = C) && numtarget
triggerall= !hitpausetime && (target, gethitvar(hitshaketime) <= 0)
triggerall= (target, statetype = S || target, statetype = C) && !(target, gethitvar(yvel)) && !(target, hitfall); See note below
;triggerall= (target, statetype != L) && !(target, gethitvar(yvel)) && !(target, hitfall); See note below
trigger1= target, frontedgebodydist <= abs(target, vel x)
trigger1= (target, gethitvar(xvel) * target, facing) > 0
trigger2= target, backedgebodydist <= abs(target, vel x)
trigger2= (target, gethitvar(xvel) * target, facing) < 0
x= ifelse(target, frontedgebodydist <= 0, -1, 1) * (target, facing) * fvar(5)

[State -3, Corner Push]; Apply friction to the velocity
type= varset
trigger1= numtarget
trigger1= target, gethitvar(hitshaketime) <= 0
fvar(5)= fvar(5) * 0.85

;Note:  This code was designed for types of gameplay where the attacker doesn't suffer corner push if the opponent is in the air 
;(SF, KOF, so on), if you want to change that aspect you can change the line signaled above with "triggerall= (target, statetype != 
;L)".  There's no guarantee that that change will make it work perfectly, but it will still get the job done.
;
;One added benefit of using a custom system like this is that you can then reset or disable corner push at any time you want by 
;making that var 0, and you'll want to reset it for instance when a super move's superpause happens.

; Corner Push - The greatest hits of character feedback by PotS - end

[State -3, Prevent Undergound Juggles] ; The greatest hits of character feedback by PotS
type= targetbind
trigger1= movehit=1
trigger1= numtarget=1 && numenemy
trigger1= (target,time<=1) && (target,ID=enemynear,ID); this is just to prevent Simul issues as usual
trigger1= !(target,hitshakeover) && (target, hitfall) && (target, pos y>0)
pos= ceil(p2dist x), ceil(-pos y); keeps P2 at the same horizontal distance, but resets his Y position
ignorehitpause= 1

[State -3, Explod] ; credit: "R marker"
type = Explod
triggerall = NumEnemy
trigger1 = EnemyNear, PrevStateNo = 456852
trigger1 = (EnemyNear, StateNo = 861) || (EnemyNear, StateNo = 1025) || (EnemyNear, StateNo = [5000,5999])
trigger1 = EnemyNear, StateNo != [456852,4555]
trigger1 = EnemyNear, Time = [0,1]
pos = 0, 10
postype = p2
anim = 4602
sprpriority = 6
bindtime = 1
ignorehitpause = 1
persistent = 0

[State -3, PlaySnd]
type = PlaySnd
triggerall = NumEnemy
trigger1 = EnemyNear, PrevStateNo = 456852
trigger1 = (EnemyNear, StateNo = 861) || (EnemyNear, StateNo = 1025) || (EnemyNear, StateNo = [5000,5999])
trigger1 = EnemyNear, StateNo != [456852,4555]
trigger1 = EnemyNear, Time = [0,1]
value = 4602,0
volumescale = 1000
ignorehitpause = 1
persistent = 0

;;;;;;;;A.I.  Seravy's A.I. guide


;;;; simpler? ;;;;

[State -3, ChangeState]
type = ChangeState
value = 130
triggerall = Var(59) > 0 && Alive && RoundState = 2 && StateType != A && MoveType != H
triggerall = NumEnemy
triggerall = (EnemyNear, MoveType = A && !EnemyNear, HitDefAttr = SA,AT) || (EnemyNear, MoveType = A && InGuardDist) || (P2MoveType = A && InGuardDist) || (Var(16) != 0)
trigger1 = Ctrl && (P2StateType != C || !EnemyNear, StateType = C)
trigger1 = StateNo != 5120
ignorehitpause = 1
persistent = 1

[State -3, ChangeState]
type = ChangeState
value = 131
triggerall = Var(59) > 0 && Alive && RoundState = 2 && StateType != A && MoveType != H
triggerall = NumEnemy
triggerall = (EnemyNear, MoveType = A && !EnemyNear, HitDefAttr = C,AT) || (EnemyNear, MoveType = A && InGuardDist) || (P2MoveType = A && InGuardDist) || (Var(16) != 0)
trigger1 = Ctrl && (P2StateType = C || EnemyNear, StateType = C)
trigger1 = StateNo != 5120
ignorehitpause = 1
persistent = 1

[State -3, ChangeState]
type = ChangeState
value = 132
triggerall = Var(59) > 0 && Alive && RoundState = 2 && StateType = A && MoveType != H
triggerall = NumEnemy
triggerall = (EnemyNear, MoveType = A && !EnemyNear, HitDefAttr = SCA,AT) || (EnemyNear, MoveType = A && InGuardDist) || (P2MoveType = A && InGuardDist) || (Var(16) != 0)
trigger1 = Ctrl
trigger2 = !Ctrl
trigger2 = (StateNo = [40,50]) || (StateNo = [10048,10055])
trigger2 = Time > 0
trigger2 = ifelse(EnemyNear, StateType = A || P2StateType = A, Random <= 129, Random <= 49)
ignorehitpause = 1
persistent = 1

;;;; simpler? ;;;;

[State -3, ChangeState]
type = ChangeState
value = ifelse((Ceil(P2Dist X) >= 100), 10051, ifelse(random <= 499, 10049, 10048))
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = stateno != [10048,10051]
triggerall = prevstateno != [10048,10051]
triggerall = NumEnemy
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = P2StateNo != [2000,3999]
triggerall = !(EnemyNear, StateNo = [2000,3999])
triggerall = !NumTarget(420)
triggerall = !NumTarget(4200)
trigger1 = Ctrl
Trigger1 = (P2StateNo=[800,819]) || (EnemyNear, StateNo=[800,819]) || (EnemyNear, HitDefAttr = SCA,AT)
;Trigger1 = Random <= 700
trigger2 = Ctrl
trigger2 = Ceil(P2Dist X) >= 85
trigger2 = !EnemyNear, StateType = A && P2StateType != A
trigger2 = EnemyNear, MoveType = A || P2MoveType = A
trigger2 = !EnemyNear, NumProj && Var(16) = 0
trigger2 = EnemyNear, Time < 5
trigger2 = Random <= 30 + (10 * (Life > Floor(0.50 * LifeMax)))
trigger3 = Ctrl
trigger3 = Ceil(P2Dist X) >= 85
trigger3 = EnemyNear, StateType = C || P2StateType = C
trigger3 = !(EnemyNear, MoveType = A) && P2MoveType != A
trigger3 = !EnemyNear, NumProj && Var(16) = 0
trigger3 = EnemyNear, Time < 15
trigger3 = Random <= 60 + (20 * (Life > Floor(0.50 * LifeMax)))
;trigger4 = !Ctrl
trigger4 = StateNo = [10,40]
trigger4 = Time > 0
trigger4 = !(EnemyNear, MoveType = A) && P2MoveType != A
trigger4 = !EnemyNear, NumProj && Var(16) = 0
;trigger4 = Random <= 30 + (10 * (Life > Floor(0.40 * LifeMax)))
trigger5 = Ctrl
trigger5 = P2StateNo = [40,50]
trigger5 = EnemyNear, StateNo = [40,50]
trigger5 = EnemyNear, Time > 0
trigger5 = Random <= 60 + (20 * (Life > Floor(0.40 * LifeMax)))
trigger6 = Ctrl
trigger6 = Ceil(P2Dist X) >= 85
trigger6 = EnemyNear, StateType = S || P2StateType = S
trigger6 = !(EnemyNear, MoveType = A) && P2MoveType != A
trigger6 = !EnemyNear, NumProj && Var(16) = 0
trigger6 = EnemyNear, Time = [5,25]
trigger6 = Random <= 65 + (25 * (Life > Floor(0.50 * LifeMax)))

[State -3, VarSet]
type = Null;VarSet
triggerall = var(59)>0 && roundstate = 2
triggerall = !numhelper(8060)
Triggerall = Life <= 0.20*LifeMax 
triggerall = FrontEdgeDist > 100 && random <= 6
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
var(11) = 1
ignorehitpause = 1

[State -3, ChangeState]
type = Null;VarSet
triggerall = var(59)>0 && roundstate = 2
triggerall = !numhelper(8060)
Triggerall = Life > 0.20*LifeMax 
triggerall = FrontEdgeDist > 168 && random <= 10
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
var(11) = 1
ignorehitpause = 1

[State -3, ChangeState]
type = null;ChangeState
value = 100 ;ifelse(ceil(p2dist x) <= 80, 10049, 100)
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = stateno != [100,106]
triggerall = prevstateno != [100,106]
triggerall = stateno != 10049
triggerall = prevstateno != 10049
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = ctrl
trigger1 = ceil(p2dist x) >= 190
trigger1 = (P2StateType = L) || (P2StateNo = [5100,5110])
Trigger1 = random < 0
trigger2 = ctrl
trigger2 = ceil(p2dist x) >= 140
trigger2 = P2StateNo = [53000,53002]
Trigger2 = random <= 984

[State -3, ChangeState]
type = ChangeState
value = 105
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = NumEnemy
triggerall = StateNo != [120,155]
triggerall = StateNo != [105,106]
triggerall = PrevStateNo != [105,106]
trigger1 = ceil(p2dist x) = [-90,90]
trigger1 = enemynear, BackEdgeDist <= 10
trigger1 = stateno = 852
trigger1 = animtime = 0
trigger2 = ctrl
trigger2 = ceil(p2dist x) = [-90,90]
trigger2 = BackEdgeDist >= 100
trigger2 = (P2StateNo = [5110,5120]) || P2StateType = L
Trigger2 = random < 900

[State -1, Recovery Roll forward]
type = ChangeState
value = 510
triggerall = var(59)>0 && roundstate = 2 && statetype != A
triggerall = FrontEdgeDist > 100
triggerall = random <= 499 && power < 1855
triggerall = Alive
triggerall = Pos Y >= 0
triggerall = ceil(p2dist x) = [-75,75]
trigger1 = StateType = L
trigger2 = StateNo = 5110

[State -1, Recovery Roll backward]
type = ChangeState
value = 511
triggerall = var(59)>0 && roundstate = 2 && statetype != A
triggerall = BackEdgeDist > 100
triggerall = random <= 499 && power < 1855
triggerall = Alive
triggerall = Pos Y >= 0
triggerall = ceil(p2dist x) = [-75,57]
trigger1 = StateType = L
trigger2 = StateNo = 5110

[State -1, Recovery Roll forward]
type = ChangeState
value = 510
triggerall = var(59)>0 && roundstate = 2 && statetype != A
triggerall = FrontEdgeDist > 100
triggerall = random <= 17 && power >= 1855
triggerall = Alive
triggerall = Pos Y >= 0
triggerall = ceil(p2dist x) != [-75,75]
trigger1 = StateType = L
trigger2 = StateNo = 5110

[State -1, Recovery Roll backward]
type = ChangeState
value = 511
triggerall = var(59)>0 && roundstate = 2 && statetype != A
triggerall = BackEdgeDist > 100
triggerall = random <= 17 && power >= 1855
triggerall = Alive
triggerall = Pos Y >= 0
triggerall = ceil(p2dist x) != [-75,75]
trigger1 = StateType = L
trigger2 = StateNo = 5110

[State -3, ChangeState]
type = Null;ChangeState
value = 800
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = stateno != [800,849]
triggerall = prevstateno != [800,849]
triggerall = prevstateno != [52,53]
triggerall = p2stateno != [5100,5120]
triggerall = ceil(p2dist x) = [0,49]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [2000,3999])
trigger1 = ctrl
trigger1 = P2StateType != A
trigger1 = P2MoveType != H
trigger1 = P2MoveType != A
trigger1 = Random < 22
trigger2 = P2MoveType != H
Trigger2 = (P2StateNo=[800,819]) || (EnemyNear, HitDefAttr = SC,AT)
Trigger2 = Random <= 900

[State -3, ChangeState]
type = null;ChangeState
value = 220
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = stateno != 220
triggerall = prevstateno != 220
triggerall = prevstateno != [52,53]
triggerall = p2stateno != [5100,5120]
triggerall = ceil(p2dist x) = [5,85]
triggerall = P2StateNo != [400,499]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = ctrl
trigger1 = P2StateType != A
trigger1 = P2MoveType != A
trigger1 = EnemyNear, PrevStateNo = [130,155]
trigger1 = IfElse(BackEdgeDist <= 40, Random < 100, Random < 50)

[State -3, ChangeState]
type = null;ChangeState
value = 420
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = stateno != 420
triggerall = prevstateno != 420
triggerall = prevstateno != [52,53]
triggerall = ceil(p2dist x) = [0,80]
;triggerall = P2StateNo != [400,499]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
trigger1 = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = ctrl
trigger1 = P2StateType != A
trigger1 = P2MoveType = A
trigger1 = Random < 250
trigger2 = ctrl = 0
trigger2 = stateno = [902,922]
trigger2 = animelemtime(15) >= 4
trigger2 = ceil(p2dist x) = [-130,130]
trigger2 = random <= 999

[State -3, ChangeState]
type = ChangeState
value = ifelse(Life < EnemyNear, Life || Life < P2Life, 40150, ifelse(NumTarget(630), 40150, 850))
triggerall = Var(59) > 0 && RoundState = 2 && StateType != A && MoveType != H
triggerall = NumEnemy
triggerall = StateNo != [120,155]
triggerall = StateNo != 40150
triggerall = PrevStateNo != 40150
triggerall = StateNo != [850,860]
triggerall = PrevStateNo != [850,860]
triggerall = P2StateType != A
triggerall = !EnemyNear, StateType = A
triggerall = P2StateNo != [40,49]
triggerall = !(EnemyNear, StateNo = [40,49])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = P2StateNo != [2000,3999]
triggerall = !(EnemyNear, StateNo = [2000,3999])
triggerall = !NumTarget(420)
;triggerall = !NumTarget(630)
triggerall = !NumTarget(640)
triggerall = !NumTarget(60049)
triggerall = !NumTarget(610)
triggerall = !NumTarget(4200)
triggerall = Ceil(P2Dist X) = [5,95]
triggerall = Ctrl
trigger1 = !EnemyNear, Ctrl
trigger1 = EnemyNear, AnimTime > -10
;trigger1 = !EnemyNear, NumProj && Var(16) = 0
trigger1 = Random <= 999
trigger2 = EnemyNear, Ctrl
trigger2 = EnemyNear, Time <= 10
;trigger2 = !EnemyNear, NumProj && Var(16) = 0
trigger2 = Random <= 99
;trigger3 = EnemyNear, Ctrl
trigger3 = EnemyNear, MoveType = I || P2MoveType = I
;trigger3 = !EnemyNear, NumProj && Var(16) = 0
trigger3 = Random <= 599
trigger4 = StateNo = 5120
trigger4 = AnimTime = 0
trigger4 = Random <= 399
trigger5 = NumTarget(630)
trigger5 = (Target, StateNo = [5000,5050]) || (P2StateNo = [5000,5050]) || (EnemyNear, StateNo = [5000,5050])
trigger5 = Random <= 599

[State -3, ChangeState]
type = ChangeState
value = 40150
triggerall = Var(59) > 0 && RoundState = 2 && StateType != A ;&& MoveType != H
triggerall = NumEnemy
;triggerall = StateNo != [120,155]
triggerall = StateNo != 40150
triggerall = PrevStateNo != 40150
triggerall = P2StateType != A
triggerall = !EnemyNear, StateType = A
triggerall = P2StateNo != [40,49]
triggerall = !(EnemyNear, StateNo = [40,49])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = (P2StateNo = [2000,3999]) || (EnemyNear, StateNo = [2000,3999])
triggerall = !NumTarget(420)
;triggerall = !NumTarget(630)
triggerall = !NumTarget(640)
triggerall = !NumTarget(60049)
triggerall = !NumTarget(610)
triggerall = !NumTarget(4200)
triggerall = Ceil(P2Dist X) = [5,95]
triggerall = Ctrl || PrevStateNo = 140
trigger1 = !EnemyNear, Ctrl
trigger1 = EnemyNear, AnimTime > -20
trigger1 = Random <= 999

[State -3, ChangeState]
type = ChangeState
value = 900
triggerall = Var(59) > 0 && RoundState = 2 && StateType != A && MoveType != H
triggerall = NumEnemy
triggerall = StateNo != [120,155]
triggerall = StateNo != 900
triggerall = PrevStateNo != 900
triggerall = P2StateType != A
triggerall = !EnemyNear, StateType = A
triggerall = P2StateNo != [40,49]
triggerall = !(EnemyNear, StateNo = [40,49])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = P2StateNo != [2000,3999]
triggerall = !(EnemyNear, StateNo = [2000,3999])
triggerall = !EnemyNear, StateType = C && P2StateType != C
triggerall = Ceil(P2Dist X) = [96,120]
triggerall = Ctrl
trigger1 = !EnemyNear, Ctrl
trigger1 = EnemyNear, AnimTime > -10
;trigger1 = !EnemyNear, NumProj && Var(16) = 0
trigger1 = Random <= 999
trigger2 = EnemyNear, Ctrl
trigger2 = EnemyNear, Time <= 10
;trigger2 = !EnemyNear, NumProj && Var(16) = 0
trigger2 = Random <= 99
;trigger3 = EnemyNear, Ctrl
trigger3 = EnemyNear, MoveType = I || P2MoveType = I
;trigger3 = !EnemyNear, NumProj && Var(16) = 0
trigger3 = Random <= 599

[State -3, ChangeState]
type = ChangeState
value = 900
triggerall = Var(59) > 0 && RoundState = 2 && StateType != A && MoveType != H
triggerall = NumEnemy
triggerall = StateNo != [120,155]
triggerall = StateNo != 900
triggerall = PrevStateNo != 900
triggerall = P2StateType != A
triggerall = !EnemyNear, StateType = A
triggerall = P2StateNo != [40,49]
triggerall = !(EnemyNear, StateNo = [40,49])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = P2StateNo != [2000,3999]
triggerall = !(EnemyNear, StateNo = [2000,3999])
triggerall = EnemyNear, StateType = S || P2StateType = S
triggerall = Ceil(P2Dist X) = [96,120]
triggerall = Ctrl
;trigger1 = !EnemyNear, Ctrl
trigger1 = EnemyNear, PrevStateNo = 5120
;trigger1 = !EnemyNear, NumProj && Var(16) = 0
trigger1 = Random <= 29

[State -3, ChangeState]
type = ChangeState
value = 1000
triggerall = Var(59) > 0 && RoundState = 2 && StateType != A && MoveType != H
triggerall = NumEnemy
triggerall = StateNo != [120,155]
triggerall = StateNo != 1000
triggerall = PrevStateNo != 1000
triggerall = P2StateType != A
triggerall = !EnemyNear, StateType = A
triggerall = P2StateNo != [40,49]
triggerall = !(EnemyNear, StateNo = [40,49])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = P2StateNo != [2000,3999]
triggerall = !(EnemyNear, StateNo = [2000,3999])
triggerall = !EnemyNear, StateType = C && P2StateType != C
triggerall = !NumTarget(420)
triggerall = !NumTarget(630)
triggerall = !NumTarget(640)
triggerall = !NumTarget(60049)
triggerall = !NumTarget(610)
triggerall = !NumTarget(4200)
triggerall = Ceil(P2Dist X) = [121,157]
triggerall = Ctrl
trigger1 = !EnemyNear, Ctrl
trigger1 = EnemyNear, AnimTime > -10
;trigger1 = !EnemyNear, NumProj && Var(16) = 0
trigger1 = Random <= 999
trigger2 = EnemyNear, Ctrl
trigger2 = EnemyNear, Time <= 10
;trigger2 = !EnemyNear, NumProj && Var(16) = 0
trigger2 = Random <= 99
;trigger3 = EnemyNear, Ctrl
trigger3 = EnemyNear, MoveType = I || P2MoveType = I
;trigger3 = !EnemyNear, NumProj && Var(16) = 0
trigger3 = Random <= 599
trigger4 = !EnemyNear, Ctrl
trigger4 = EnemyNear, MoveType = A || P2MoveType = A
trigger4 = EnemyNear, Time < 5
trigger4 = Random <= 59
trigger5 = !EnemyNear, Ctrl
trigger5 = P2MoveType != H && EnemyNear, MoveType != H
trigger5 = EnemyNear, AnimTime > -5
trigger5 = Random <= 79

[State -3, ChangeState]
type = null;ChangeState
value = ifelse(random <= 300, ifelse(ceil((p2dist x) = [100,120]), 41049, 0), 0)
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = stateno = 10 || stateno = 11 || stateno = 12 || stateno = 20 || stateno = 40
trigger1 = !EnemyNear, Ctrl && EnemyNear, Time <= 5

[State -3, Lk Tatsumaki Gorasen]
type = null;ChangeState
value = 20149
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;&& P2Dist x = [300,320]
;triggerall = P2StateType != A
triggerall = P2MoveType != A
triggerall = stateno != 20149
triggerall = prevstateno != 20149
triggerall = p2stateno != [5100,5120]
triggerall = ceil(p2dist x) = [35,85]
triggerall = P2StateNo != [400,499]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = P2MoveType != A
trigger1 = random <= 250
trigger1 = ctrl
;trigger2 = P2MoveType = A
;trigger2 = random <= 25
;trigger2 = ctrl

[State -3, Lk Tatsumaki Gorasen]
type = null;ChangeState
value = 40149
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;&& P2Dist x = [300,320]
triggerall = P2StateType != A
triggerall = P2MoveType != A
triggerall = stateno != 40149
triggerall = prevstateno != 40149
triggerall = p2stateno != [5100,5120]
triggerall = ceil(p2dist x) = [34,74]
triggerall = P2StateNo != [400,499]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = P2MoveType != A
trigger1 = random <= 250
trigger1 = ctrl
;trigger2 = P2MoveType = A
;trigger2 = random <= 25
;trigger2 = ctrl

[State -3, Lk Tatsumaki Gorasen]
type = null;ChangeState
value = 40149
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;&& P2Dist x = [300,320]
triggerall = P2StateType != A
triggerall = P2MoveType != A
triggerall = stateno != 40149
triggerall = prevstateno != 40149
triggerall = p2stateno = [5100,5120]
triggerall = ceil(p2dist x) = [34,74]
;triggerall = Life > 0.20*LifeMax
triggerall = P2StateNo != [400,499]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = NumTarget(630)
trigger1 = random <= 950
;trigger1 = ctrl
;trigger2 = P2MoveType = A
;trigger2 = random <= 25
;trigger2 = ctrl

[State -3, Lk Tatsumaki Gorasen]
type = ChangeState
value = 60049
triggerall = var(59)>0 && roundstate = 2 && statetype = A && MoveType != H ;&& P2Dist x = [300,320]
triggerall = P2StateType = A
;triggerall = P2MoveType != H
triggerall = stateno != 60049
triggerall = prevstateno != 60049
;triggerall = p2stateno != [5100,5120]
triggerall = ceil(p2dist x) = [0,70]
triggerall = ceil(p2dist y) = [-70,-5]
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = NumTarget(420)
trigger2 = NumTarget(4200)

[State -3, Lk Tatsumaki Gorasen]
type = Null;ChangeState
value = 610
triggerall = var(59)>0 && roundstate = 2 && statetype = A && MoveType != H ;&& P2Dist x = [300,320]
triggerall = P2StateType = A
triggerall = stateno != 610
triggerall = prevstateno != 610
;triggerall = p2stateno != [5100,5120]
triggerall = ceil(p2dist x) = [71,120]
triggerall = ceil(p2dist y) = [-70,-5]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Var(31) = 0
trigger1 = P2MoveType != A
trigger1 = random <= 250
trigger1 = ctrl
trigger2 = Var(31) = 0
trigger2 = P2MoveType = A
trigger2 = random <= 25
trigger2 = ctrl

[State -3, Lk Tatsumaki Gorasen]
type = ChangeState
value = 610
triggerall = var(59)>0 && roundstate = 2 && statetype = A && MoveType != H ;&& P2Dist x = [300,320]
triggerall = P2StateType = A
triggerall = stateno != 610
triggerall = prevstateno != 610
;triggerall = p2stateno != [5100,5120]
triggerall = ceil(p2dist x) = [0,100]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Var(31) != 0
trigger1 = NumTarget(630)
;trigger1 = random <= 899

[State -3, Lk Tatsumaki Gorasen]
type = null;ChangeState
value = 630
triggerall = var(59)>0 && roundstate = 2 && statetype = A && MoveType != H ;&& P2Dist x = [300,320]
;triggerall = P2StateType = A
triggerall = stateno != 630
triggerall = prevstateno != 630
triggerall = ctrl
triggerall = ceil(p2dist x) <= 0
triggerall = ceil(p2dist y) <= 95
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Var(31) != 0
trigger1 = random <= 899

[State -3, Lk Tatsumaki Gorasen]
type = null;ChangeState
value = 640
triggerall = var(59)>0 && roundstate = 2 && statetype = A && MoveType != H ;&& P2Dist x = [300,320]
triggerall = P2MoveType != H
triggerall = stateno != 640
triggerall = prevstateno != 640
triggerall = ctrl
triggerall = ceil(p2dist x) <= 90 && ceil(p2dist x) > 0
triggerall = ceil(p2dist y) <= 95
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Var(31) != 0
trigger1 = random <= 899

[State -3, Telequinesis]
type = null;ChangeState
value = 10048
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
;triggerall = P2MoveType = A
triggerall = StateNo != 10048
;triggerall = P2StateType = C
;triggerall = P2StateNo <= 800
triggerall = NumEnemy
triggerall = P2StateNo = [5100,5120]
trigger1 = ctrl
trigger1 = ceil(p2dist x) = [100,130]
trigger1 = ifelse(StateNo = 40, random <= 855, random <= 55)
;trigger2 = stateno = [902,922]
;trigger2 = animelemtime(15) >= 4
;trigger2 = ceil(p2dist x) = [-130,130]
;trigger2 = random <= 999

[State -3, Telequinesis]
type = null;ChangeState
value = 10048
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
;triggerall = P2MoveType = A
triggerall = StateNo != 10048
;triggerall = P2StateType = C
;triggerall = P2StateNo <= 800
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && (P2MoveType = A || EnemyNear, MoveType = A || EnemyNear, NumProj != 0 || Var(16) != 0)
trigger1 = ctrl
trigger1 = ceil(p2dist x) = [100,130]
trigger1 = ifelse(StateNo = 40, random <= 855, random <= 55)
;trigger2 = stateno = [902,922]
;trigger2 = animelemtime(15) >= 4
;trigger2 = ceil(p2dist x) = [-130,130]
;trigger2 = random <= 999

[State -3, Telequinesis]
type = null;ChangeState
value = 10049
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
;triggerall = P2MoveType = A
triggerall = StateNo != 10049
;triggerall = P2StateType = C
;triggerall = P2StateNo <= 800
triggerall = NumEnemy
triggerall = P2StateNo = [5100,5120]
trigger1 = ctrl
trigger1 = ceil(p2dist x) = [131,180]
trigger1 = ifelse(StateNo = 40, random <= 855, random <= 55)
;trigger2 = stateno = [902,922]
;trigger2 = animelemtime(15) >= 4
;trigger2 = ceil(p2dist x) = [-180,180]
;trigger2 = random <= 999

[State -3, Telequinesis]
type = null;ChangeState
value = 10049
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
;triggerall = P2MoveType = A
triggerall = StateNo != 10049
;triggerall = P2StateType = C
;triggerall = P2StateNo <= 800
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && (P2MoveType = A || EnemyNear, MoveType = A || EnemyNear, NumProj != 0 || Var(16) != 0)
trigger1 = ctrl
trigger1 = ceil(p2dist x) = [131,180]
trigger1 = ifelse(StateNo = 40, random <= 855, random <= 55)
trigger2 = !ctrl
;trigger2 = stateno = [902,922]
;trigger2 = animelemtime(15) >= 4
;trigger2 = ceil(p2dist x) = [-180,180]
;trigger2 = random <= 999

[State -3, Telequinesis]
type = Null;ChangeState
value = 23049
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H
triggerall = StateNo != 23049
triggerall = P2StateType = S
triggerall = P2StateNo != [400,499]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = NumTarget(630)
trigger1 = random <= 885

[State -3, Telequinesis]
type = null;ChangeState
value = 900
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = P2statetype = A
triggerall = P2StateNo != [400,499]
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [120,160]
trigger1 = ceil(p2dist y) = [-100,-50]
trigger1 = EnemyNear, Vel Y != 0
trigger1 = random <= 85
trigger2 = Ctrl = 1
trigger2 = P2StateNo = 1028
trigger2 = ceil(p2dist x) = [100,140]
trigger2 = random <= 115
trigger3 = Ctrl = 1
trigger3 = P2StateNo = 456852
trigger3 = ceil(p2dist x) = [100,140]
trigger3 = ceil(p2dist y) = [-10,10]
trigger3 = random <= 315
trigger4 = Ctrl = 1
trigger4 = EnemyNear, Vel X >= 3
trigger4 = ceil(p2dist x) = [130,190]
trigger4 = ceil(p2dist y) = [-30,30]
trigger4 = random <= 215
trigger5 = Ctrl = 1
trigger5 = P2StateNo = 5040
trigger5 = ceil(p2dist x) = [5,100]
trigger5 = ceil(p2dist y) = [-30,30]
trigger5 = random <= 15

[State -3, Telequinesis]
type = ChangeState
value = 4000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
;triggerall = (PrevStateNo = 140) || ((P2MoveType != A) && (PrevStateNo = [130,131]))
triggerall = NumEnemy
triggerall = StateNo != 4000
triggerall = PrevStateNo != 4000
triggerall = P2StateNo != [1000,3999]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = Power > 1200
triggerall = P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = !numtarget
trigger1 = ceil(p2dist x) >= 255
trigger1 = Life < EnemyNear, Life || Life < P2Life
trigger1 = random <= 75
trigger2 = Ctrl = 1
trigger2 = !numtarget
trigger2 = ceil(p2dist x) >= 100
trigger2 = Life < 0.25*LifeMax
trigger2 = random <= 475
trigger3 = Ctrl = 0
trigger3 = numtarget(250)
trigger3 = target, stateno != [120,155]
trigger3 = ceil(p2dist x) >= 100
trigger3 = random <= 875
trigger4 = Ctrl = 0
trigger4 = numtarget(610)
trigger4 = target, stateno != [120,155]
trigger4 = ceil(p2dist x) >= 100
trigger4 = random <= 575

[State -3, Telequinesis]
type = ChangeState
value = 4000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
;triggerall = (PrevStateNo = 140) || ((P2MoveType != A) && (PrevStateNo = [130,131]))
triggerall = NumEnemy
triggerall = StateNo != 4000
triggerall = PrevStateNo != 4000
triggerall = (P2StateNo = [200,4999]) || (EnemyNear, StateNo = [200,4999])
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [5100,5120])
triggerall = Power > 1200
triggerall = P2MoveType != A || EnemyNear, MoveType != A || EnemyNear, NumProj || Var(16) != 0
trigger1 = Ctrl = 1
trigger1 = !numtarget
trigger1 = ceil(p2dist x) >= 255
trigger1 = EnemyNear, AnimTime >= -6
;trigger1 = Life > EnemyNear, Life || Life > P2Life
;trigger1 = random <= 75

[State -3, Telequinesis]
type = null;ChangeState
value = 4200
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = (PrevStateNo = 140) || ((P2MoveType != A) && (PrevStateNo = [130,131]))
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
;triggerall = P2StateNo != [5100,5120]
triggerall = Power > 1200
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = !numtarget
trigger1 = ceil(p2dist x) = [10,120]
;trigger1 = P2StateNo = [1000,2999]
trigger1 = !EnemyNear, NumProj
trigger1 = random > 205 && random <= 305
trigger2 = Ctrl = 0
trigger2 = NumTarget(41049)
trigger2 = P2StateNo != [120,155]
trigger2 = random > 100

[State -3, Telequinesis]
type = null;ChangeState
value = 902
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
;triggerall = P2MoveType = A
triggerall = NumEnemy
triggerall = stateno != 902
triggerall = prevstateno != 902
;triggerall = P2StateNo != [1000,3999]
;triggerall = P2StateNo != [5100,5120]
;triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = Life > 0.65*LifeMax
triggerall = NumEnemy
trigger1 = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = !numtarget
trigger1 = ceil(p2dist x) = [10,180]
trigger1 = Life > 0.50*LifeMax
trigger1 = random <= 85
trigger2 = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger2 = Ctrl = 1
trigger2 = !numtarget
trigger2 = ceil(p2dist x) = [10,180]
trigger2 = Life <= 0.50*LifeMax
trigger2 = random <= 45
;trigger3 = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
;trigger3 = Ctrl = 1
trigger3 = numtarget
trigger3 = ceil(p2dist x) = [10,180]
trigger3 = (P2StateNo = [5000,5099]) || (EnemyNear, StateNo = [5000,5099])
trigger3 = random <= 845
trigger4 = EnemyNear, Time <= 5 && (P2MoveType = A || EnemyNear, MoveType = A || EnemyNear, NumProj != 0 || Var(16) != 0)
trigger4 = Ctrl = 1
trigger4 = !numtarget
trigger4 = ceil(p2dist x) = [10,180]
trigger4 = P2StateNo = [200,4999]
trigger4 = ifelse(Life <= 0.30*LifeMax, random <= 55, random <= 95)

[State -3, Telequinesis]
type = null;ChangeState
value = 1000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
;triggerall = P2MoveType = A
;triggerall = P2StateNo <= 2500
triggerall = P2StateNo != [400,499]
;triggerall = P2StateType != A;C
triggerall = NumEnemy
;triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
;triggerall = EnemyNear, StateNo = [1000,3999]
triggerall = !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [50,260]
trigger1 = Life >= 0.15*LifeMax
trigger1 = EnemyNear, Vel X > 1.25
trigger1 = random <= 555

[State -3, Telequinesis]
type = null;ChangeState
value = 1000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = P2MoveType = A
triggerall = P2StateNo <= 2500
triggerall = P2StateNo != [400,499]
triggerall = P2StateType != A;C
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [90,160]
trigger1 = Life > 0.15*LifeMax
trigger1 = EnemyNear, Vel X > 1
trigger1 = random <= 885
trigger2 = Ctrl = 1
trigger2 = ceil(p2dist x) = [50,160]
trigger2 = Life > 0.15*LifeMax
trigger2 = EnemyNear, Vel X <= 1
trigger2 = EnemyNear, Time >= 10
trigger2 = random <= 885

[State -3, Telequinesis]
type = null;ChangeState
value = 1000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = P2StateNo != [1025,1028]
triggerall = P2StateNo != [53000,53002]
triggerall = P2StateNo != [400,499]
triggerall = P2StateType != A;C
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = P2MoveType != A
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [75,100]
trigger1 = EnemyNear, Vel X > 0
trigger1 = Life > 0.15*LifeMax
trigger1 = random <= 28
trigger2 = P2MoveType = A
trigger2 = P2StateNo <= 2000
trigger2 = Ctrl = 1
trigger2 = Life > 0.15*LifeMax
trigger2 = ceil(p2dist y) = [-100,0]
trigger2 = EnemyNear, Vel Y > 0
trigger2 = EnemyNear, Time >= 3
trigger2 = random <= 25
trigger3 = P2MoveType != A
trigger3 = Ctrl = 1
trigger3 = Life > 0.15*LifeMax
trigger3 = ceil(p2dist y) = [-80,0]
trigger3 = EnemyNear, Vel Y > 0
trigger3 = EnemyNear, Time >= 3
trigger3 = random <= 35
trigger4 = numtarget(210) || numtarget(21049)
trigger4 = p2stateno != [120,155]
trigger4 = Life <= 0.25*LifeMax 
trigger5 = P2MoveType = A
trigger5 = P2StateNo <= 3000
trigger5 = Ctrl = 1
trigger5 = Life <= 0.25*LifeMax 
trigger5 = ceil(p2dist x) >= 60
trigger5 = EnemyNear, Time >= 3
trigger5 = random <= 425

[State -3, Telequinesis]
type = null;ChangeState
value = 4000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1000
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = !numtarget
trigger1 = ceil(p2dist x) >= 180
trigger1 = EnemyNear, NumProj != 0
Trigger1 = random <= 38
trigger2 = Ctrl = 1
trigger2 = !numtarget
trigger2 = ceil(p2dist x) >= 180
trigger2 = EnemyNear, NumHelper != 0 || Var(16) != 0
trigger2 = EnemyNear, Time >= 5
Trigger2 = random <= 8

[State -3, Telequinesis]
type = null;ChangeState
value = 4000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = PrevStateNo = [140,149];
triggerall = Ctrl = 1
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Power >= 2500
trigger1 = NumExplod(8060) = 0
Trigger1 = random <= 180
trigger1 = Power >= 1500
trigger2 = NumExplod(8060) != 0
Trigger2 = random <= 920

[State -3, Telequinesis]
type = null;ChangeState
value = 4000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 2400
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [70,179]
;trigger1 = EnemyNear, NumHelper = 0
;trigger1 = !EnemyNear, NumProj
trigger1 = P2StateNo = [120,155]
Trigger1 = random <= 35

[State -3, Telequinesis]
type = null;ChangeState
value = 4000
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1500
triggerall = NumEnemy
;triggerall = P2StateNo != [1000,3999]
;triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
;trigger1 = Ctrl = 1
;trigger1 = ceil(p2dist x) > 179
;trigger1 = EnemyNear, NumHelper = 0
trigger1 = EnemyNear, NumProj != 0 || Var(16) != 0
trigger1 = stateno = 5120 && AnimTime = 0
Trigger1 = random <= 915
trigger2 = (P2MoveType = A) && (enemynear,time=[0,10]) && (enemynear, NumHelper > 0)
trigger2 = stateno = 5120 && AnimTime = 0
Trigger2 = random <= 915
trigger3 = (EnemyNear, NumProj != 0) || ((P2MoveType = A) && (enemynear,time=[0,10]) && (enemynear, NumHelper > 0)) || Var(16) != 0
trigger3 = ctrl
trigger3 = p2stateno >= 2500 || EnemyNear, HitDefAttr = SC,HP
Trigger3 = random <= 415
trigger4 = NumTarget(250)
trigger4 = P2StateNo != [120,155]
trigger4 = Random <= 415
trigger5 = StateNo = 1000
trigger5 = P2StateNo = [1025,1028]
trigger5 = Random <= 815
trigger6 = StateNo = [900,999]
trigger6 = P2StateNo = [5000,5035]
trigger6 = Random <= 815

[State -3, Telequinesis]
type = ChangeState
value = 4100
triggerall = var(59)>0 && roundstate = 2 && statetype != A ;&& MoveType != H ;
triggerall = Power >= 1000
triggerall = NumEnemy
triggerall = StateNo != 4100
triggerall = PrevStateNo != 4100
triggerall = P2StateNo != [5100,5120]
;triggerall = EnemyNear, Time <= 15 ;&& P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = StateNo = 5120
trigger1 = AnimTime = 0
trigger1 = ceil(p2dist x) = [-179,179]
Trigger1 = ifelse(Life <= 0.20*LifeMax, random <= 775, random <= 75)
trigger2 = Ctrl 
trigger2 = Power >= PowerMax
trigger2 = ceil(p2dist x) = [-129,129]
Trigger2 = ifelse(Life <= 0.20*LifeMax, random <= 675, random <= 275)

[State -3, Telequinesis]
type = null;ChangeState
value = 4100
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1100
triggerall = NumEnemy
triggerall = P2StateNo = [2000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = NumTarget(220) ;Ctrl = 1
trigger1 = P2StateNo != [120,155]
trigger1 = ceil(p2dist x) = [60,179]
;trigger1 = Life <= 0.70*LifeMax 
Trigger1 = random <= 605

[State -3, Telequinesis]
type = null;ChangeState
value = 4100
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1600
triggerall = NumEnemy
triggerall = P2StateNo = [2000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = StateNo = 5120
trigger1 = AnimTime = 0
trigger1 = ceil(p2dist x) = [70,179]
trigger1 = Life > 0.30*LifeMax 
Trigger1 = random <= 115

[State -3, Telequinesis]
type = null;ChangeState
value = 4200
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1000
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [0,100]
trigger1 = P2StateNo = 1028
Trigger1 = random <= 695
trigger2 = Ctrl = 1
trigger2 = ceil(p2dist x) = [0,90]
trigger2 = P2StateNo = [53000,53002]
Trigger2 = random <= 895
trigger3 = Ctrl = 0
trigger3 = ceil(p2dist x) = [0,90]
trigger3 = HitDefAttr = SC,NA,NP
trigger3 = P2StateNo = [5000,5019]
Trigger3 = random <= 55

[State -3, Telequinesis]
type = null;ChangeState
value = 4200
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1200
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
triggerall = InGuardDist ;&& !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [0,90]
trigger1 = P2StateNo = 5040
Trigger1 = random <= 895

[State -3, Telequinesis]
type = ChangeState
value = 41
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = StateNo != 41
triggerall = StateNo = 420
triggerall = NumEnemy
triggerall = NumTarget(420)
triggerall = (Target, StateNo = [5000,5050]) || (P2StateNo = [5000,5050]) || (EnemyNear, StateNo = [5000,5050])
trigger1 = 1
ignorehitpause = 1

[State -3, Telequinesis]
type = ChangeState
value = 41
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = StateNo != 41
triggerall = StateNo = 4200
triggerall = NumEnemy
triggerall = NumTarget(4200)
triggerall = (Target, StateNo = [5000,5050]) || (P2StateNo = [5000,5050]) || (EnemyNear, StateNo = [5000,5050])
trigger1 = 1
ignorehitpause = 1

[State -3, Telequinesis]
type = null;ChangeState
value = 41
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = StateNo != 41
triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = ctrl
trigger1 = ceil(p2dist x) <= 70
trigger1 = BackEdgeDist >= 100
trigger1 = (P2StateNo = [5110,5120]) || P2StateType = L
Trigger1 = random < 7

[State -3, Telequinesis]
type = Null;ChangeState
value = 41
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType = I ;
triggerall = Ctrl
triggerall = StateNo != 41
trigger1 = ceil(p2dist x) = [200,250]
trigger1 = (P2MoveType = A) && (enemynear,time=[0,10]) && (enemynear, NumHelper > 0)
Trigger1 = random <= 32
trigger2 = ceil(p2dist x) = [200,250]
trigger2 = enemynear, numproj != 0 || EnemyNear, HitDefAttr = SC,NP,SP,HP
Trigger2 = random <= 128

[State -3, Telequinesis]
type = ChangeState
value = 4300
triggerall = var(59)>0 && roundstate = 2 && statetype != A ;&& MoveType != H ;
triggerall = Power >= 1000
triggerall = NumHelper(4334) = 0
triggerall = NumEnemy
triggerall = StateNo != 4300
triggerall = PrevStateNo != 4300
triggerall = P2StateNo != [5100,5120]
;trigger1 = MoveType != H
trigger1 = Ctrl || (StateNo = [40,44]) || (StateNo = [120,155]) ;|| !Ctrl
trigger1 = (EnemyNear, StateNo = [3500,3510]) || (P2StateNo = [3500,3510])
trigger1 = EnemyNear, Name = "Thanos" || P2Name = "Thanos"
trigger1 = EnemyNear, Authorname = "The_None"
;trigger1 = ceil(p2dist x) = [-139,139]
;trigger2 = random <= 999

[State -3, Telequinesis]
type = null;ChangeState
value = ifelse(ceil(p2dist x) < 155, 4400, 4300)
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1000
triggerall = NumEnemy
;triggerall = P2StateNo != [1000,3999]
;triggerall = P2StateNo = [5100,5110]
;triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = !InGuardDist
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [100,300]
trigger1 = Life <= 0.20*LifeMax ;(P2StateType = L) || (P2StateNo = [5199,5120])
Trigger1 = random <= 294

[State -3, Telequinesis]
type = ChangeState
value = 4400
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1111
triggerall = NumEnemy
triggerall = StateNo != 4400
triggerall = PrevStateNo != 4400
triggerall = P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1 || (StateNo = [10,52]) || (StateNo = 106)
trigger1 = ifelse(Life < EnemyNear, Life || Life < P2Life, (ceil(p2dist x) = [-300,300]), (ceil(p2dist x) = [150,300]))
trigger1 = EnemyNear, StateNo = 5120 || P2StateNo = 5120
trigger1 = AnimTime = 0 || EnemyNear, Time >= 5
Trigger1 = ifelse(Life < EnemyNear, Life || Life < P2Life, random <= 174, random <= 74)
trigger2 = Ctrl = 1 || (StateNo = [10,52]) || (StateNo = 106)
trigger2 = ifelse(Life < EnemyNear, Life || Life < P2Life, (ceil(p2dist x) = [-300,300]), (ceil(p2dist x) = [150,300]))
trigger2 = EnemyNear, PrevStateNo = 5120
trigger2 = EnemyNear, Time <= 5
Trigger2 = ifelse(Life < EnemyNear, Life || Life < P2Life, random <= 144, random <= 44)

[State -3, Telequinesis]
type = null;ChangeState
value = 4500
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1500
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [170,300]
trigger1 = (P2StateType = L) || (P2StateNo = [5100,5120])
trigger1 = Life <= 0.20*LifeMax
Trigger1 = random <= 524

[State -3, Telequinesis]
type = null;ChangeState
value = ifelse(random <= 400, 4400, 4100)
triggerall = var(59)>0 && roundstate = 2 && statetype != A && MoveType != H ;
triggerall = Power >= 1000
triggerall = NumEnemy
triggerall = P2StateNo != [1000,3999]
triggerall = P2StateNo != [5100,5120]
;triggerall = !(EnemyNear, StateNo = [1000,3999])
;triggerall = NumEnemy
triggerall = EnemyNear, Time <= 5 && P2MoveType != A && EnemyNear, MoveType != A && !EnemyNear, NumProj && Var(16) = 0
trigger1 = Ctrl = 1
trigger1 = ceil(p2dist x) = [145,300]
trigger1 = NumHelper(8060) != 0 || NumHelper(8061) != 0
;trigger1 = Life <= 0.20*LifeMax
Trigger1 = random <= 774
